{"version":3,"file":"transactions.umd.development.js","sources":["../src/constants.ts","../../../node_modules/regenerator-runtime/runtime.js","../src/keys.ts","../src/errors.ts","../src/postcondition.ts","../src/payload.ts","../src/types.ts","../src/clarity/types/principalCV.ts","../src/clarity/clarityValue.ts","../src/clarity/types/booleanCV.ts","../src/clarity/types/intCV.ts","../src/clarity/types/bufferCV.ts","../src/clarity/types/optionalCV.ts","../src/clarity/types/responseCV.ts","../src/clarity/types/listCV.ts","../src/clarity/types/tupleCV.ts","../src/clarity/types/stringCV.ts","../src/clarity/serialize.ts","../src/bufferReader.ts","../src/clarity/deserialize.ts","../src/utils.ts","../src/authorization.ts","../src/transaction.ts","../src/signer.ts","../src/contract-abi.ts","../src/builders.ts"],"sourcesContent":["/**\n * Unsigned 32-bit integer\n */\nenum ChainID {\n  Testnet = 0x80000000,\n  Mainnet = 0x00000001,\n}\n\nconst DEFAULT_CHAIN_ID = ChainID.Mainnet;\nconst MAX_STRING_LENGTH_BYTES = 128;\nconst CLARITY_INT_SIZE = 128;\nconst COINBASE_BUFFER_LENGTH_BYTES = 32;\nconst RECOVERABLE_ECDSA_SIG_LENGTH_BYTES = 65;\nconst COMPRESSED_PUBKEY_LENGTH_BYTES = 32;\nconst UNCOMPRESSED_PUBKEY_LENGTH_BYTES = 64;\nconst MEMO_MAX_LENGTH_BYTES = 34;\nconst DEFAULT_CORE_NODE_API_URL = 'https://stacks-node-api.mainnet.stacks.co';\n\nenum StacksMessageType {\n  Address,\n  Principal,\n  LengthPrefixedString,\n  MemoString,\n  AssetInfo,\n  PostCondition,\n  PublicKey,\n  LengthPrefixedList,\n  Payload,\n  MessageSignature,\n  TransactionAuthField,\n}\n\nenum PayloadType {\n  TokenTransfer = 0x00,\n  SmartContract = 0x01,\n  ContractCall = 0x02,\n  PoisonMicroblock = 0x03,\n  Coinbase = 0x04,\n}\n\nenum AnchorMode {\n  OnChainOnly = 0x01,\n  OffChainOnly = 0x02,\n  Any = 0x03,\n}\n\nenum TransactionVersion {\n  Mainnet = 0x00,\n  Testnet = 0x80,\n}\n\nconst DEFAULT_TRANSACTION_VERSION = TransactionVersion.Mainnet;\n\nenum PostConditionMode {\n  Allow = 0x01,\n  Deny = 0x02,\n}\n\nenum PostConditionType {\n  STX = 0x00,\n  Fungible = 0x01,\n  NonFungible = 0x02,\n}\n\nenum AuthType {\n  Standard = 0x04,\n  Sponsored = 0x05,\n}\n\nenum AddressHashMode {\n  // serialization modes for public keys to addresses.\n  // We support four different modes due to legacy compatibility with Stacks v1 addresses:\n  /** SingleSigHashMode - hash160(public-key), same as bitcoin's p2pkh */\n  SerializeP2PKH = 0x00,\n  /** MultiSigHashMode - hash160(multisig-redeem-script), same as bitcoin's multisig p2sh */\n  SerializeP2SH = 0x01,\n  /** SingleSigHashMode - hash160(segwit-program-00(p2pkh)), same as bitcoin's p2sh-p2wpkh */\n  SerializeP2WPKH = 0x02,\n  /** MultiSigHashMode - hash160(segwit-program-00(public-keys)), same as bitcoin's p2sh-p2wsh */\n  SerializeP2WSH = 0x03,\n}\n\ntype SingleSigHashMode = AddressHashMode.SerializeP2PKH | AddressHashMode.SerializeP2WPKH;\ntype MultiSigHashMode = AddressHashMode.SerializeP2SH | AddressHashMode.SerializeP2WSH;\n\nenum AddressVersion {\n  MainnetSingleSig = 22,\n  MainnetMultiSig = 20,\n  TestnetSingleSig = 26,\n  TestnetMultiSig = 21,\n}\n\nenum PubKeyEncoding {\n  Compressed = 0x00,\n  Uncompressed = 0x01,\n}\n\nenum FungibleConditionCode {\n  Equal = 0x01,\n  Greater = 0x02,\n  GreaterEqual = 0x03,\n  Less = 0x04,\n  LessEqual = 0x05,\n}\n\nenum NonFungibleConditionCode {\n  DoesNotOwn = 0x10,\n  Owns = 0x11,\n}\n\nenum PostConditionPrincipalID {\n  Origin = 0x01,\n  Standard = 0x02,\n  Contract = 0x03,\n}\n\nenum AssetType {\n  STX = 0x00,\n  Fungible = 0x01,\n  NonFungible = 0x02,\n}\n\nenum TxRejectedReason {\n  Serialization = 'Serialization',\n  Deserialization = 'Deserialization',\n  SignatureValidation = 'SignatureValidation',\n  FeeTooLow = 'FeeTooLow',\n  BadNonce = 'BadNonce',\n  NotEnoughFunds = 'NotEnoughFunds',\n  NoSuchContract = 'NoSuchContract',\n  NoSuchPublicFunction = 'NoSuchPublicFunction',\n  BadFunctionArgument = 'BadFunctionArgument',\n  ContractAlreadyExists = 'ContractAlreadyExists',\n  PoisonMicroblocksDoNotConflict = 'PoisonMicroblocksDoNotConflict',\n  PoisonMicroblockHasUnknownPubKeyHash = 'PoisonMicroblockHasUnknownPubKeyHash',\n  PoisonMicroblockIsInvalid = 'PoisonMicroblockIsInvalid',\n  BadAddressVersionByte = 'BadAddressVersionByte',\n  NoCoinbaseViaMempool = 'NoCoinbaseViaMempool',\n  ServerFailureNoSuchChainTip = 'ServerFailureNoSuchChainTip',\n  ServerFailureDatabase = 'ServerFailureDatabase',\n  ServerFailureOther = 'ServerFailureOther',\n}\n\nexport {\n  MAX_STRING_LENGTH_BYTES,\n  CLARITY_INT_SIZE,\n  COINBASE_BUFFER_LENGTH_BYTES,\n  DEFAULT_CHAIN_ID,\n  DEFAULT_TRANSACTION_VERSION,\n  RECOVERABLE_ECDSA_SIG_LENGTH_BYTES,\n  COMPRESSED_PUBKEY_LENGTH_BYTES,\n  UNCOMPRESSED_PUBKEY_LENGTH_BYTES,\n  MEMO_MAX_LENGTH_BYTES,\n  DEFAULT_CORE_NODE_API_URL,\n  ChainID,\n  StacksMessageType,\n  PayloadType,\n  AnchorMode,\n  TransactionVersion,\n  PostConditionMode,\n  PostConditionType,\n  PostConditionPrincipalID,\n  AuthType,\n  AddressHashMode,\n  SingleSigHashMode,\n  MultiSigHashMode,\n  AddressVersion,\n  PubKeyEncoding,\n  FungibleConditionCode,\n  NonFungibleConditionCode,\n  AssetType,\n  TxRejectedReason,\n};\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","import {\n  AddressHashMode,\n  AddressVersion,\n  COMPRESSED_PUBKEY_LENGTH_BYTES,\n  UNCOMPRESSED_PUBKEY_LENGTH_BYTES,\n  StacksMessageType,\n  TransactionVersion,\n  PubKeyEncoding,\n} from './constants';\n\nimport {\n  BufferArray,\n  hash160,\n  hashP2PKH,\n  hexStringToInt,\n  intToHexString,\n  leftPadHexToLength,\n  randomBytes,\n} from './utils';\n\nimport { ec as EC } from 'elliptic';\n\nimport { MessageSignature, createMessageSignature } from './authorization';\nimport { BufferReader } from './bufferReader';\nimport { c32address } from 'c32check';\nimport { addressHashModeToVersion, addressFromVersionHash, addressToString } from './types';\n\nexport interface StacksPublicKey {\n  readonly type: StacksMessageType.PublicKey;\n  readonly data: Buffer;\n}\n\n/** Creates a P2PKH address string from the given private key and tx version. */\nexport function getAddressFromPrivateKey(\n  /** Private key buffer or hex string */\n  privateKey: string | Buffer,\n  transactionVersion = TransactionVersion.Mainnet\n): string {\n  const pubKey = pubKeyfromPrivKey(privateKey);\n  return getAddressFromPublicKey(pubKey.data, transactionVersion);\n}\n\n/** Creates a P2PKH address string from the given public key and tx version. */\nexport function getAddressFromPublicKey(\n  /** Public key buffer or hex string */\n  publicKey: string | Buffer,\n  transactionVersion = TransactionVersion.Mainnet\n): string {\n  publicKey = typeof publicKey === 'string' ? publicKey : publicKey.toString('hex');\n  const addrVer = addressHashModeToVersion(AddressHashMode.SerializeP2PKH, transactionVersion);\n  const addr = addressFromVersionHash(addrVer, hashP2PKH(Buffer.from(publicKey, 'hex')));\n  const addrString = addressToString(addr);\n  return addrString;\n}\n\nexport function createStacksPublicKey(key: string): StacksPublicKey {\n  return {\n    type: StacksMessageType.PublicKey,\n    data: Buffer.from(key, 'hex'),\n  };\n}\n\nexport function publicKeyFromSignature(\n  message: string,\n  messageSignature: MessageSignature,\n  pubKeyEncoding = PubKeyEncoding.Compressed\n) {\n  const ec = new EC('secp256k1');\n  const messageBN = ec.keyFromPrivate(message, 'hex').getPrivate().toString(10);\n\n  const parsedSignature = parseRecoverableSignature(messageSignature.data);\n\n  const publicKey = ec.recoverPubKey(\n    messageBN,\n    parsedSignature,\n    parsedSignature.recoveryParam,\n    'hex'\n  );\n\n  if (pubKeyEncoding == PubKeyEncoding.Uncompressed) {\n    return publicKey.encode('hex');\n  }\n\n  return publicKey.encodeCompressed('hex');\n}\n\nexport function publicKeyFromBuffer(data: Buffer): StacksPublicKey {\n  return { type: StacksMessageType.PublicKey, data };\n}\n\nexport function isCompressed(key: StacksPublicKey): boolean {\n  return !key.data.toString('hex').startsWith('04');\n}\n\nexport function publicKeyToString(key: StacksPublicKey): string {\n  return key.data.toString('hex');\n}\n\nexport function serializePublicKey(key: StacksPublicKey): Buffer {\n  const bufferArray: BufferArray = new BufferArray();\n  bufferArray.push(key.data);\n  return bufferArray.concatBuffer();\n}\n\nexport function pubKeyfromPrivKey(privateKey: string | Buffer): StacksPublicKey {\n  const privKey = createStacksPrivateKey(privateKey);\n  const ec = new EC('secp256k1');\n  const keyPair = ec.keyFromPrivate(privKey.data.toString('hex').slice(0, 64), 'hex');\n  const pubKey = keyPair.getPublic(privKey.compressed, 'hex');\n  return createStacksPublicKey(pubKey);\n}\n\nexport function compressPublicKey(publicKey: string | Buffer): StacksPublicKey {\n  const ec = new EC('secp256k1');\n  const key = ec.keyFromPublic(publicKey);\n  const pubKey = key.getPublic(true, 'hex');\n  return createStacksPublicKey(pubKey);\n}\n\nexport function deserializePublicKey(bufferReader: BufferReader): StacksPublicKey {\n  const fieldId = bufferReader.readUInt8();\n  const keyLength =\n    fieldId !== 4 ? COMPRESSED_PUBKEY_LENGTH_BYTES : UNCOMPRESSED_PUBKEY_LENGTH_BYTES;\n  return publicKeyFromBuffer(\n    Buffer.concat([Buffer.from([fieldId]), bufferReader.readBuffer(keyLength)])\n  );\n}\n\nexport interface StacksPrivateKey {\n  data: Buffer;\n  compressed: boolean;\n}\n\nexport function createStacksPrivateKey(key: string | Buffer): StacksPrivateKey {\n  const data = typeof key === 'string' ? Buffer.from(key, 'hex') : key;\n  let compressed: boolean;\n  if (data.length === 33) {\n    if (data[data.length - 1] !== 1) {\n      throw new Error(\n        'Improperly formatted private-key. 33 byte length usually ' +\n          'indicates compressed key, but last byte must be == 0x01'\n      );\n    }\n    compressed = true;\n  } else if (data.length === 32) {\n    compressed = false;\n  } else {\n    throw new Error(\n      `Improperly formatted private-key hex string: length should be 32 or 33 bytes, provided with length ${data.length}`\n    );\n  }\n  return { data, compressed };\n}\n\nexport function makeRandomPrivKey(entropy?: Buffer): StacksPrivateKey {\n  const ec = new EC('secp256k1');\n  const options = { entropy: entropy || randomBytes(32) };\n  const keyPair = ec.genKeyPair(options);\n  const privateKey = keyPair.getPrivate().toString('hex', 32);\n  return createStacksPrivateKey(privateKey);\n}\n\nexport function signWithKey(privateKey: StacksPrivateKey, input: string): MessageSignature {\n  const ec = new EC('secp256k1');\n  const key = ec.keyFromPrivate(privateKey.data.toString('hex').slice(0, 64), 'hex');\n  const signature = key.sign(input, 'hex', { canonical: true });\n  const coordinateValueBytes = 32;\n  const r = leftPadHexToLength(signature.r.toString('hex'), coordinateValueBytes * 2);\n  const s = leftPadHexToLength(signature.s.toString('hex'), coordinateValueBytes * 2);\n  if (signature.recoveryParam === undefined || signature.recoveryParam === null) {\n    throw new Error('\"signature.recoveryParam\" is not set');\n  }\n  const recoveryParam = intToHexString(signature.recoveryParam, 1);\n  const recoverableSignatureString = recoveryParam + r + s;\n  return createMessageSignature(recoverableSignatureString);\n}\n\nexport function getSignatureRecoveryParam(signature: string) {\n  const coordinateValueBytes = 32;\n  if (signature.length < coordinateValueBytes * 2 * 2 + 1) {\n    throw new Error('Invalid signature');\n  }\n  const recoveryParamHex = signature.substr(0, 2);\n  return hexStringToInt(recoveryParamHex);\n}\n\nexport function parseRecoverableSignature(signature: string) {\n  const coordinateValueBytes = 32;\n  if (signature.length < coordinateValueBytes * 2 * 2 + 1) {\n    throw new Error('Invalid signature');\n  }\n  const recoveryParamHex = signature.substr(0, 2);\n  const r = signature.substr(2, coordinateValueBytes * 2);\n  const s = signature.substr(2 + coordinateValueBytes * 2, coordinateValueBytes * 2);\n  return {\n    recoveryParam: hexStringToInt(recoveryParamHex),\n    r,\n    s,\n  };\n}\n\nexport function getPublicKey(privateKey: StacksPrivateKey): StacksPublicKey {\n  return pubKeyfromPrivKey(privateKey.data);\n}\n\nexport function privateKeyToString(privateKey: StacksPrivateKey): string {\n  return privateKey.data.toString('hex');\n}\n\nexport function publicKeyToAddress(version: AddressVersion, publicKey: StacksPublicKey): string {\n  return c32address(version, hash160(publicKey.data).toString('hex'));\n}\n","export class StacksTransactionError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.message = message;\n    this.name = this.constructor.name;\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\n\nexport class SerializationError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.message = message;\n    this.name = this.constructor.name;\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\n\nexport class DeserializationError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.message = message;\n    this.name = this.constructor.name;\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\n\nexport class NotImplementedError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.message = message;\n    this.name = this.constructor.name;\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\n\nexport class SigningError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.message = message;\n    this.name = this.constructor.name;\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\nexport class VerificationError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.message = message;\n    this.name = this.constructor.name;\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\n","import {\n  PostConditionType,\n  FungibleConditionCode,\n  NonFungibleConditionCode,\n  StacksMessageType,\n} from './constants';\n\nimport { BufferArray } from './utils';\n\nimport {\n  AssetInfo,\n  serializeAssetInfo,\n  deserializeAssetInfo,\n  PostConditionPrincipal,\n  serializePrincipal,\n  deserializePrincipal,\n  parseAssetInfoString,\n  parsePrincipalString,\n} from './types';\n\nimport BigNum from 'bn.js';\nimport { BufferReader } from './bufferReader';\nimport { ClarityValue, serializeCV, deserializeCV } from './clarity';\nimport { DeserializationError } from './errors';\n\nexport type PostCondition = STXPostCondition | FungiblePostCondition | NonFungiblePostCondition;\n\nexport interface STXPostCondition {\n  readonly type: StacksMessageType.PostCondition;\n  readonly conditionType: PostConditionType.STX;\n  readonly principal: PostConditionPrincipal;\n  readonly conditionCode: FungibleConditionCode;\n  readonly amount: BigNum;\n}\n\nexport function createSTXPostCondition(\n  principal: string | PostConditionPrincipal,\n  conditionCode: FungibleConditionCode,\n  amount: BigNum\n): STXPostCondition {\n  if (typeof principal === 'string') {\n    principal = parsePrincipalString(principal);\n  }\n\n  return {\n    type: StacksMessageType.PostCondition,\n    conditionType: PostConditionType.STX,\n    principal,\n    conditionCode,\n    amount,\n  };\n}\n\nexport interface FungiblePostCondition {\n  readonly type: StacksMessageType.PostCondition;\n  readonly conditionType: PostConditionType.Fungible;\n  readonly principal: PostConditionPrincipal;\n  readonly conditionCode: FungibleConditionCode;\n  readonly amount: BigNum;\n  readonly assetInfo: AssetInfo;\n}\n\nexport function createFungiblePostCondition(\n  principal: string | PostConditionPrincipal,\n  conditionCode: FungibleConditionCode,\n  amount: BigNum,\n  assetInfo: string | AssetInfo\n): FungiblePostCondition {\n  if (typeof principal === 'string') {\n    principal = parsePrincipalString(principal);\n  }\n  if (typeof assetInfo === 'string') {\n    assetInfo = parseAssetInfoString(assetInfo);\n  }\n\n  return {\n    type: StacksMessageType.PostCondition,\n    conditionType: PostConditionType.Fungible,\n    principal,\n    conditionCode,\n    amount,\n    assetInfo,\n  };\n}\n\nexport interface NonFungiblePostCondition {\n  readonly type: StacksMessageType.PostCondition;\n  readonly conditionType: PostConditionType.NonFungible;\n  readonly principal: PostConditionPrincipal;\n  readonly conditionCode: NonFungibleConditionCode;\n  /** Structure that identifies the token type. */\n  readonly assetInfo: AssetInfo;\n  /** The Clarity value that names the token instance. */\n  readonly assetName: ClarityValue;\n}\n\nexport function createNonFungiblePostCondition(\n  principal: string | PostConditionPrincipal,\n  conditionCode: NonFungibleConditionCode,\n  assetInfo: string | AssetInfo,\n  assetName: ClarityValue\n): NonFungiblePostCondition {\n  if (typeof principal === 'string') {\n    principal = parsePrincipalString(principal);\n  }\n  if (typeof assetInfo === 'string') {\n    assetInfo = parseAssetInfoString(assetInfo);\n  }\n\n  return {\n    type: StacksMessageType.PostCondition,\n    conditionType: PostConditionType.NonFungible,\n    principal,\n    conditionCode,\n    assetInfo,\n    assetName,\n  };\n}\n\nexport function serializePostCondition(postCondition: PostCondition): Buffer {\n  const bufferArray: BufferArray = new BufferArray();\n  bufferArray.appendByte(postCondition.conditionType);\n  bufferArray.push(serializePrincipal(postCondition.principal));\n\n  if (\n    postCondition.conditionType === PostConditionType.Fungible ||\n    postCondition.conditionType === PostConditionType.NonFungible\n  ) {\n    bufferArray.push(serializeAssetInfo(postCondition.assetInfo));\n  }\n\n  if (postCondition.conditionType === PostConditionType.NonFungible) {\n    bufferArray.push(serializeCV(postCondition.assetName));\n  }\n\n  bufferArray.appendByte(postCondition.conditionCode);\n\n  if (\n    postCondition.conditionType === PostConditionType.STX ||\n    postCondition.conditionType === PostConditionType.Fungible\n  ) {\n    bufferArray.push(postCondition.amount.toArrayLike(Buffer, 'be', 8));\n  }\n\n  return bufferArray.concatBuffer();\n}\n\nexport function deserializePostCondition(bufferReader: BufferReader): PostCondition {\n  const postConditionType = bufferReader.readUInt8Enum(PostConditionType, n => {\n    throw new DeserializationError(`Could not read ${n} as PostConditionType`);\n  });\n\n  const principal = deserializePrincipal(bufferReader);\n\n  let conditionCode;\n  let assetInfo;\n  let amount;\n  switch (postConditionType) {\n    case PostConditionType.STX:\n      conditionCode = bufferReader.readUInt8Enum(FungibleConditionCode, n => {\n        throw new DeserializationError(`Could not read ${n} as FungibleConditionCode`);\n      });\n      amount = new BigNum(bufferReader.readBuffer(8).toString('hex'), 16);\n      return {\n        type: StacksMessageType.PostCondition,\n        conditionType: PostConditionType.STX,\n        principal,\n        conditionCode,\n        amount,\n      };\n    case PostConditionType.Fungible:\n      assetInfo = deserializeAssetInfo(bufferReader);\n      conditionCode = bufferReader.readUInt8Enum(FungibleConditionCode, n => {\n        throw new DeserializationError(`Could not read ${n} as FungibleConditionCode`);\n      });\n      amount = new BigNum(bufferReader.readBuffer(8).toString('hex'), 16);\n      return {\n        type: StacksMessageType.PostCondition,\n        conditionType: PostConditionType.Fungible,\n        principal,\n        conditionCode,\n        amount,\n        assetInfo,\n      };\n    case PostConditionType.NonFungible:\n      assetInfo = deserializeAssetInfo(bufferReader);\n      const assetName = deserializeCV(bufferReader);\n      conditionCode = bufferReader.readUInt8Enum(NonFungibleConditionCode, n => {\n        throw new DeserializationError(`Could not read ${n} as FungibleConditionCode`);\n      });\n      return {\n        type: StacksMessageType.PostCondition,\n        conditionType: PostConditionType.NonFungible,\n        principal,\n        conditionCode,\n        assetInfo,\n        assetName,\n      };\n  }\n}\n","import { COINBASE_BUFFER_LENGTH_BYTES, PayloadType, StacksMessageType } from './constants';\n\nimport { BufferArray } from './utils';\n\nimport {\n  Address,\n  MemoString,\n  createAddress,\n  createMemoString,\n  LengthPrefixedString,\n  createLPString,\n  serializeStacksMessage,\n  deserializeAddress,\n  deserializeLPString,\n  deserializeMemoString,\n  codeBodyString,\n} from './types';\n\nimport { ClarityValue, serializeCV, deserializeCV } from './clarity/';\n\nimport BigNum from 'bn.js';\nimport { BufferReader } from './bufferReader';\nimport { PrincipalCV, principalCV } from './clarity/types/principalCV';\n\nexport type Payload =\n  | TokenTransferPayload\n  | ContractCallPayload\n  | SmartContractPayload\n  | PoisonPayload\n  | CoinbasePayload;\n\nexport interface TokenTransferPayload {\n  readonly type: StacksMessageType.Payload;\n  readonly payloadType: PayloadType.TokenTransfer;\n  readonly recipient: PrincipalCV;\n  readonly amount: BigNum;\n  readonly memo: MemoString;\n}\n\nexport function createTokenTransferPayload(\n  recipient: string | PrincipalCV,\n  amount: BigNum,\n  memo?: string | MemoString\n): TokenTransferPayload {\n  if (typeof recipient === 'string') {\n    recipient = principalCV(recipient);\n  }\n  if (typeof memo === 'string') {\n    memo = createMemoString(memo);\n  }\n\n  return {\n    type: StacksMessageType.Payload,\n    payloadType: PayloadType.TokenTransfer,\n    recipient,\n    amount,\n    memo: memo ?? createMemoString(''),\n  };\n}\n\nexport interface ContractCallPayload {\n  readonly type: StacksMessageType.Payload;\n  readonly payloadType: PayloadType.ContractCall;\n  readonly contractAddress: Address;\n  readonly contractName: LengthPrefixedString;\n  readonly functionName: LengthPrefixedString;\n  readonly functionArgs: ClarityValue[];\n}\n\nexport function createContractCallPayload(\n  contractAddress: string | Address,\n  contractName: string | LengthPrefixedString,\n  functionName: string | LengthPrefixedString,\n  functionArgs: ClarityValue[]\n): ContractCallPayload {\n  if (typeof contractAddress === 'string') {\n    contractAddress = createAddress(contractAddress);\n  }\n  if (typeof contractName === 'string') {\n    contractName = createLPString(contractName);\n  }\n  if (typeof functionName === 'string') {\n    functionName = createLPString(functionName);\n  }\n\n  return {\n    type: StacksMessageType.Payload,\n    payloadType: PayloadType.ContractCall,\n    contractAddress,\n    contractName,\n    functionName,\n    functionArgs,\n  };\n}\n\nexport interface SmartContractPayload {\n  readonly type: StacksMessageType.Payload;\n  readonly payloadType: PayloadType.SmartContract;\n  readonly contractName: LengthPrefixedString;\n  readonly codeBody: LengthPrefixedString;\n}\n\nexport function createSmartContractPayload(\n  contractName: string | LengthPrefixedString,\n  codeBody: string | LengthPrefixedString\n): SmartContractPayload {\n  if (typeof contractName === 'string') {\n    contractName = createLPString(contractName);\n  }\n  if (typeof codeBody === 'string') {\n    codeBody = codeBodyString(codeBody);\n  }\n\n  return {\n    type: StacksMessageType.Payload,\n    payloadType: PayloadType.SmartContract,\n    contractName,\n    codeBody,\n  };\n}\n\nexport interface PoisonPayload {\n  readonly type: StacksMessageType.Payload;\n  readonly payloadType: PayloadType.PoisonMicroblock;\n}\n\nexport function createPoisonPayload(): PoisonPayload {\n  return { type: StacksMessageType.Payload, payloadType: PayloadType.PoisonMicroblock };\n}\n\nexport interface CoinbasePayload {\n  readonly type: StacksMessageType.Payload;\n  readonly payloadType: PayloadType.Coinbase;\n  readonly coinbaseBuffer: Buffer;\n}\n\nexport function createCoinbasePayload(coinbaseBuffer: Buffer): CoinbasePayload {\n  if (coinbaseBuffer.byteLength != COINBASE_BUFFER_LENGTH_BYTES) {\n    throw Error(`Coinbase buffer size must be ${COINBASE_BUFFER_LENGTH_BYTES} bytes`);\n  }\n  return { type: StacksMessageType.Payload, payloadType: PayloadType.Coinbase, coinbaseBuffer };\n}\n\nexport function serializePayload(payload: Payload): Buffer {\n  const bufferArray: BufferArray = new BufferArray();\n  bufferArray.appendByte(payload.payloadType);\n\n  switch (payload.payloadType) {\n    case PayloadType.TokenTransfer:\n      bufferArray.push(serializeCV(payload.recipient));\n      bufferArray.push(payload.amount.toArrayLike(Buffer, 'be', 8));\n      bufferArray.push(serializeStacksMessage(payload.memo));\n      break;\n    case PayloadType.ContractCall:\n      bufferArray.push(serializeStacksMessage(payload.contractAddress));\n      bufferArray.push(serializeStacksMessage(payload.contractName));\n      bufferArray.push(serializeStacksMessage(payload.functionName));\n      const numArgs = Buffer.alloc(4);\n      numArgs.writeUInt32BE(payload.functionArgs.length, 0);\n      bufferArray.push(numArgs);\n      payload.functionArgs.forEach(arg => {\n        bufferArray.push(serializeCV(arg));\n      });\n      break;\n    case PayloadType.SmartContract:\n      bufferArray.push(serializeStacksMessage(payload.contractName));\n      bufferArray.push(serializeStacksMessage(payload.codeBody));\n      break;\n    case PayloadType.PoisonMicroblock:\n      // TODO: implement\n      break;\n    case PayloadType.Coinbase:\n      bufferArray.push(payload.coinbaseBuffer);\n      break;\n  }\n\n  return bufferArray.concatBuffer();\n}\n\nexport function deserializePayload(bufferReader: BufferReader): Payload {\n  const payloadType = bufferReader.readUInt8Enum(PayloadType, n => {\n    throw new Error(`Cannot recognize PayloadType: ${n}`);\n  });\n\n  switch (payloadType) {\n    case PayloadType.TokenTransfer:\n      const recipient = deserializeCV(bufferReader) as PrincipalCV;\n      const amount = new BigNum(bufferReader.readBuffer(8));\n      const memo = deserializeMemoString(bufferReader);\n      return createTokenTransferPayload(recipient, amount, memo);\n    case PayloadType.ContractCall:\n      const contractAddress = deserializeAddress(bufferReader);\n      const contractCallName = deserializeLPString(bufferReader);\n      const functionName = deserializeLPString(bufferReader);\n      const functionArgs = [];\n      const numberOfArgs = bufferReader.readUInt32BE();\n      for (let i = 0; i < numberOfArgs; i++) {\n        const clarityValue = deserializeCV(bufferReader);\n        functionArgs.push(clarityValue);\n      }\n      return createContractCallPayload(\n        contractAddress,\n        contractCallName,\n        functionName,\n        functionArgs\n      );\n    case PayloadType.SmartContract:\n      const smartContractName = deserializeLPString(bufferReader);\n      const codeBody = deserializeLPString(bufferReader, 4, 100000);\n      return createSmartContractPayload(smartContractName, codeBody);\n    case PayloadType.PoisonMicroblock:\n      // TODO: implement\n      return createPoisonPayload();\n    case PayloadType.Coinbase:\n      const coinbaseBuffer = bufferReader.readBuffer(COINBASE_BUFFER_LENGTH_BYTES);\n      return createCoinbasePayload(coinbaseBuffer);\n  }\n}\n","import {\n  MAX_STRING_LENGTH_BYTES,\n  MEMO_MAX_LENGTH_BYTES,\n  AddressHashMode,\n  AddressVersion,\n  TransactionVersion,\n  StacksMessageType,\n  PostConditionPrincipalID,\n} from './constants';\n\nimport { StacksPublicKey, serializePublicKey, deserializePublicKey, isCompressed } from './keys';\n\nimport {\n  BufferArray,\n  intToHexString,\n  hexStringToInt,\n  exceedsMaxLengthBytes,\n  hashP2PKH,\n  rightPadHexToLength,\n  hashP2SH,\n} from './utils';\n\nimport { c32addressDecode, c32address } from 'c32check';\nimport { BufferReader } from './bufferReader';\nimport { PostCondition, serializePostCondition, deserializePostCondition } from './postcondition';\nimport { Payload, deserializePayload, serializePayload } from './payload';\nimport { DeserializationError } from './errors';\nimport {\n  deserializeTransactionAuthField,\n  deserializeMessageSignature,\n  MessageSignature,\n  serializeMessageSignature,\n  serializeTransactionAuthField,\n  TransactionAuthField,\n} from './authorization';\n\nexport type StacksMessage =\n  | Address\n  | PostConditionPrincipal\n  | LengthPrefixedString\n  | LengthPrefixedList\n  | Payload\n  | MemoString\n  | AssetInfo\n  | PostCondition\n  | StacksPublicKey\n  | TransactionAuthField\n  | MessageSignature;\n\nexport function serializeStacksMessage(message: StacksMessage): Buffer {\n  switch (message.type) {\n    case StacksMessageType.Address:\n      return serializeAddress(message);\n    case StacksMessageType.Principal:\n      return serializePrincipal(message);\n    case StacksMessageType.LengthPrefixedString:\n      return serializeLPString(message);\n    case StacksMessageType.MemoString:\n      return serializeMemoString(message);\n    case StacksMessageType.AssetInfo:\n      return serializeAssetInfo(message);\n    case StacksMessageType.PostCondition:\n      return serializePostCondition(message);\n    case StacksMessageType.PublicKey:\n      return serializePublicKey(message);\n    case StacksMessageType.LengthPrefixedList:\n      return serializeLPList(message);\n    case StacksMessageType.Payload:\n      return serializePayload(message);\n    case StacksMessageType.TransactionAuthField:\n      return serializeTransactionAuthField(message);\n    case StacksMessageType.MessageSignature:\n      return serializeMessageSignature(message);\n  }\n}\n\nexport function deserializeStacksMessage(\n  bufferReader: BufferReader,\n  type: StacksMessageType,\n  listType?: StacksMessageType\n): StacksMessage {\n  switch (type) {\n    case StacksMessageType.Address:\n      return deserializeAddress(bufferReader);\n    case StacksMessageType.Principal:\n      return deserializePrincipal(bufferReader);\n    case StacksMessageType.LengthPrefixedString:\n      return deserializeLPString(bufferReader);\n    case StacksMessageType.MemoString:\n      return deserializeMemoString(bufferReader);\n    case StacksMessageType.AssetInfo:\n      return deserializeAssetInfo(bufferReader);\n    case StacksMessageType.PostCondition:\n      return deserializePostCondition(bufferReader);\n    case StacksMessageType.PublicKey:\n      return deserializePublicKey(bufferReader);\n    case StacksMessageType.Payload:\n      return deserializePayload(bufferReader);\n    case StacksMessageType.LengthPrefixedList:\n      if (!listType) {\n        throw new DeserializationError('No List Type specified');\n      }\n      return deserializeLPList(bufferReader, listType);\n    case StacksMessageType.MessageSignature:\n      return deserializeMessageSignature(bufferReader);\n    default:\n      throw new Error('Could not recognize StacksMessageType');\n  }\n}\n\nexport interface Address {\n  readonly type: StacksMessageType.Address;\n  readonly version: AddressVersion;\n  readonly hash160: string;\n}\n\nexport function createAddress(c32AddressString: string): Address {\n  const addressData = c32addressDecode(c32AddressString);\n  return {\n    type: StacksMessageType.Address,\n    version: addressData[0],\n    hash160: addressData[1],\n  };\n}\n\nexport function createEmptyAddress(): Address {\n  return {\n    type: StacksMessageType.Address,\n    version: AddressVersion.MainnetSingleSig,\n    hash160: '0'.repeat(40),\n  };\n}\n\nexport function addressFromVersionHash(version: AddressVersion, hash: string): Address {\n  return { type: StacksMessageType.Address, version, hash160: hash };\n}\n\n/**\n * Translates the tx auth hash mode to the corresponding address version.\n * @see https://github.com/blockstack/stacks-blockchain/blob/master/sip/sip-005-blocks-and-transactions.md#transaction-authorization\n */\nexport function addressHashModeToVersion(\n  hashMode: AddressHashMode,\n  txVersion: TransactionVersion\n): AddressVersion {\n  switch (hashMode) {\n    case AddressHashMode.SerializeP2PKH:\n      switch (txVersion) {\n        case TransactionVersion.Mainnet:\n          return AddressVersion.MainnetSingleSig;\n        case TransactionVersion.Testnet:\n          return AddressVersion.TestnetSingleSig;\n        default:\n          throw new Error(\n            `Unexpected txVersion ${JSON.stringify(txVersion)} for hashMode ${hashMode}`\n          );\n      }\n    case AddressHashMode.SerializeP2SH:\n    case AddressHashMode.SerializeP2WPKH:\n    case AddressHashMode.SerializeP2WSH:\n      switch (txVersion) {\n        case TransactionVersion.Mainnet:\n          return AddressVersion.MainnetMultiSig;\n        case TransactionVersion.Testnet:\n          return AddressVersion.TestnetMultiSig;\n        default:\n          throw new Error(\n            `Unexpected txVersion ${JSON.stringify(txVersion)} for hashMode ${hashMode}`\n          );\n      }\n    default:\n      throw new Error(`Unexpected hashMode ${JSON.stringify(hashMode)}`);\n  }\n}\n\nexport function addressFromHashMode(\n  hashMode: AddressHashMode,\n  txVersion: TransactionVersion,\n  data: string\n): Address {\n  const version = addressHashModeToVersion(hashMode, txVersion);\n  return addressFromVersionHash(version, data);\n}\n\nexport function addressFromPublicKeys(\n  version: AddressVersion,\n  hashMode: AddressHashMode,\n  numSigs: number,\n  publicKeys: StacksPublicKey[]\n): Address {\n  if (publicKeys.length === 0) {\n    throw Error('Invalid number of public keys');\n  }\n\n  if (hashMode === AddressHashMode.SerializeP2PKH || hashMode === AddressHashMode.SerializeP2WPKH) {\n    if (publicKeys.length !== 1 || numSigs !== 1) {\n      throw Error('Invalid number of public keys or signatures');\n    }\n  }\n\n  if (hashMode === AddressHashMode.SerializeP2WPKH || hashMode === AddressHashMode.SerializeP2WSH) {\n    for (let i = 0; i < publicKeys.length; i++) {\n      if (!isCompressed(publicKeys[i])) {\n        throw Error('Public keys must be compressed for segwit');\n      }\n    }\n  }\n\n  switch (hashMode) {\n    case AddressHashMode.SerializeP2PKH:\n      return addressFromVersionHash(version, hashP2PKH(publicKeys[0].data));\n    case AddressHashMode.SerializeP2SH:\n      return addressFromVersionHash(version, hashP2SH(numSigs, publicKeys.map(serializePublicKey)));\n    default:\n      throw Error(\n        `Not yet implemented: address construction using public keys for hash mode: ${hashMode}`\n      );\n  }\n}\n\nexport function addressToString(address: Address): string {\n  return c32address(address.version, address.hash160).toString();\n}\n\nexport function serializeAddress(address: Address): Buffer {\n  const bufferArray: BufferArray = new BufferArray();\n  bufferArray.appendHexString(intToHexString(address.version, 1));\n  bufferArray.appendHexString(address.hash160);\n\n  return bufferArray.concatBuffer();\n}\n\nexport function deserializeAddress(bufferReader: BufferReader): Address {\n  const version = hexStringToInt(bufferReader.readBuffer(1).toString('hex'));\n  const data = bufferReader.readBuffer(20).toString('hex');\n\n  return { type: StacksMessageType.Address, version, hash160: data };\n}\n\nexport type PostConditionPrincipal = StandardPrincipal | ContractPrincipal;\n\nexport interface StandardPrincipal {\n  readonly type: StacksMessageType.Principal;\n  readonly prefix: PostConditionPrincipalID.Standard;\n  readonly address: Address;\n}\n\nexport interface ContractPrincipal {\n  readonly type: StacksMessageType.Principal;\n  readonly prefix: PostConditionPrincipalID.Contract;\n  readonly address: Address;\n  readonly contractName: LengthPrefixedString;\n}\n\n/**\n * Parses a principal string for either a standard principal or contract principal.\n * @param principalString - String in the format `{address}.{contractName}`\n * @example \"SP13N5TE1FBBGRZD1FCM49QDGN32WAXM2E5F8WT2G.example-contract\"\n * @example \"SP13N5TE1FBBGRZD1FCM49QDGN32WAXM2E5F8WT2G\"\n */\nexport function parsePrincipalString(\n  principalString: string\n): StandardPrincipal | ContractPrincipal {\n  if (principalString.includes('.')) {\n    const [address, contractName] = principalString.split('.');\n    return createContractPrincipal(address, contractName);\n  } else {\n    return createStandardPrincipal(principalString);\n  }\n}\n\nexport function createStandardPrincipal(addressString: string): StandardPrincipal {\n  const addr = createAddress(addressString);\n  return {\n    type: StacksMessageType.Principal,\n    prefix: PostConditionPrincipalID.Standard,\n    address: addr,\n  };\n}\n\nexport function createContractPrincipal(\n  addressString: string,\n  contractName: string\n): ContractPrincipal {\n  const addr = createAddress(addressString);\n  const name = createLPString(contractName);\n  return {\n    type: StacksMessageType.Principal,\n    prefix: PostConditionPrincipalID.Contract,\n    address: addr,\n    contractName: name,\n  };\n}\n\nexport function serializePrincipal(principal: PostConditionPrincipal): Buffer {\n  const bufferArray: BufferArray = new BufferArray();\n  bufferArray.push(Buffer.from([principal.prefix]));\n  bufferArray.push(serializeAddress(principal.address));\n  if (principal.prefix === PostConditionPrincipalID.Contract) {\n    bufferArray.push(serializeLPString(principal.contractName));\n  }\n  return bufferArray.concatBuffer();\n}\n\nexport function deserializePrincipal(bufferReader: BufferReader): PostConditionPrincipal {\n  const prefix = bufferReader.readUInt8Enum(PostConditionPrincipalID, _ => {\n    throw new DeserializationError('Unexpected Principal payload type: ${n}');\n  });\n  const address = deserializeAddress(bufferReader);\n  if (prefix === PostConditionPrincipalID.Standard) {\n    return { type: StacksMessageType.Principal, prefix, address } as StandardPrincipal;\n  }\n  const contractName = deserializeLPString(bufferReader);\n  return {\n    type: StacksMessageType.Principal,\n    prefix,\n    address,\n    contractName,\n  } as ContractPrincipal;\n}\n\nexport interface LengthPrefixedString {\n  readonly type: StacksMessageType.LengthPrefixedString;\n  readonly content: string;\n  readonly lengthPrefixBytes: number;\n  readonly maxLengthBytes: number;\n}\n\nexport function createLPString(content: string): LengthPrefixedString;\nexport function createLPString(content: string, lengthPrefixBytes: number): LengthPrefixedString;\nexport function createLPString(\n  content: string,\n  lengthPrefixBytes: number,\n  maxLengthBytes: number\n): LengthPrefixedString;\nexport function createLPString(\n  content: string,\n  lengthPrefixBytes?: number,\n  maxLengthBytes?: number\n): LengthPrefixedString {\n  const prefixLength = lengthPrefixBytes || 1;\n  const maxLength = maxLengthBytes || MAX_STRING_LENGTH_BYTES;\n  if (exceedsMaxLengthBytes(content, maxLength)) {\n    throw new Error(`String length exceeds maximum bytes ${maxLength.toString()}`);\n  }\n  return {\n    type: StacksMessageType.LengthPrefixedString,\n    content,\n    lengthPrefixBytes: prefixLength,\n    maxLengthBytes: maxLength,\n  };\n}\n\nexport function serializeLPString(lps: LengthPrefixedString) {\n  const bufferArray: BufferArray = new BufferArray();\n  const contentBuffer = Buffer.from(lps.content);\n  const length = contentBuffer.byteLength;\n  bufferArray.appendHexString(intToHexString(length, lps.lengthPrefixBytes));\n  bufferArray.push(contentBuffer);\n  return bufferArray.concatBuffer();\n}\n\nexport function deserializeLPString(\n  bufferReader: BufferReader,\n  prefixBytes?: number,\n  maxLength?: number\n): LengthPrefixedString {\n  prefixBytes = prefixBytes ? prefixBytes : 1;\n  const length = hexStringToInt(bufferReader.readBuffer(prefixBytes).toString('hex'));\n  const content = bufferReader.readBuffer(length).toString();\n  return createLPString(content, prefixBytes, maxLength ?? 128);\n}\n\nexport function codeBodyString(content: string): LengthPrefixedString {\n  return createLPString(content, 4, 100000);\n}\n\nexport interface MemoString {\n  readonly type: StacksMessageType.MemoString;\n  readonly content: string;\n}\n\nexport function createMemoString(content: string): MemoString {\n  if (content && exceedsMaxLengthBytes(content, MEMO_MAX_LENGTH_BYTES)) {\n    throw new Error(`Memo exceeds maximum length of ${MEMO_MAX_LENGTH_BYTES.toString()} bytes`);\n  }\n  return { type: StacksMessageType.MemoString, content };\n}\n\nexport function serializeMemoString(memoString: MemoString): Buffer {\n  const bufferArray: BufferArray = new BufferArray();\n  const contentBuffer = Buffer.from(memoString.content);\n  const paddedContent = rightPadHexToLength(\n    contentBuffer.toString('hex'),\n    MEMO_MAX_LENGTH_BYTES * 2\n  );\n  bufferArray.push(Buffer.from(paddedContent, 'hex'));\n  return bufferArray.concatBuffer();\n}\n\nexport function deserializeMemoString(bufferReader: BufferReader): MemoString {\n  const content = bufferReader.readBuffer(MEMO_MAX_LENGTH_BYTES).toString();\n  return { type: StacksMessageType.MemoString, content };\n}\n\nexport interface AssetInfo {\n  readonly type: StacksMessageType.AssetInfo;\n  readonly address: Address;\n  readonly contractName: LengthPrefixedString;\n  readonly assetName: LengthPrefixedString;\n}\n\n/**\n * Parse a fully qualified string that identifies the token type.\n * @param id - String in the format `{address}.{contractName}::{assetName}`\n * @example \"SP13N5TE1FBBGRZD1FCM49QDGN32WAXM2E5F8WT2G.example-contract::example-token\"\n */\nexport function parseAssetInfoString(id: string): AssetInfo {\n  const [assetAddress, assetContractName, assetTokenName] = id.split(/\\.|::/);\n  const assetInfo = createAssetInfo(assetAddress, assetContractName, assetTokenName);\n  return assetInfo;\n}\n\nexport function createAssetInfo(\n  addressString: string,\n  contractName: string,\n  assetName: string\n): AssetInfo {\n  return {\n    type: StacksMessageType.AssetInfo,\n    address: createAddress(addressString),\n    contractName: createLPString(contractName),\n    assetName: createLPString(assetName),\n  };\n}\n\nexport function serializeAssetInfo(info: AssetInfo): Buffer {\n  const bufferArray: BufferArray = new BufferArray();\n  bufferArray.push(serializeAddress(info.address));\n  bufferArray.push(serializeLPString(info.contractName));\n  bufferArray.push(serializeLPString(info.assetName));\n  return bufferArray.concatBuffer();\n}\n\nexport function deserializeAssetInfo(bufferReader: BufferReader): AssetInfo {\n  return {\n    type: StacksMessageType.AssetInfo,\n    address: deserializeAddress(bufferReader),\n    contractName: deserializeLPString(bufferReader),\n    assetName: deserializeLPString(bufferReader),\n  };\n}\n\nexport interface LengthPrefixedList {\n  readonly type: StacksMessageType.LengthPrefixedList;\n  readonly lengthPrefixBytes: number;\n  readonly values: StacksMessage[];\n}\n\nexport function createLPList<T extends StacksMessage>(\n  values: T[],\n  lengthPrefixBytes?: number\n): LengthPrefixedList {\n  return {\n    type: StacksMessageType.LengthPrefixedList,\n    lengthPrefixBytes: lengthPrefixBytes || 4,\n    values,\n  };\n}\n\nexport function serializeLPList(lpList: LengthPrefixedList): Buffer {\n  const list = lpList.values;\n  const bufferArray: BufferArray = new BufferArray();\n  bufferArray.appendHexString(intToHexString(list.length, lpList.lengthPrefixBytes));\n  for (let index = 0; index < list.length; index++) {\n    bufferArray.push(serializeStacksMessage(list[index]));\n  }\n  return bufferArray.concatBuffer();\n}\n\nexport function deserializeLPList(\n  bufferReader: BufferReader,\n  type: StacksMessageType,\n  lengthPrefixBytes?: number\n): LengthPrefixedList {\n  const length = hexStringToInt(bufferReader.readBuffer(lengthPrefixBytes || 4).toString('hex'));\n  const l: StacksMessage[] = [];\n  for (let index = 0; index < length; index++) {\n    switch (type) {\n      case StacksMessageType.Address:\n        l.push(deserializeAddress(bufferReader));\n        break;\n      case StacksMessageType.LengthPrefixedString:\n        l.push(deserializeLPString(bufferReader));\n        break;\n      case StacksMessageType.MemoString:\n        l.push(deserializeMemoString(bufferReader));\n        break;\n      case StacksMessageType.AssetInfo:\n        l.push(deserializeAssetInfo(bufferReader));\n        break;\n      case StacksMessageType.PostCondition:\n        l.push(deserializePostCondition(bufferReader));\n        break;\n      case StacksMessageType.PublicKey:\n        l.push(deserializePublicKey(bufferReader));\n        break;\n      case StacksMessageType.TransactionAuthField:\n        l.push(deserializeTransactionAuthField(bufferReader));\n        break;\n    }\n  }\n  return createLPList(l, lengthPrefixBytes);\n}\n","import {\n  Address,\n  LengthPrefixedString,\n  createAddress,\n  createLPString,\n  addressToString,\n} from '../../types';\nimport { ClarityType } from '../clarityValue';\n\ntype PrincipalCV = StandardPrincipalCV | ContractPrincipalCV;\n\ninterface StandardPrincipalCV {\n  readonly type: ClarityType.PrincipalStandard;\n  readonly address: Address;\n}\n\ninterface ContractPrincipalCV {\n  readonly type: ClarityType.PrincipalContract;\n  readonly address: Address;\n  readonly contractName: LengthPrefixedString;\n}\n\nfunction principalToString(principal: PrincipalCV): string {\n  if (principal.type === ClarityType.PrincipalStandard) {\n    return addressToString(principal.address);\n  } else if (principal.type === ClarityType.PrincipalContract) {\n    const address = addressToString(principal.address);\n    return `${address}.${principal.contractName.content}`;\n  } else {\n    throw new Error(`Unexpected principal data: ${JSON.stringify(principal)}`);\n  }\n}\n\nfunction principalCV(principal: string): PrincipalCV {\n  if (principal.includes('.')) {\n    const [address, contractName] = principal.split('.');\n    return contractPrincipalCV(address, contractName);\n  } else {\n    return standardPrincipalCV(principal);\n  }\n}\n\nfunction standardPrincipalCV(addressString: string): StandardPrincipalCV {\n  const addr = createAddress(addressString);\n  return { type: ClarityType.PrincipalStandard, address: addr };\n}\n\nfunction standardPrincipalCVFromAddress(address: Address): StandardPrincipalCV {\n  return { type: ClarityType.PrincipalStandard, address };\n}\n\nfunction contractPrincipalCV(addressString: string, contractName: string): ContractPrincipalCV {\n  const addr = createAddress(addressString);\n  const lengthPrefixedContractName = createLPString(contractName);\n  return contractPrincipalCVFromAddress(addr, lengthPrefixedContractName);\n}\n\nfunction contractPrincipalCVFromAddress(\n  address: Address,\n  contractName: LengthPrefixedString\n): ContractPrincipalCV {\n  if (Buffer.byteLength(contractName.content) >= 128) {\n    throw new Error('Contract name must be less than 128 bytes');\n  }\n  return { type: ClarityType.PrincipalContract, address, contractName };\n}\n\nfunction contractPrincipalCVFromStandard(\n  sp: StandardPrincipalCV,\n  contractName: string\n): ContractPrincipalCV {\n  const lengthPrefixedContractName = createLPString(contractName);\n  return {\n    type: ClarityType.PrincipalContract,\n    address: sp.address,\n    contractName: lengthPrefixedContractName,\n  };\n}\n\nexport {\n  PrincipalCV,\n  StandardPrincipalCV,\n  ContractPrincipalCV,\n  principalCV,\n  principalToString,\n  standardPrincipalCV,\n  standardPrincipalCVFromAddress,\n  contractPrincipalCV,\n  contractPrincipalCVFromAddress,\n  contractPrincipalCVFromStandard,\n};\n","import {\n  BooleanCV,\n  OptionalCV,\n  BufferCV,\n  IntCV,\n  UIntCV,\n  StandardPrincipalCV,\n  ContractPrincipalCV,\n  ResponseErrorCV,\n  ResponseOkCV,\n  ListCV,\n  TupleCV,\n  StringAsciiCV,\n  StringUtf8CV,\n} from '.';\n\nimport { principalToString } from './types/principalCV';\nimport { CLARITY_INT_SIZE } from '../constants';\n\n/**\n * Type IDs corresponding to each of the Clarity value types as described here:\n * {@link https://github.com/blockstack/blockstack-core/blob/sip/sip-005/sip/sip-005-blocks-and-transactions.md#clarity-value-representation}\n */\nexport enum ClarityType {\n  Int = 0x00,\n  UInt = 0x01,\n  Buffer = 0x02,\n  BoolTrue = 0x03,\n  BoolFalse = 0x04,\n  PrincipalStandard = 0x05,\n  PrincipalContract = 0x06,\n  ResponseOk = 0x07,\n  ResponseErr = 0x08,\n  OptionalNone = 0x09,\n  OptionalSome = 0x0a,\n  List = 0x0b,\n  Tuple = 0x0c,\n  StringASCII = 0x0d,\n  StringUTF8 = 0x0e,\n}\n\nexport type ClarityValue =\n  | BooleanCV\n  | OptionalCV\n  | BufferCV\n  | IntCV\n  | UIntCV\n  | StandardPrincipalCV\n  | ContractPrincipalCV\n  | ResponseErrorCV\n  | ResponseOkCV\n  | ListCV\n  | TupleCV\n  | StringAsciiCV\n  | StringUtf8CV;\n\nexport function cvToString(val: ClarityValue, encoding: 'tryAscii' | 'hex' = 'hex'): string {\n  switch (val.type) {\n    case ClarityType.BoolTrue:\n      return 'true';\n    case ClarityType.BoolFalse:\n      return 'false';\n    case ClarityType.Int:\n      return val.value.fromTwos(CLARITY_INT_SIZE).toString();\n    case ClarityType.UInt:\n      return `u${val.value.toString()}`;\n    case ClarityType.Buffer:\n      if (encoding === 'tryAscii') {\n        const str = val.buffer.toString('ascii');\n        if (/[ -~]/.test(str)) {\n          return JSON.stringify(str);\n        }\n      }\n      return `0x${val.buffer.toString('hex')}`;\n    case ClarityType.OptionalNone:\n      return 'none';\n    case ClarityType.OptionalSome:\n      return `(some ${cvToString(val.value, encoding)})`;\n    case ClarityType.ResponseErr:\n      return `(err ${cvToString(val.value, encoding)})`;\n    case ClarityType.ResponseOk:\n      return `(ok ${cvToString(val.value, encoding)})`;\n    case ClarityType.PrincipalStandard:\n    case ClarityType.PrincipalContract:\n      return principalToString(val);\n    case ClarityType.List:\n      return `(list ${val.list.map(v => cvToString(v, encoding)).join(' ')})`;\n    case ClarityType.Tuple:\n      return `(tuple ${Object.keys(val.data)\n        .map(key => `(${key} ${cvToString(val.data[key], encoding)})`)\n        .join(' ')})`;\n    case ClarityType.StringASCII:\n      return `\"${val.data}\"`;\n    case ClarityType.StringUTF8:\n      return `u\"${val.data}\"`;\n  }\n}\n\nexport function cvToValue(val: ClarityValue): any {\n  switch (val.type) {\n    case ClarityType.BoolTrue:\n      return true;\n    case ClarityType.BoolFalse:\n      return false;\n    case ClarityType.Int:\n      return val.value.fromTwos(CLARITY_INT_SIZE).toNumber();\n    case ClarityType.UInt:\n      return val.value.toNumber();\n    case ClarityType.Buffer:\n      return `0x${val.buffer.toString('hex')}`;\n    case ClarityType.OptionalNone:\n      return null;\n    case ClarityType.OptionalSome:\n      return cvToJSON(val.value);\n    case ClarityType.ResponseErr:\n      return cvToJSON(val.value);\n    case ClarityType.ResponseOk:\n      return cvToJSON(val.value);\n    case ClarityType.PrincipalStandard:\n    case ClarityType.PrincipalContract:\n      return principalToString(val);\n    case ClarityType.List:\n      return val.list.map(v => cvToJSON(v));\n    case ClarityType.Tuple:\n      const result: { [key: string]: any } = {};\n      Object.keys(val.data).forEach(key => {\n        result[key] = cvToJSON(val.data[key]);\n      });\n      return result;\n    case ClarityType.StringASCII:\n      return val.data;\n    case ClarityType.StringUTF8:\n      return val.data;\n  }\n}\n\nexport function cvToJSON(val: ClarityValue): any {\n  switch (val.type) {\n    case ClarityType.ResponseErr:\n      return { type: getCVTypeString(val), value: cvToValue(val), success: false };\n    case ClarityType.ResponseOk:\n      return { type: getCVTypeString(val), value: cvToValue(val), success: true };\n    default:\n      return { type: getCVTypeString(val), value: cvToValue(val) };\n  }\n}\n\nexport function getCVTypeString(val: ClarityValue): string {\n  switch (val.type) {\n    case ClarityType.BoolTrue:\n    case ClarityType.BoolFalse:\n      return 'bool';\n    case ClarityType.Int:\n      return 'int';\n    case ClarityType.UInt:\n      return 'uint';\n    case ClarityType.Buffer:\n      return `(buff ${val.buffer.length})`;\n    case ClarityType.OptionalNone:\n      return '(optional none)';\n    case ClarityType.OptionalSome:\n      return `(optional ${getCVTypeString(val.value)})`;\n    case ClarityType.ResponseErr:\n      return `(response UnknownType ${getCVTypeString(val.value)})`;\n    case ClarityType.ResponseOk:\n      return `(response ${getCVTypeString(val.value)} UnknownType)`;\n    case ClarityType.PrincipalStandard:\n    case ClarityType.PrincipalContract:\n      return 'principal';\n    case ClarityType.List:\n      return `(list ${val.list.length} ${getCVTypeString(val.list[0])})`;\n    case ClarityType.Tuple:\n      return `(tuple ${Object.keys(val.data)\n        .map(key => `(${key} ${getCVTypeString(val.data[key])})`)\n        .join(' ')})`;\n    case ClarityType.StringASCII:\n      return `(string-ascii ${Buffer.from(val.data, 'ascii').length})`;\n    case ClarityType.StringUTF8:\n      return `(string-utf8 ${Buffer.from(val.data, 'utf8').length})`;\n  }\n}\n","import { ClarityType } from '../clarityValue';\n\ntype BooleanCV = TrueCV | FalseCV;\n\ninterface TrueCV {\n  type: ClarityType.BoolTrue;\n}\n\ninterface FalseCV {\n  type: ClarityType.BoolFalse;\n}\n\nconst trueCV = (): BooleanCV => ({ type: ClarityType.BoolTrue });\nconst falseCV = (): BooleanCV => ({ type: ClarityType.BoolFalse });\n\nexport { BooleanCV, TrueCV, FalseCV, trueCV, falseCV };\n","import BigNum from 'bn.js';\nimport { CLARITY_INT_SIZE } from '../../constants';\nimport { ClarityType } from '../clarityValue';\n\ninterface IntCV {\n  readonly type: ClarityType.Int;\n  readonly value: BigNum;\n}\n\nconst intCV = (value: number | string | Buffer): IntCV => {\n  const bn = new BigNum(value);\n  const twos = bn.toTwos(CLARITY_INT_SIZE);\n\n  if (twos.bitLength() > CLARITY_INT_SIZE) {\n    throw new Error('Cannot construct clarity integer from value greater than INT_SIZE bits');\n  }\n\n  return { type: ClarityType.Int, value: twos };\n};\n\ninterface UIntCV {\n  readonly type: ClarityType.UInt;\n  readonly value: BigNum;\n}\n\nconst uintCV = (value: number | string | Buffer): UIntCV => {\n  const bn = new BigNum(value);\n  const twos = bn.toTwos(CLARITY_INT_SIZE);\n\n  if (twos.isNeg()) {\n    throw new Error('Cannot construct unsigned clarity integer from negative value');\n  } else if (twos.bitLength() > CLARITY_INT_SIZE) {\n    throw new Error('Cannot construct unsigned clarity integer from value greater than 128 bits');\n  }\n\n  return { type: ClarityType.UInt, value: twos };\n};\n\nexport { IntCV, UIntCV, intCV, uintCV };\n","import { ClarityType } from '../clarityValue';\n\ninterface BufferCV {\n  readonly type: ClarityType.Buffer;\n  readonly buffer: Buffer;\n}\n\nconst bufferCV = (buffer: Buffer): BufferCV => {\n  if (buffer.length > 1000000) {\n    throw new Error('Cannot construct clarity buffer that is greater than 1MB');\n  }\n\n  return { type: ClarityType.Buffer, buffer };\n};\n\nconst bufferCVFromString = (str: string): BufferCV => bufferCV(Buffer.from(str));\n\nexport { BufferCV, bufferCV, bufferCVFromString };\n","import { ClarityType, ClarityValue } from '../clarityValue';\n\ntype OptionalCV = NoneCV | SomeCV;\n\ninterface NoneCV {\n  readonly type: ClarityType.OptionalNone;\n}\n\ninterface SomeCV {\n  readonly type: ClarityType.OptionalSome;\n  readonly value: ClarityValue;\n}\n\nconst noneCV = (): OptionalCV => ({ type: ClarityType.OptionalNone });\nconst someCV = (value: ClarityValue): OptionalCV => ({ type: ClarityType.OptionalSome, value });\nconst optionalCVOf = (value?: ClarityValue): OptionalCV => {\n  if (value) {\n    return someCV(value);\n  } else {\n    return noneCV();\n  }\n};\n\nexport { OptionalCV, NoneCV, SomeCV, noneCV, someCV, optionalCVOf };\n","import { ClarityType, ClarityValue } from '../clarityValue';\n\ntype ResponseCV = ResponseErrorCV | ResponseOkCV;\n\ninterface ResponseErrorCV {\n  readonly type: ClarityType.ResponseErr;\n  readonly value: ClarityValue;\n}\n\ninterface ResponseOkCV {\n  readonly type: ClarityType.ResponseOk;\n  readonly value: ClarityValue;\n}\n\nfunction responseErrorCV(value: ClarityValue): ResponseErrorCV {\n  return { type: ClarityType.ResponseErr, value };\n}\n\nfunction responseOkCV(value: ClarityValue): ResponseOkCV {\n  return { type: ClarityType.ResponseOk, value };\n}\n\nexport { ResponseCV, ResponseErrorCV, ResponseOkCV, responseErrorCV, responseOkCV };\n","import { ClarityValue, ClarityType } from '../clarityValue';\n\ninterface ListCV {\n  type: ClarityType.List;\n  list: ClarityValue[];\n}\n\nfunction listCV<T extends ClarityValue>(values: T[]): ListCV {\n  return { type: ClarityType.List, list: values };\n}\n\nexport { ListCV, listCV };\n","import { ClarityType, ClarityValue } from '../clarityValue';\nimport { isClarityName } from '../../utils';\n\ntype TupleData = { [key: string]: ClarityValue };\n\ninterface TupleCV {\n  type: ClarityType.Tuple;\n  data: TupleData;\n}\n\nfunction tupleCV(data: TupleData): TupleCV {\n  for (const key in data) {\n    if (!isClarityName(key)) {\n      throw new Error(`\"${key}\" is not a valid Clarity name`);\n    }\n  }\n\n  return { type: ClarityType.Tuple, data };\n}\n\nexport { TupleCV, tupleCV };\n","import { ClarityType } from '../clarityValue';\n\ninterface StringAsciiCV {\n  readonly type: ClarityType.StringASCII;\n  readonly data: string;\n}\n\ninterface StringUtf8CV {\n  readonly type: ClarityType.StringUTF8;\n  readonly data: string;\n}\n\nconst stringAsciiCV = (data: string): StringAsciiCV => {\n  return { type: ClarityType.StringASCII, data };\n};\n\nconst stringUtf8CV = (data: string): StringUtf8CV => {\n  return { type: ClarityType.StringUTF8, data };\n};\n\nconst stringCV = (data: string, encoding: 'ascii' | 'utf8'): StringAsciiCV | StringUtf8CV => {\n  switch (encoding) {\n    case 'ascii':\n      return stringAsciiCV(data);\n    case 'utf8':\n      return stringAsciiCV(data);\n  }\n};\n\nexport { StringAsciiCV, StringUtf8CV, stringAsciiCV, stringUtf8CV, stringCV };\n","import { serializeAddress, serializeLPString, createLPString } from '../types';\nimport {\n  BooleanCV,\n  OptionalCV,\n  BufferCV,\n  IntCV,\n  UIntCV,\n  StandardPrincipalCV,\n  ContractPrincipalCV,\n  ResponseCV,\n  ListCV,\n  TupleCV,\n  ClarityType,\n  ClarityValue,\n} from '.';\nimport { BufferArray } from '../utils';\nimport { SerializationError } from '../errors';\nimport { StringAsciiCV, StringUtf8CV } from './types/stringCV';\n\nfunction bufferWithTypeID(typeId: ClarityType, buffer: Buffer): Buffer {\n  const id = Buffer.from([typeId]);\n  return Buffer.concat([id, buffer]);\n}\n\nfunction serializeBoolCV(value: BooleanCV): Buffer {\n  return Buffer.from([value.type]);\n}\n\nfunction serializeOptionalCV(cv: OptionalCV): Buffer {\n  if (cv.type === ClarityType.OptionalNone) {\n    return Buffer.from([cv.type]);\n  } else {\n    return bufferWithTypeID(cv.type, serializeCV(cv.value));\n  }\n}\n\nfunction serializeBufferCV(cv: BufferCV): Buffer {\n  const length = Buffer.alloc(4);\n  length.writeUInt32BE(cv.buffer.length, 0);\n  return bufferWithTypeID(cv.type, Buffer.concat([length, cv.buffer]));\n}\n\nfunction serializeIntCV(cv: IntCV | UIntCV): Buffer {\n  const buffer = cv.value.toArrayLike(Buffer, 'be', 16);\n  return bufferWithTypeID(cv.type, buffer);\n}\n\nfunction serializeStandardPrincipalCV(cv: StandardPrincipalCV): Buffer {\n  return bufferWithTypeID(cv.type, serializeAddress(cv.address));\n}\n\nfunction serializeContractPrincipalCV(cv: ContractPrincipalCV): Buffer {\n  return bufferWithTypeID(\n    cv.type,\n    Buffer.concat([serializeAddress(cv.address), serializeLPString(cv.contractName)])\n  );\n}\n\nfunction serializeResponseCV(cv: ResponseCV) {\n  return bufferWithTypeID(cv.type, serializeCV(cv.value));\n}\n\nfunction serializeListCV(cv: ListCV) {\n  const buffers = new BufferArray();\n\n  const length = Buffer.alloc(4);\n  length.writeUInt32BE(cv.list.length, 0);\n  buffers.push(length);\n\n  for (const value of cv.list) {\n    const serializedValue = serializeCV(value);\n    buffers.push(serializedValue);\n  }\n\n  return bufferWithTypeID(cv.type, buffers.concatBuffer());\n}\n\nfunction serializeTupleCV(cv: TupleCV) {\n  const buffers = new BufferArray();\n\n  const length = Buffer.alloc(4);\n  length.writeUInt32BE(Object.keys(cv.data).length, 0);\n  buffers.push(length);\n\n  const lexicographicOrder = Object.keys(cv.data).sort((a, b) => {\n    const bufA = Buffer.from(a);\n    const bufB = Buffer.from(b);\n    return bufA.compare(bufB);\n  });\n\n  for (const key of lexicographicOrder) {\n    const nameWithLength = createLPString(key);\n    buffers.push(serializeLPString(nameWithLength));\n\n    const serializedValue = serializeCV(cv.data[key]);\n    buffers.push(serializedValue);\n  }\n\n  return bufferWithTypeID(cv.type, buffers.concatBuffer());\n}\n\nfunction serializeStringCV(cv: StringAsciiCV | StringUtf8CV, encoding: 'ascii' | 'utf8') {\n  const buffers = new BufferArray();\n\n  const str = Buffer.from(cv.data, encoding);\n  const len = Buffer.alloc(4);\n  len.writeUInt32BE(str.length, 0);\n\n  buffers.push(len);\n  buffers.push(str);\n\n  return bufferWithTypeID(cv.type, buffers.concatBuffer());\n}\n\nfunction serializeStringAsciiCV(cv: StringAsciiCV) {\n  return serializeStringCV(cv, 'ascii');\n}\n\nfunction serializeStringUtf8CV(cv: StringUtf8CV) {\n  return serializeStringCV(cv, 'utf8');\n}\n\nexport function serializeCV(value: ClarityValue): Buffer {\n  switch (value.type) {\n    case ClarityType.BoolTrue:\n    case ClarityType.BoolFalse:\n      return serializeBoolCV(value);\n    case ClarityType.OptionalNone:\n    case ClarityType.OptionalSome:\n      return serializeOptionalCV(value);\n    case ClarityType.Buffer:\n      return serializeBufferCV(value);\n    case ClarityType.Int:\n    case ClarityType.UInt:\n      return serializeIntCV(value);\n    case ClarityType.PrincipalStandard:\n      return serializeStandardPrincipalCV(value);\n    case ClarityType.PrincipalContract:\n      return serializeContractPrincipalCV(value);\n    case ClarityType.ResponseOk:\n    case ClarityType.ResponseErr:\n      return serializeResponseCV(value);\n    case ClarityType.List:\n      return serializeListCV(value);\n    case ClarityType.Tuple:\n      return serializeTupleCV(value);\n    case ClarityType.StringASCII:\n      return serializeStringAsciiCV(value);\n    case ClarityType.StringUTF8:\n      return serializeStringUtf8CV(value);\n    default:\n      throw new SerializationError('Unable to serialize. Invalid Clarity Value.');\n  }\n}\n","import { SmartBuffer, SmartBufferOptions } from 'smart-buffer';\n\nfunction createEnumChecker<T extends string, TEnumValue extends number>(\n  enumVariable: { [key in T]: TEnumValue }\n): (value: number) => value is TEnumValue {\n  // Create a set of valid enum number values.\n  const enumValues = Object.values<number>(enumVariable).filter(v => typeof v === 'number');\n  const enumValueSet = new Set<number>(enumValues);\n  return (value: number): value is TEnumValue => enumValueSet.has(value);\n}\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nconst enumCheckFunctions = new Map<object, (value: number) => boolean>();\n\n/**\n * Type guard to check if a given value is a valid enum value.\n * @param enumVariable - Literal `enum` type.\n * @param value - A value to check against the enum's values.\n * @example\n * ```ts\n * enum Color {\n *   Purple = 3,\n *   Orange = 5\n * }\n * const val: number = 3;\n * if (isEnum(Color, val)) {\n *   // `val` is known as enum type `Color`, e.g.:\n *   const colorVal: Color = val;\n * }\n * ```\n */\nexport function isEnum<T extends string, TEnumValue extends number>(\n  enumVariable: { [key in T]: TEnumValue },\n  value: number\n): value is TEnumValue {\n  const checker = enumCheckFunctions.get(enumVariable);\n  if (checker !== undefined) {\n    return checker(value);\n  }\n  const newChecker = createEnumChecker(enumVariable);\n  enumCheckFunctions.set(enumVariable, newChecker);\n  return isEnum(enumVariable, value);\n}\n\nexport class BufferReader {\n  smartBuffer: SmartBuffer;\n\n  static fromBuffer(buffer: Buffer): BufferReader {\n    return new BufferReader({ buff: buffer });\n  }\n\n  constructor(options?: SmartBufferOptions | Buffer) {\n    if (Buffer.isBuffer(options)) {\n      this.smartBuffer = new SmartBuffer({ buff: options });\n    } else {\n      this.smartBuffer = new SmartBuffer(options);\n    }\n  }\n\n  readBuffer(length: number): Buffer {\n    return this.smartBuffer.readBuffer(length);\n  }\n\n  readUInt32BE(offset?: number): number {\n    return this.smartBuffer.readUInt32BE(offset);\n  }\n\n  readUInt8(): number {\n    return this.smartBuffer.readUInt8();\n  }\n\n  readUInt16BE(): number {\n    return this.smartBuffer.readUInt16BE();\n  }\n\n  readBigUIntLE(length: number): bigint {\n    const buffer = Buffer.from(this.smartBuffer.readBuffer(length)).reverse();\n    const hex = buffer.toString();\n    const num = BigInt(`0x${hex}`);\n    return num;\n  }\n\n  readBigUIntBE(length: number): bigint {\n    const buffer = this.smartBuffer.readBuffer(length);\n    const hex = buffer.toString('hex');\n    const num = BigInt(`0x${hex}`);\n    return num;\n  }\n\n  readBigUInt64BE(): bigint {\n    return this.smartBuffer.readBigUInt64BE();\n  }\n\n  readString(arg?: number | BufferEncoding, encoding?: BufferEncoding): string {\n    return this.smartBuffer.readString(arg, encoding);\n  }\n\n  get readOffset(): number {\n    return this.smartBuffer.readOffset;\n  }\n\n  set readOffset(val: number) {\n    this.smartBuffer.readOffset = val;\n  }\n\n  get internalBuffer(): Buffer {\n    return this.smartBuffer.internalBuffer;\n  }\n\n  readUInt8Enum<T extends string, TEnumValue extends number>(\n    enumVariable: { [key in T]: TEnumValue },\n    invalidEnumErrorFormatter: (val: number) => Error\n  ): TEnumValue {\n    const num = this.smartBuffer.readUInt8();\n    if (isEnum(enumVariable, num)) {\n      return num;\n    } else {\n      throw invalidEnumErrorFormatter(num);\n    }\n  }\n}\n","import {\n  ClarityType,\n  ClarityValue,\n  intCV,\n  uintCV,\n  bufferCV,\n  trueCV,\n  falseCV,\n  standardPrincipalCVFromAddress,\n  contractPrincipalCVFromAddress,\n  responseOkCV,\n  responseErrorCV,\n  noneCV,\n  someCV,\n  listCV,\n  tupleCV,\n} from '.';\nimport { BufferReader } from '../bufferReader';\nimport { deserializeAddress, deserializeLPString } from '../types';\nimport { DeserializationError } from '../errors';\nimport { stringAsciiCV, stringUtf8CV } from './types/stringCV';\n\nexport default function deserializeCV(buffer: BufferReader | Buffer): ClarityValue {\n  const bufferReader = Buffer.isBuffer(buffer) ? new BufferReader(buffer) : buffer;\n  const type = bufferReader.readUInt8Enum(ClarityType, n => {\n    throw new DeserializationError(`Cannot recognize Clarity Type: ${n}`);\n  });\n\n  switch (type) {\n    case ClarityType.Int:\n      return intCV(bufferReader.readBuffer(16));\n\n    case ClarityType.UInt:\n      return uintCV(bufferReader.readBuffer(16));\n\n    case ClarityType.Buffer:\n      const bufferLength = bufferReader.readUInt32BE();\n      return bufferCV(bufferReader.readBuffer(bufferLength));\n\n    case ClarityType.BoolTrue:\n      return trueCV();\n\n    case ClarityType.BoolFalse:\n      return falseCV();\n\n    case ClarityType.PrincipalStandard:\n      const sAddress = deserializeAddress(bufferReader);\n      return standardPrincipalCVFromAddress(sAddress);\n\n    case ClarityType.PrincipalContract:\n      const cAddress = deserializeAddress(bufferReader);\n      const contractName = deserializeLPString(bufferReader);\n      return contractPrincipalCVFromAddress(cAddress, contractName);\n\n    case ClarityType.ResponseOk:\n      return responseOkCV(deserializeCV(bufferReader));\n\n    case ClarityType.ResponseErr:\n      return responseErrorCV(deserializeCV(bufferReader));\n\n    case ClarityType.OptionalNone:\n      return noneCV();\n\n    case ClarityType.OptionalSome:\n      return someCV(deserializeCV(bufferReader));\n\n    case ClarityType.List:\n      const listLength = bufferReader.readUInt32BE();\n      const listContents: ClarityValue[] = [];\n      for (let i = 0; i < listLength; i++) {\n        listContents.push(deserializeCV(bufferReader));\n      }\n      return listCV(listContents);\n\n    case ClarityType.Tuple:\n      const tupleLength = bufferReader.readUInt32BE();\n      const tupleContents: { [key: string]: ClarityValue } = {};\n      for (let i = 0; i < tupleLength; i++) {\n        const clarityName = deserializeLPString(bufferReader).content;\n        if (clarityName === undefined) {\n          throw new DeserializationError('\"content\" is undefined');\n        }\n        tupleContents[clarityName] = deserializeCV(bufferReader);\n      }\n      return tupleCV(tupleContents);\n\n    case ClarityType.StringASCII:\n      const asciiStrLen = bufferReader.readUInt32BE();\n      const asciiStr = bufferReader.readBuffer(asciiStrLen).toString('ascii');\n      return stringAsciiCV(asciiStr);\n\n    case ClarityType.StringUTF8:\n      const utf8StrLen = bufferReader.readUInt32BE();\n      const utf8Str = bufferReader.readBuffer(utf8StrLen).toString('utf8');\n      return stringUtf8CV(utf8Str);\n\n    default:\n      throw new DeserializationError(\n        'Unable to deserialize Clarity Value from buffer. Could not find valid Clarity Type.'\n      );\n  }\n}\n","import { sha256, sha512 } from 'sha.js';\nimport { ClarityValue, serializeCV } from './clarity';\nimport RIPEMD160 from 'ripemd160-min';\nimport randombytes from 'randombytes';\nimport { deserializeCV } from './clarity';\nimport fetch from 'cross-fetch';\nimport { c32addressDecode } from 'c32check';\nimport lodashCloneDeep from 'lodash/cloneDeep';\n\nexport { randombytes as randomBytes };\n\nexport class BufferArray {\n  _value: Buffer[] = [];\n  get value() {\n    return this._value;\n  }\n  appendHexString(hexString: string) {\n    this.value.push(Buffer.from(hexString, 'hex'));\n  }\n\n  push(buffer: Buffer) {\n    return this._value.push(buffer);\n  }\n  appendByte(octet: number) {\n    if (!Number.isInteger(octet) || octet < 0 || octet > 255) {\n      throw new Error(`Value ${octet} is not a valid byte`);\n    }\n    this.value.push(Buffer.from([octet]));\n  }\n\n  concatBuffer(): Buffer {\n    return Buffer.concat(this.value);\n  }\n}\n\nexport const leftPadHex = (hexString: string): string =>\n  hexString.length % 2 == 0 ? hexString : `0${hexString}`;\n\nexport const leftPadHexToLength = (hexString: string, length: number): string =>\n  hexString.padStart(length, '0');\n\nexport const rightPadHexToLength = (hexString: string, length: number): string =>\n  hexString.padEnd(length, '0');\n\nexport const intToHexString = (integer: number, lengthBytes = 8): string =>\n  integer.toString(16).padStart(lengthBytes * 2, '0');\n\nexport const hexStringToInt = (hexString: string): number => parseInt(hexString, 16);\n\nexport const exceedsMaxLengthBytes = (string: string, maxLengthBytes: number): boolean =>\n  string ? Buffer.from(string).length > maxLengthBytes : false;\n\nexport function cloneDeep<T>(obj: T): T {\n  return lodashCloneDeep(obj);\n}\n\nexport function omit<T, K extends keyof any>(obj: T, prop: K): Omit<T, K> {\n  const clone = cloneDeep(obj);\n  // @ts-expect-error\n  delete clone[prop];\n  return clone;\n}\n\nexport class sha512_256 extends sha512 {\n  constructor() {\n    super();\n    // set the \"SHA-512/256\" initialization vector\n    // see https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf\n    Object.assign(this, {\n      _ah: 0x22312194,\n      _al: 0xfc2bf72c,\n      _bh: 0x9f555fa3,\n      _bl: 0xc84c64c2,\n      _ch: 0x2393b86b,\n      _cl: 0x6f53b151,\n      _dh: 0x96387719,\n      _dl: 0x5940eabd,\n      _eh: 0x96283ee2,\n      _el: 0xa88effe3,\n      _fh: 0xbe5e1e25,\n      _fl: 0x53863992,\n      _gh: 0x2b0199fc,\n      _gl: 0x2c85b8aa,\n      _hh: 0x0eb72ddc,\n      _hl: 0x81c52ca2,\n    });\n  }\n  digest(): Buffer;\n  digest(encoding: import('crypto').HexBase64Latin1Encoding): string;\n  digest(encoding?: import('crypto').HexBase64Latin1Encoding): string | Buffer {\n    // \"SHA-512/256\" truncates the digest to 32 bytes\n    const buff = super.digest().slice(0, 32);\n    return encoding ? buff.toString(encoding) : buff;\n  }\n}\n\nexport const txidFromData = (data: Buffer): string => new sha512_256().update(data).digest('hex');\n\nexport const hash160 = (input: Buffer): Buffer => {\n  const sha256Result = new sha256().update(input).digest();\n  return Buffer.from(new RIPEMD160().update(sha256Result).digest());\n};\n\n// Internally, the Stacks blockchain encodes address the same as Bitcoin\n// single-sig address (p2pkh)\nexport const hashP2PKH = (input: Buffer): string => {\n  return hash160(input).toString('hex');\n};\n\n// Internally, the Stacks blockchain encodes address the same as Bitcoin\n// multi-sig address (p2sh)\nexport const hashP2SH = (numSigs: number, pubKeys: Buffer[]): string => {\n  if (numSigs > 15 || pubKeys.length > 15) {\n    throw Error('P2SH multisig address can only contain up to 15 public keys');\n  }\n\n  // construct P2SH script\n  const bufferArray = new BufferArray();\n  // OP_n\n  bufferArray.appendByte(80 + numSigs);\n  // public keys prepended by their length\n  pubKeys.forEach(pubKey => {\n    bufferArray.appendByte(pubKey.length);\n    bufferArray.push(pubKey);\n  });\n  // OP_m\n  bufferArray.appendByte(80 + pubKeys.length);\n  // OP_CHECKMULTISIG\n  bufferArray.appendByte(174);\n\n  const redeemScript = bufferArray.concatBuffer();\n  const redeemScriptHash = hash160(redeemScript);\n  return redeemScriptHash.toString('hex');\n};\n\nexport function isClarityName(name: string) {\n  const regex = /^[a-zA-Z]([a-zA-Z0-9]|[-_!?+<>=/*])*$|^[-+=/*]$|^[<>]=?$/;\n  return regex.test(name) && name.length < 128;\n}\n\n/** @ignore */\nexport async function fetchPrivate(input: RequestInfo, init?: RequestInit): Promise<Response> {\n  const defaultFetchOpts: RequestInit = {\n    referrer: 'no-referrer',\n    referrerPolicy: 'no-referrer',\n  };\n  const fetchOpts = Object.assign(defaultFetchOpts, init);\n  const fetchResult = await fetch(input, fetchOpts);\n  return fetchResult;\n}\n/**\n * Converts a clarity value to a hex encoded string with `0x` prefix\n * @param {ClarityValue} cv  - the clarity value to convert\n */\nexport function cvToHex(cv: ClarityValue) {\n  const serialized = serializeCV(cv);\n  return `0x${serialized.toString('hex')}`;\n}\n\n/**\n * Converts a hex encoded string to a clarity value\n * @param {string} hex - the hex encoded string with or without `0x` prefix\n */\nexport function hexToCV(hex: string) {\n  const hexWithoutPrefix = hex.startsWith('0x') ? hex.slice(2) : hex;\n  const bufferCV = Buffer.from(hexWithoutPrefix, 'hex');\n  return deserializeCV(bufferCV);\n}\n/**\n * Read only function response object\n *\n * @param {Boolean} okay - the status of the response\n * @param {string} result - serialized hex clarity value\n */\n\nexport interface ReadOnlyFunctionSuccessResponse {\n  okay: true;\n  result: string;\n}\n\nexport interface ReadOnlyFunctionErrorResponse {\n  okay: false;\n  cause: string;\n}\n\nexport type ReadOnlyFunctionResponse =\n  | ReadOnlyFunctionSuccessResponse\n  | ReadOnlyFunctionErrorResponse;\n\n/**\n * Converts the response of a read-only function call into its Clarity Value\n * @param param\n */\nexport const parseReadOnlyResponse = (response: ReadOnlyFunctionResponse): ClarityValue => {\n  if (response.okay) {\n    return hexToCV(response.result);\n  } else {\n    throw new Error(response.cause);\n  }\n};\n\nexport const validateStacksAddress = (stacksAddress: string): boolean => {\n  try {\n    c32addressDecode(stacksAddress);\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\n","import {\n  AddressHashMode,\n  AuthType,\n  MultiSigHashMode,\n  PubKeyEncoding,\n  RECOVERABLE_ECDSA_SIG_LENGTH_BYTES,\n  SingleSigHashMode,\n  StacksMessageType,\n} from './constants';\n\nimport { BufferArray, cloneDeep, leftPadHex, txidFromData } from './utils';\n\nimport {\n  addressFromPublicKeys,\n  createEmptyAddress,\n  createLPList,\n  deserializeLPList,\n  serializeLPList,\n} from './types';\n\nimport {\n  compressPublicKey,\n  createStacksPublicKey,\n  deserializePublicKey,\n  getPublicKey,\n  isCompressed,\n  publicKeyFromSignature,\n  serializePublicKey,\n  signWithKey,\n  StacksPrivateKey,\n  StacksPublicKey,\n} from './keys';\n\nimport BigNum from 'bn.js';\nimport { BufferReader } from './bufferReader';\nimport { DeserializationError, SerializationError, SigningError } from './errors';\n\nabstract class Deserializable {\n  abstract serialize(): Buffer;\n  abstract deserialize(bufferReader: BufferReader): void;\n  static deserialize<T extends Deserializable>(this: new () => T, bufferReader: BufferReader): T {\n    const message = new this();\n    message.deserialize(bufferReader);\n    return message;\n  }\n}\n\nexport interface MessageSignature {\n  readonly type: StacksMessageType.MessageSignature;\n  data: string;\n}\n\nexport function createMessageSignature(signature: string): MessageSignature {\n  const length = Buffer.from(signature, 'hex').byteLength;\n  if (length != RECOVERABLE_ECDSA_SIG_LENGTH_BYTES) {\n    throw Error('Invalid signature');\n  }\n\n  return {\n    type: StacksMessageType.MessageSignature,\n    data: signature,\n  };\n}\n\nexport function emptyMessageSignature(): MessageSignature {\n  return {\n    type: StacksMessageType.MessageSignature,\n    data: Buffer.alloc(RECOVERABLE_ECDSA_SIG_LENGTH_BYTES, 0x00).toString('hex'),\n  };\n}\n\nexport function serializeMessageSignature(messageSignature: MessageSignature): Buffer {\n  const bufferArray: BufferArray = new BufferArray();\n  bufferArray.appendHexString(messageSignature.data);\n  return bufferArray.concatBuffer();\n}\n\nexport function deserializeMessageSignature(bufferReader: BufferReader): MessageSignature {\n  return createMessageSignature(\n    bufferReader.readBuffer(RECOVERABLE_ECDSA_SIG_LENGTH_BYTES).toString('hex')\n  );\n}\n\nenum AuthFieldType {\n  PublicKeyCompressed = 0x00,\n  PublicKeyUncompressed = 0x01,\n  SignatureCompressed = 0x02,\n  SignatureUncompressed = 0x03,\n}\n\nexport type TransactionAuthFieldContents = StacksPublicKey | MessageSignature;\n\nexport interface TransactionAuthField {\n  type: StacksMessageType.TransactionAuthField;\n  pubKeyEncoding: PubKeyEncoding;\n  contents: TransactionAuthFieldContents;\n}\n\nexport function createTransactionAuthField(\n  pubKeyEncoding: PubKeyEncoding,\n  contents: TransactionAuthFieldContents\n): TransactionAuthField {\n  return {\n    pubKeyEncoding,\n    type: StacksMessageType.TransactionAuthField,\n    contents,\n  };\n}\n\nexport function serializeTransactionAuthField(field: TransactionAuthField): Buffer {\n  const bufferArray: BufferArray = new BufferArray();\n\n  switch (field.contents.type) {\n    case StacksMessageType.PublicKey:\n      if (field.pubKeyEncoding == PubKeyEncoding.Compressed) {\n        bufferArray.appendByte(AuthFieldType.PublicKeyCompressed);\n        bufferArray.push(serializePublicKey(field.contents));\n      } else {\n        bufferArray.appendByte(AuthFieldType.PublicKeyUncompressed);\n        bufferArray.push(serializePublicKey(compressPublicKey(field.contents.data)));\n      }\n      break;\n    case StacksMessageType.MessageSignature:\n      if (field.pubKeyEncoding == PubKeyEncoding.Compressed) {\n        bufferArray.appendByte(AuthFieldType.SignatureCompressed);\n      } else {\n        bufferArray.appendByte(AuthFieldType.SignatureUncompressed);\n      }\n      bufferArray.push(serializeMessageSignature(field.contents));\n      break;\n  }\n\n  return bufferArray.concatBuffer();\n}\n\nexport function deserializeTransactionAuthField(bufferReader: BufferReader): TransactionAuthField {\n  const authFieldType = bufferReader.readUInt8Enum(AuthFieldType, n => {\n    throw new DeserializationError(`Could not read ${n} as AuthFieldType`);\n  });\n\n  switch (authFieldType) {\n    case AuthFieldType.PublicKeyCompressed:\n      return createTransactionAuthField(\n        PubKeyEncoding.Compressed,\n        deserializePublicKey(bufferReader)\n      );\n    case AuthFieldType.PublicKeyUncompressed:\n      return createTransactionAuthField(\n        PubKeyEncoding.Uncompressed,\n        deserializePublicKey(bufferReader)\n      );\n    case AuthFieldType.SignatureCompressed:\n      return createTransactionAuthField(\n        PubKeyEncoding.Compressed,\n        deserializeMessageSignature(bufferReader)\n      );\n    case AuthFieldType.SignatureUncompressed:\n      return createTransactionAuthField(\n        PubKeyEncoding.Uncompressed,\n        deserializeMessageSignature(bufferReader)\n      );\n    default:\n      throw new Error(`Unknown auth field type: ${JSON.stringify(authFieldType)}`);\n  }\n}\n\nexport interface SingleSigSpendingCondition {\n  hashMode: SingleSigHashMode;\n  signer: string;\n  nonce: BigNum;\n  fee: BigNum;\n  keyEncoding: PubKeyEncoding;\n  signature: MessageSignature;\n}\n\nexport interface MultiSigSpendingCondition {\n  hashMode: MultiSigHashMode;\n  signer: string;\n  nonce: BigNum;\n  fee: BigNum;\n  fields: TransactionAuthField[];\n  signaturesRequired: number;\n}\n\nexport type SpendingCondition = SingleSigSpendingCondition | MultiSigSpendingCondition;\n\nexport function createSingleSigSpendingCondition(\n  hashMode: SingleSigHashMode,\n  pubKey: string,\n  nonce: BigNum,\n  fee: BigNum\n): SingleSigSpendingCondition {\n  // address version arg doesn't matter for signer hash generation\n  const signer = addressFromPublicKeys(0, hashMode, 1, [createStacksPublicKey(pubKey)]).hash160;\n  const keyEncoding = isCompressed(createStacksPublicKey(pubKey))\n    ? PubKeyEncoding.Compressed\n    : PubKeyEncoding.Uncompressed;\n\n  return {\n    hashMode,\n    signer,\n    nonce,\n    fee,\n    keyEncoding,\n    signature: emptyMessageSignature(),\n  };\n}\n\nexport function createMultiSigSpendingCondition(\n  hashMode: MultiSigHashMode,\n  numSigs: number,\n  pubKeys: string[],\n  nonce: BigNum,\n  fee: BigNum\n): MultiSigSpendingCondition {\n  const stacksPublicKeys = pubKeys.map(createStacksPublicKey);\n\n  // address version arg doesn't matter for signer hash generation\n  const signer = addressFromPublicKeys(0, hashMode, numSigs, stacksPublicKeys).hash160;\n\n  return {\n    hashMode,\n    signer,\n    nonce,\n    fee,\n    fields: [],\n    signaturesRequired: numSigs,\n  };\n}\n\nexport function isSingleSig(condition: SpendingCondition): condition is SingleSigSpendingCondition {\n  return 'signature' in condition;\n}\n\nfunction clearCondition(condition: SpendingCondition): SpendingCondition {\n  const cloned = cloneDeep(condition);\n  cloned.nonce = new BigNum(0);\n  cloned.fee = new BigNum(0);\n\n  if (isSingleSig(cloned)) {\n    cloned.signature = emptyMessageSignature();\n  } else {\n    cloned.fields = [];\n  }\n\n  return cloned;\n}\n\nexport function serializeSingleSigSpendingCondition(condition: SingleSigSpendingCondition): Buffer {\n  const bufferArray: BufferArray = new BufferArray();\n  bufferArray.appendByte(condition.hashMode);\n  bufferArray.appendHexString(condition.signer);\n  bufferArray.push(condition.nonce.toArrayLike(Buffer, 'be', 8));\n  bufferArray.push(condition.fee.toArrayLike(Buffer, 'be', 8));\n  bufferArray.appendByte(condition.keyEncoding);\n  bufferArray.push(serializeMessageSignature(condition.signature));\n  return bufferArray.concatBuffer();\n}\n\nexport function serializeMultiSigSpendingCondition(condition: MultiSigSpendingCondition): Buffer {\n  const bufferArray: BufferArray = new BufferArray();\n  bufferArray.appendByte(condition.hashMode);\n  bufferArray.appendHexString(condition.signer);\n  bufferArray.push(condition.nonce.toArrayLike(Buffer, 'be', 8));\n  bufferArray.push(condition.fee.toArrayLike(Buffer, 'be', 8));\n\n  const fields = createLPList(condition.fields);\n  bufferArray.push(serializeLPList(fields));\n\n  const numSigs = Buffer.alloc(2);\n  numSigs.writeUInt16BE(condition.signaturesRequired, 0);\n  bufferArray.push(numSigs);\n  return bufferArray.concatBuffer();\n}\n\nexport function deserializeSingleSigSpendingCondition(\n  hashMode: SingleSigHashMode,\n  bufferReader: BufferReader\n): SingleSigSpendingCondition {\n  const signer = bufferReader.readBuffer(20).toString('hex');\n  const nonce = new BigNum(bufferReader.readBuffer(8).toString('hex'), 16);\n  const fee = new BigNum(bufferReader.readBuffer(8).toString('hex'), 16);\n\n  const keyEncoding = bufferReader.readUInt8Enum(PubKeyEncoding, n => {\n    throw new DeserializationError(`Could not parse ${n} as PubKeyEncoding`);\n  });\n  const signature = deserializeMessageSignature(bufferReader);\n  return {\n    hashMode,\n    signer,\n    nonce,\n    fee,\n    keyEncoding,\n    signature,\n  };\n}\n\nexport function deserializeMultiSigSpendingCondition(\n  hashMode: MultiSigHashMode,\n  bufferReader: BufferReader\n): MultiSigSpendingCondition {\n  const signer = bufferReader.readBuffer(20).toString('hex');\n  const nonce = new BigNum(bufferReader.readBuffer(8).toString('hex'), 16);\n  const fee = new BigNum(bufferReader.readBuffer(8).toString('hex'), 16);\n\n  const fields = deserializeLPList(bufferReader, StacksMessageType.TransactionAuthField)\n    .values as TransactionAuthField[];\n\n  const signaturesRequired = bufferReader.readUInt16BE();\n\n  return {\n    hashMode,\n    signer,\n    nonce,\n    fee,\n    fields,\n    signaturesRequired,\n  };\n}\n\nexport function serializeSpendingCondition(condition: SpendingCondition): Buffer {\n  if (isSingleSig(condition)) {\n    return serializeSingleSigSpendingCondition(condition);\n  } else {\n    return serializeMultiSigSpendingCondition(condition);\n  }\n}\n\nexport function deserializeSpendingCondition(bufferReader: BufferReader): SpendingCondition {\n  const hashMode = bufferReader.readUInt8Enum(AddressHashMode, n => {\n    throw new DeserializationError(`Could not parse ${n} as AddressHashMode`);\n  });\n\n  if (hashMode === AddressHashMode.SerializeP2PKH || hashMode === AddressHashMode.SerializeP2WPKH) {\n    return deserializeSingleSigSpendingCondition(hashMode, bufferReader);\n  } else {\n    return deserializeMultiSigSpendingCondition(hashMode, bufferReader);\n  }\n}\n\nexport function makeSigHashPreSign(\n  curSigHash: string,\n  authType: AuthType,\n  fee: BigNum,\n  nonce: BigNum\n): string {\n  // new hash combines the previous hash and all the new data this signature will add. This\n  // includes:\n  // * the previous hash\n  // * the auth flag\n  // * the tx fee (big-endian 8-byte number)\n  // * nonce (big-endian 8-byte number)\n  const hashLength = 32 + 1 + 8 + 8;\n\n  const sigHash =\n    curSigHash +\n    Buffer.from([authType]).toString('hex') +\n    fee.toArrayLike(Buffer, 'be', 8).toString('hex') +\n    nonce.toArrayLike(Buffer, 'be', 8).toString('hex');\n\n  if (Buffer.from(sigHash, 'hex').byteLength !== hashLength) {\n    throw Error('Invalid signature hash length');\n  }\n\n  return txidFromData(Buffer.from(sigHash, 'hex'));\n}\n\nfunction makeSigHashPostSign(\n  curSigHash: string,\n  pubKey: StacksPublicKey,\n  signature: MessageSignature\n): string {\n  // new hash combines the previous hash and all the new data this signature will add.  This\n  // includes:\n  // * the public key compression flag\n  // * the signature\n  const hashLength = 32 + 1 + RECOVERABLE_ECDSA_SIG_LENGTH_BYTES;\n\n  const pubKeyEncoding = isCompressed(pubKey)\n    ? PubKeyEncoding.Compressed\n    : PubKeyEncoding.Uncompressed;\n\n  const sigHash = curSigHash + leftPadHex(pubKeyEncoding.toString(16)) + signature.data;\n\n  const sigHashBuffer = Buffer.from(sigHash, 'hex');\n  if (sigHashBuffer.byteLength > hashLength) {\n    throw Error('Invalid signature hash length');\n  }\n\n  return txidFromData(sigHashBuffer);\n}\n\nexport function nextSignature(\n  curSigHash: string,\n  authType: AuthType,\n  fee: BigNum,\n  nonce: BigNum,\n  privateKey: StacksPrivateKey\n): {\n  nextSig: MessageSignature;\n  nextSigHash: string;\n} {\n  const sigHashPreSign = makeSigHashPreSign(curSigHash, authType, fee, nonce);\n\n  const signature = signWithKey(privateKey, sigHashPreSign);\n  const publicKey = getPublicKey(privateKey);\n  const nextSigHash = makeSigHashPostSign(sigHashPreSign, publicKey, signature);\n\n  return {\n    nextSig: signature,\n    nextSigHash,\n  };\n}\n\nexport function nextVerification(\n  initialSigHash: string,\n  authType: AuthType,\n  fee: BigNum,\n  nonce: BigNum,\n  // @ts-ignore\n  pubKeyEncoding: PubKeyEncoding,\n  signature: MessageSignature\n) {\n  const sigHashPreSign = makeSigHashPreSign(initialSigHash, authType, fee, nonce);\n\n  const publicKey = createStacksPublicKey(\n    publicKeyFromSignature(sigHashPreSign, signature, pubKeyEncoding)\n  );\n\n  const nextSigHash = makeSigHashPostSign(sigHashPreSign, publicKey, signature);\n\n  return {\n    pubKey: publicKey,\n    nextSigHash,\n  };\n}\n\nfunction newInitialSigHash(): SpendingCondition {\n  const spendingCondition = createSingleSigSpendingCondition(\n    AddressHashMode.SerializeP2PKH,\n    '',\n    new BigNum(0),\n    new BigNum(0)\n  );\n  spendingCondition.signer = createEmptyAddress().hash160;\n  spendingCondition.keyEncoding = PubKeyEncoding.Compressed;\n  spendingCondition.signature = emptyMessageSignature();\n  return spendingCondition;\n}\n\nfunction verify(condition: SpendingCondition, initialSigHash: string, authType: AuthType): string {\n  if (isSingleSig(condition)) {\n    return verifySingleSig(condition, initialSigHash, authType);\n  } else {\n    // TODO: verify multisig\n    return '';\n  }\n}\n\nfunction verifySingleSig(\n  condition: SingleSigSpendingCondition,\n  initialSigHash: string,\n  authType: AuthType\n): string {\n  const { nextSigHash } = nextVerification(\n    initialSigHash,\n    authType,\n    condition.fee,\n    condition.nonce,\n    condition.keyEncoding,\n    condition.signature\n  );\n\n  // TODO: verify pub key\n\n  return nextSigHash;\n}\n\nexport class Authorization extends Deserializable {\n  authType?: AuthType;\n  spendingCondition?: SpendingCondition;\n  sponsorSpendingCondition?: SpendingCondition;\n\n  constructor(\n    authType?: AuthType,\n    spendingConditions?: SpendingCondition,\n    sponsorSpendingCondition?: SpendingCondition\n  ) {\n    super();\n    this.authType = authType;\n    this.spendingCondition = spendingConditions;\n    this.sponsorSpendingCondition = sponsorSpendingCondition;\n  }\n\n  intoInitialSighashAuth(): Authorization {\n    if (this.spendingCondition) {\n      switch (this.authType) {\n        case AuthType.Standard:\n          return new Authorization(AuthType.Standard, clearCondition(this.spendingCondition));\n        case AuthType.Sponsored:\n          return new Authorization(\n            AuthType.Sponsored,\n            clearCondition(this.spendingCondition),\n            newInitialSigHash()\n          );\n        default:\n          throw new SigningError('Unexpected authorization type for signing');\n      }\n    }\n\n    throw new Error('Authorization missing SpendingCondition');\n  }\n\n  setFee(amount: BigNum) {\n    switch (this.authType) {\n      case AuthType.Standard:\n        this.spendingCondition!.fee = amount;\n        break;\n      case AuthType.Sponsored:\n        this.sponsorSpendingCondition!.fee = amount;\n        break;\n    }\n  }\n\n  getFee() {\n    switch (this.authType) {\n      case AuthType.Standard:\n        return this.spendingCondition!.fee;\n      case AuthType.Sponsored:\n        return this.sponsorSpendingCondition!.fee;\n      default:\n        return 0;\n    }\n  }\n\n  setNonce(nonce: BigNum) {\n    this.spendingCondition!.nonce = nonce;\n  }\n\n  setSponsorNonce(nonce: BigNum) {\n    this.sponsorSpendingCondition!.nonce = nonce;\n  }\n\n  setSponsor(sponsorSpendingCondition: SpendingCondition) {\n    this.sponsorSpendingCondition = sponsorSpendingCondition;\n  }\n\n  verifyOrigin(initialSigHash: string): string {\n    switch (this.authType) {\n      case AuthType.Standard:\n        return verify(this.spendingCondition!, initialSigHash, AuthType.Standard);\n      case AuthType.Sponsored:\n        return verify(this.spendingCondition!, initialSigHash, AuthType.Standard);\n      default:\n        throw new SigningError('Invalid origin auth type');\n    }\n  }\n\n  serialize(): Buffer {\n    const bufferArray: BufferArray = new BufferArray();\n    if (this.authType === undefined) {\n      throw new SerializationError('\"authType\" is undefined');\n    }\n    bufferArray.appendByte(this.authType);\n\n    switch (this.authType) {\n      case AuthType.Standard:\n        if (this.spendingCondition === undefined) {\n          throw new SerializationError('\"spendingCondition\" is undefined');\n        }\n        bufferArray.push(serializeSpendingCondition(this.spendingCondition));\n        break;\n      case AuthType.Sponsored:\n        if (this.spendingCondition === undefined) {\n          throw new SerializationError('\"spendingCondition\" is undefined');\n        }\n        if (this.sponsorSpendingCondition === undefined) {\n          throw new SerializationError('\"spendingCondition\" is undefined');\n        }\n        bufferArray.push(serializeSpendingCondition(this.spendingCondition));\n        bufferArray.push(serializeSpendingCondition(this.sponsorSpendingCondition));\n        break;\n      default:\n        throw new SerializationError(\n          `Unexpected transaction AuthType while serializing: ${JSON.stringify(this.authType)}`\n        );\n    }\n\n    return bufferArray.concatBuffer();\n  }\n\n  deserialize(bufferReader: BufferReader) {\n    this.authType = bufferReader.readUInt8Enum(AuthType, n => {\n      throw new DeserializationError(`Could not parse ${n} as AuthType`);\n    });\n\n    switch (this.authType) {\n      case AuthType.Standard:\n        this.spendingCondition = deserializeSpendingCondition(bufferReader);\n        break;\n      case AuthType.Sponsored:\n        this.spendingCondition = deserializeSpendingCondition(bufferReader);\n        this.sponsorSpendingCondition = deserializeSpendingCondition(bufferReader);\n        break;\n      // throw new DeserializationError('Not yet implemented: deserializing sponsored transactions');\n      default:\n        throw new DeserializationError(\n          `Unexpected transaction AuthType while deserializing: ${JSON.stringify(this.authType)}`\n        );\n    }\n  }\n}\n\nexport class StandardAuthorization extends Authorization {\n  constructor(spendingCondition: SpendingCondition) {\n    super(AuthType.Standard, spendingCondition);\n  }\n}\n\nexport class SponsoredAuthorization extends Authorization {\n  constructor(\n    originSpendingCondition: SpendingCondition,\n    sponsorSpendingCondition?: SpendingCondition\n  ) {\n    let sponsorSC = sponsorSpendingCondition;\n    if (!sponsorSC) {\n      sponsorSC = createSingleSigSpendingCondition(\n        AddressHashMode.SerializeP2PKH,\n        '0'.repeat(66),\n        new BigNum(0),\n        new BigNum(0)\n      );\n    }\n    super(AuthType.Sponsored, originSpendingCondition, sponsorSC);\n  }\n}\n","import {\n  AnchorMode,\n  AuthType,\n  ChainID,\n  DEFAULT_CHAIN_ID,\n  PayloadType,\n  PostConditionMode,\n  PubKeyEncoding,\n  StacksMessageType,\n  TransactionVersion,\n} from './constants';\n\nimport {\n  Authorization,\n  createMessageSignature,\n  createTransactionAuthField,\n  isSingleSig,\n  nextSignature,\n  SingleSigSpendingCondition,\n  SpendingCondition,\n} from './authorization';\n\nimport { BufferArray, cloneDeep, txidFromData } from './utils';\n\nimport { deserializePayload, Payload, serializePayload } from './payload';\n\nimport { createLPList, deserializeLPList, LengthPrefixedList, serializeLPList } from './types';\n\nimport { isCompressed, StacksPrivateKey, StacksPublicKey } from './keys';\n\nimport { BufferReader } from './bufferReader';\n\nimport BigNum from 'bn.js';\nimport { SerializationError, SigningError } from './errors';\n\nexport class StacksTransaction {\n  version: TransactionVersion;\n  chainId: ChainID;\n  auth: Authorization;\n  anchorMode: AnchorMode;\n  payload: Payload;\n  postConditionMode: PostConditionMode;\n  postConditions: LengthPrefixedList;\n\n  constructor(\n    version: TransactionVersion,\n    auth: Authorization,\n    payload: Payload,\n    postConditions?: LengthPrefixedList,\n    postConditionMode?: PostConditionMode,\n    anchorMode?: AnchorMode,\n    chainId?: ChainID\n  ) {\n    this.version = version;\n    this.auth = auth;\n    this.payload = payload;\n    this.chainId = chainId ?? DEFAULT_CHAIN_ID;\n    this.postConditionMode = postConditionMode ?? PostConditionMode.Deny;\n    this.postConditions = postConditions ?? createLPList([]);\n\n    if (anchorMode) {\n      this.anchorMode = anchorMode;\n    } else {\n      switch (payload.payloadType) {\n        case PayloadType.Coinbase:\n        case PayloadType.PoisonMicroblock: {\n          this.anchorMode = AnchorMode.OnChainOnly;\n          break;\n        }\n        case PayloadType.ContractCall:\n        case PayloadType.SmartContract:\n        case PayloadType.TokenTransfer: {\n          this.anchorMode = AnchorMode.Any;\n          break;\n        }\n      }\n    }\n  }\n\n  signBegin() {\n    const tx = cloneDeep(this);\n    tx.auth = tx.auth.intoInitialSighashAuth();\n    return tx.txid();\n  }\n\n  verifyBegin() {\n    const tx = cloneDeep(this);\n    tx.auth = tx.auth.intoInitialSighashAuth();\n    return tx.txid();\n  }\n\n  createTxWithSignature(signature: string | Buffer): StacksTransaction {\n    const parsedSig = typeof signature === 'string' ? signature : signature.toString('hex');\n    const tx = cloneDeep(this);\n    if (!tx.auth.spendingCondition) {\n      throw new Error('Cannot set signature on transaction without spending condition');\n    }\n    (tx.auth.spendingCondition as SingleSigSpendingCondition).signature = createMessageSignature(\n      parsedSig\n    );\n    return tx;\n  }\n\n  verifyOrigin(): string {\n    return this.auth.verifyOrigin(this.verifyBegin());\n  }\n\n  signNextOrigin(sigHash: string, privateKey: StacksPrivateKey): string {\n    if (this.auth.spendingCondition === undefined) {\n      throw new Error('\"auth.spendingCondition\" is undefined');\n    }\n    if (this.auth.authType === undefined) {\n      throw new Error('\"auth.authType\" is undefined');\n    }\n    return this.signAndAppend(this.auth.spendingCondition, sigHash, AuthType.Standard, privateKey);\n  }\n\n  signNextSponsor(sigHash: string, privateKey: StacksPrivateKey): string {\n    if (this.auth.sponsorSpendingCondition === undefined) {\n      throw new Error('\"auth.spendingCondition\" is undefined');\n    }\n    if (this.auth.authType === undefined) {\n      throw new Error('\"auth.authType\" is undefined');\n    }\n    return this.signAndAppend(\n      this.auth.sponsorSpendingCondition,\n      sigHash,\n      AuthType.Sponsored,\n      privateKey\n    );\n  }\n\n  appendPubkey(publicKey: StacksPublicKey) {\n    const cond = this.auth.spendingCondition;\n    if (cond && !isSingleSig(cond)) {\n      const compressed = isCompressed(publicKey);\n      cond.fields.push(\n        createTransactionAuthField(\n          compressed ? PubKeyEncoding.Compressed : PubKeyEncoding.Uncompressed,\n          publicKey\n        )\n      );\n    } else {\n      throw new Error(`Can't append public key to a singlesig condition`);\n    }\n  }\n\n  signAndAppend(\n    condition: SpendingCondition,\n    curSigHash: string,\n    authType: AuthType,\n    privateKey: StacksPrivateKey\n  ): string {\n    const { nextSig, nextSigHash } = nextSignature(\n      curSigHash,\n      authType,\n      condition.fee,\n      condition.nonce,\n      privateKey\n    );\n    if (isSingleSig(condition)) {\n      condition.signature = nextSig;\n    } else {\n      const compressed = privateKey.data.toString('hex').endsWith('01');\n      condition.fields.push(\n        createTransactionAuthField(\n          compressed ? PubKeyEncoding.Compressed : PubKeyEncoding.Uncompressed,\n          nextSig\n        )\n      );\n    }\n\n    return nextSigHash;\n  }\n\n  txid(): string {\n    const serialized = this.serialize();\n    return txidFromData(serialized);\n  }\n\n  setSponsor(sponsorSpendingCondition: SpendingCondition) {\n    if (this.auth.authType != AuthType.Sponsored) {\n      throw new SigningError('Cannot sponsor sign a non-sponsored transaction');\n    }\n\n    this.auth.setSponsor(sponsorSpendingCondition);\n  }\n\n  /**\n   * Set the total fee to be paid for this transaction\n   *\n   * @param {BigNum} fee - the fee amount in microstacks\n   */\n  setFee(amount: BigNum) {\n    this.auth.setFee(amount);\n  }\n\n  /**\n   * Set the transaction nonce\n   *\n   * @param {BigNum} nonce - the nonce value\n   */\n  setNonce(nonce: BigNum) {\n    this.auth.setNonce(nonce);\n  }\n\n  /**\n   * Set the transaction sponsor nonce\n   *\n   * @param {BigNum} nonce - the sponsor nonce value\n   */\n  setSponsorNonce(nonce: BigNum) {\n    this.auth.setSponsorNonce(nonce);\n  }\n\n  serialize(): Buffer {\n    if (this.version === undefined) {\n      throw new SerializationError('\"version\" is undefined');\n    }\n    if (this.chainId === undefined) {\n      throw new SerializationError('\"chainId\" is undefined');\n    }\n    if (this.auth === undefined) {\n      throw new SerializationError('\"auth\" is undefined');\n    }\n    if (this.anchorMode === undefined) {\n      throw new SerializationError('\"anchorMode\" is undefined');\n    }\n    if (this.payload === undefined) {\n      throw new SerializationError('\"payload\" is undefined');\n    }\n\n    const bufferArray: BufferArray = new BufferArray();\n\n    bufferArray.appendByte(this.version);\n    const chainIdBuffer = Buffer.alloc(4);\n    chainIdBuffer.writeUInt32BE(this.chainId, 0);\n    bufferArray.push(chainIdBuffer);\n    bufferArray.push(this.auth.serialize());\n    bufferArray.appendByte(this.anchorMode);\n    bufferArray.appendByte(this.postConditionMode);\n    bufferArray.push(serializeLPList(this.postConditions));\n    bufferArray.push(serializePayload(this.payload));\n\n    return bufferArray.concatBuffer();\n  }\n}\n\n/**\n * @param data Buffer or hex string\n */\nexport function deserializeTransaction(data: BufferReader | Buffer | string) {\n  let bufferReader: BufferReader;\n  if (typeof data === 'string') {\n    if (data.slice(0, 2).toLowerCase() === '0x') {\n      bufferReader = new BufferReader(Buffer.from(data.slice(2), 'hex'));\n    } else {\n      bufferReader = new BufferReader(Buffer.from(data, 'hex'));\n    }\n  } else if (Buffer.isBuffer(data)) {\n    bufferReader = new BufferReader(data);\n  } else {\n    bufferReader = data;\n  }\n  const version = bufferReader.readUInt8Enum(TransactionVersion, n => {\n    throw new Error(`Could not parse ${n} as TransactionVersion`);\n  });\n  const chainId = bufferReader.readUInt32BE();\n  const auth = Authorization.deserialize(bufferReader);\n  const anchorMode = bufferReader.readUInt8Enum(AnchorMode, n => {\n    throw new Error(`Could not parse ${n} as AnchorMode`);\n  });\n  const postConditionMode = bufferReader.readUInt8Enum(PostConditionMode, n => {\n    throw new Error(`Could not parse ${n} as PostConditionMode`);\n  });\n  const postConditions = deserializeLPList(bufferReader, StacksMessageType.PostCondition);\n  const payload = deserializePayload(bufferReader);\n\n  return new StacksTransaction(\n    version,\n    auth,\n    payload,\n    postConditions,\n    postConditionMode,\n    anchorMode,\n    chainId\n  );\n}\n","import { StacksTransaction } from './transaction';\n\nimport { StacksPrivateKey, StacksPublicKey } from './keys';\nimport { isSingleSig } from './authorization';\nimport { cloneDeep } from './utils';\nimport { SpendingCondition } from './authorization';\nimport { AuthType } from './constants';\nimport { SigningError } from './errors';\n\nexport class TransactionSigner {\n  transaction: StacksTransaction;\n  sigHash: string;\n  originDone: boolean;\n  checkOversign: boolean;\n  checkOverlap: boolean;\n\n  constructor(transaction: StacksTransaction) {\n    this.transaction = transaction;\n    this.sigHash = transaction.signBegin();\n    this.originDone = false;\n    this.checkOversign = true;\n    this.checkOverlap = true;\n  }\n\n  static createSponsorSigner(transaction: StacksTransaction, spendingCondition: SpendingCondition) {\n    if (transaction.auth.authType != AuthType.Sponsored) {\n      throw new SigningError('Cannot add sponsor to non-sponsored transaction');\n    }\n\n    const tx: StacksTransaction = cloneDeep(transaction);\n    tx.setSponsor(spendingCondition);\n    const originSigHash = tx.verifyOrigin();\n    const signer = new this(tx);\n    signer.originDone = true;\n    signer.sigHash = originSigHash;\n    signer.checkOversign = true;\n    signer.checkOverlap = true;\n    return signer;\n  }\n\n  signOrigin(privateKey: StacksPrivateKey) {\n    if (this.checkOverlap && this.originDone) {\n      throw new SigningError('Cannot sign origin after sponsor key');\n    }\n\n    if (this.transaction.auth === undefined) {\n      throw new SigningError('\"transaction.auth\" is undefined');\n    }\n    if (this.transaction.auth.spendingCondition === undefined) {\n      throw new SigningError('\"transaction.auth.spendingCondition\" is undefined');\n    }\n\n    if (!isSingleSig(this.transaction.auth.spendingCondition)) {\n      const spendingCondition = this.transaction.auth.spendingCondition;\n      if (\n        this.checkOversign &&\n        spendingCondition.fields.length >= spendingCondition.signaturesRequired\n      ) {\n        throw new Error('Origin would have too many signatures');\n      }\n    }\n\n    const nextSighash = this.transaction.signNextOrigin(this.sigHash, privateKey);\n    this.sigHash = nextSighash;\n  }\n\n  appendOrigin(publicKey: StacksPublicKey) {\n    if (this.checkOverlap && this.originDone) {\n      throw Error('Cannot append public key to origin after sponsor key');\n    }\n\n    if (this.transaction.auth === undefined) {\n      throw new Error('\"transaction.auth\" is undefined');\n    }\n    if (this.transaction.auth.spendingCondition === undefined) {\n      throw new Error('\"transaction.auth.spendingCondition\" is undefined');\n    }\n\n    this.transaction.appendPubkey(publicKey);\n  }\n\n  signSponsor(privateKey: StacksPrivateKey) {\n    if (this.transaction.auth === undefined) {\n      throw new SigningError('\"transaction.auth\" is undefined');\n    }\n    if (this.transaction.auth.sponsorSpendingCondition === undefined) {\n      throw new SigningError('\"transaction.auth.spendingCondition\" is undefined');\n    }\n\n    const nextSighash = this.transaction.signNextSponsor(this.sigHash, privateKey);\n    this.sigHash = nextSighash;\n    this.originDone = true;\n  }\n\n  getTxInComplete(): StacksTransaction {\n    return cloneDeep(this.transaction);\n  }\n\n  resume(transaction: StacksTransaction) {\n    this.transaction = cloneDeep(transaction);\n    this.sigHash = transaction.signBegin();\n  }\n}\n","import { cloneDeep } from './utils';\nimport {\n  ClarityValue,\n  uintCV,\n  intCV,\n  contractPrincipalCV,\n  standardPrincipalCV,\n  noneCV,\n  bufferCV,\n  falseCV,\n  trueCV,\n  ClarityType,\n  getCVTypeString,\n  bufferCVFromString,\n} from './clarity';\nimport { ContractCallPayload } from './payload';\nimport { NotImplementedError } from './errors';\nimport { stringAsciiCV, stringUtf8CV } from './clarity/types/stringCV';\n\n// From https://github.com/blockstack/stacks-blockchain-sidecar/blob/master/src/event-stream/contract-abi.ts\n\nexport type ClarityAbiTypeBuffer = { buffer: { length: number } };\nexport type ClarityAbiTypeStringAscii = { 'string-ascii': { length: number } };\nexport type ClarityAbiTypeStringUtf8 = { 'string-utf8': { length: number } };\nexport type ClarityAbiTypeResponse = { response: { ok: ClarityAbiType; error: ClarityAbiType } };\nexport type ClarityAbiTypeOptional = { optional: ClarityAbiType };\nexport type ClarityAbiTypeTuple = { tuple: { name: string; type: ClarityAbiType }[] };\nexport type ClarityAbiTypeList = { list: { type: ClarityAbiType; length: number } };\n\nexport type ClarityAbiTypeUInt128 = 'uint128';\nexport type ClarityAbiTypeInt128 = 'int128';\nexport type ClarityAbiTypeBool = 'bool';\nexport type ClarityAbiTypePrincipal = 'principal';\nexport type ClarityAbiTypeTraitReference = 'trait_reference';\nexport type ClarityAbiTypeNone = 'none';\n\nexport type ClarityAbiTypePrimitive =\n  | ClarityAbiTypeUInt128\n  | ClarityAbiTypeInt128\n  | ClarityAbiTypeBool\n  | ClarityAbiTypePrincipal\n  | ClarityAbiTypeTraitReference\n  | ClarityAbiTypeNone;\n\nexport type ClarityAbiType =\n  | ClarityAbiTypePrimitive\n  | ClarityAbiTypeBuffer\n  | ClarityAbiTypeResponse\n  | ClarityAbiTypeOptional\n  | ClarityAbiTypeTuple\n  | ClarityAbiTypeList\n  | ClarityAbiTypeStringAscii\n  | ClarityAbiTypeStringUtf8\n  | ClarityAbiTypeTraitReference;\n\nexport enum ClarityAbiTypeId {\n  ClarityAbiTypeUInt128 = 1,\n  ClarityAbiTypeInt128 = 2,\n  ClarityAbiTypeBool = 3,\n  ClarityAbiTypePrincipal = 4,\n  ClarityAbiTypeNone = 5,\n  ClarityAbiTypeBuffer = 6,\n  ClarityAbiTypeResponse = 7,\n  ClarityAbiTypeOptional = 8,\n  ClarityAbiTypeTuple = 9,\n  ClarityAbiTypeList = 10,\n  ClarityAbiTypeStringAscii = 11,\n  ClarityAbiTypeStringUtf8 = 12,\n  ClarityAbiTypeTraitReference = 13,\n}\n\nexport const isClarityAbiPrimitive = (val: ClarityAbiType): val is ClarityAbiTypePrimitive =>\n  typeof val === 'string';\nexport const isClarityAbiBuffer = (val: ClarityAbiType): val is ClarityAbiTypeBuffer =>\n  (val as ClarityAbiTypeBuffer).buffer !== undefined;\nexport const isClarityAbiStringAscii = (val: ClarityAbiType): val is ClarityAbiTypeStringAscii =>\n  (val as ClarityAbiTypeStringAscii)['string-ascii'] !== undefined;\nexport const isClarityAbiStringUtf8 = (val: ClarityAbiType): val is ClarityAbiTypeStringUtf8 =>\n  (val as ClarityAbiTypeStringUtf8)['string-utf8'] !== undefined;\nexport const isClarityAbiResponse = (val: ClarityAbiType): val is ClarityAbiTypeResponse =>\n  (val as ClarityAbiTypeResponse).response !== undefined;\nexport const isClarityAbiOptional = (val: ClarityAbiType): val is ClarityAbiTypeOptional =>\n  (val as ClarityAbiTypeOptional).optional !== undefined;\nexport const isClarityAbiTuple = (val: ClarityAbiType): val is ClarityAbiTypeTuple =>\n  (val as ClarityAbiTypeTuple).tuple !== undefined;\nexport const isClarityAbiList = (val: ClarityAbiType): val is ClarityAbiTypeList =>\n  (val as ClarityAbiTypeList).list !== undefined;\n\nexport type ClarityAbiTypeUnion =\n  | { id: ClarityAbiTypeId.ClarityAbiTypeUInt128; type: ClarityAbiTypeUInt128 }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeInt128; type: ClarityAbiTypeInt128 }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeBool; type: ClarityAbiTypeBool }\n  | { id: ClarityAbiTypeId.ClarityAbiTypePrincipal; type: ClarityAbiTypePrincipal }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeTraitReference; type: ClarityAbiTypeTraitReference }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeNone; type: ClarityAbiTypeNone }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeBuffer; type: ClarityAbiTypeBuffer }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeResponse; type: ClarityAbiTypeResponse }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeOptional; type: ClarityAbiTypeOptional }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeTuple; type: ClarityAbiTypeTuple }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeList; type: ClarityAbiTypeList }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeStringAscii; type: ClarityAbiTypeStringAscii }\n  | { id: ClarityAbiTypeId.ClarityAbiTypeStringUtf8; type: ClarityAbiTypeStringUtf8 };\n\nexport function getTypeUnion(val: ClarityAbiType): ClarityAbiTypeUnion {\n  if (isClarityAbiPrimitive(val)) {\n    if (val === 'uint128') {\n      return { id: ClarityAbiTypeId.ClarityAbiTypeUInt128, type: val };\n    } else if (val === 'int128') {\n      return { id: ClarityAbiTypeId.ClarityAbiTypeInt128, type: val };\n    } else if (val === 'bool') {\n      return { id: ClarityAbiTypeId.ClarityAbiTypeBool, type: val };\n    } else if (val === 'principal') {\n      return { id: ClarityAbiTypeId.ClarityAbiTypePrincipal, type: val };\n    } else if (val === 'trait_reference') {\n      return { id: ClarityAbiTypeId.ClarityAbiTypeTraitReference, type: val };\n    } else if (val === 'none') {\n      return { id: ClarityAbiTypeId.ClarityAbiTypeNone, type: val };\n    } else {\n      throw new Error(`Unexpected Clarity ABI type primitive: ${JSON.stringify(val)}`);\n    }\n  } else if (isClarityAbiBuffer(val)) {\n    return { id: ClarityAbiTypeId.ClarityAbiTypeBuffer, type: val };\n  } else if (isClarityAbiResponse(val)) {\n    return { id: ClarityAbiTypeId.ClarityAbiTypeResponse, type: val };\n  } else if (isClarityAbiOptional(val)) {\n    return { id: ClarityAbiTypeId.ClarityAbiTypeOptional, type: val };\n  } else if (isClarityAbiTuple(val)) {\n    return { id: ClarityAbiTypeId.ClarityAbiTypeTuple, type: val };\n  } else if (isClarityAbiList(val)) {\n    return { id: ClarityAbiTypeId.ClarityAbiTypeList, type: val };\n  } else if (isClarityAbiStringAscii(val)) {\n    return { id: ClarityAbiTypeId.ClarityAbiTypeStringAscii, type: val };\n  } else if (isClarityAbiStringUtf8(val)) {\n    return { id: ClarityAbiTypeId.ClarityAbiTypeStringUtf8, type: val };\n  } else {\n    throw new Error(`Unexpected Clarity ABI type: ${JSON.stringify(val)}`);\n  }\n}\n\nfunction encodeClarityValue(type: ClarityAbiType, val: string): ClarityValue;\nfunction encodeClarityValue(type: ClarityAbiTypeUnion, val: string): ClarityValue;\nfunction encodeClarityValue(\n  input: ClarityAbiTypeUnion | ClarityAbiType,\n  val: string\n): ClarityValue {\n  let union: ClarityAbiTypeUnion;\n  if ((input as ClarityAbiTypeUnion).id !== undefined) {\n    union = input as ClarityAbiTypeUnion;\n  } else {\n    union = getTypeUnion(input as ClarityAbiType);\n  }\n  switch (union.id) {\n    case ClarityAbiTypeId.ClarityAbiTypeUInt128:\n      return uintCV(val);\n    case ClarityAbiTypeId.ClarityAbiTypeInt128:\n      return intCV(val);\n    case ClarityAbiTypeId.ClarityAbiTypeBool:\n      if (val === 'false' || val === '0') return falseCV();\n      else if (val === 'true' || val === '1') return trueCV();\n      else throw new Error(`Unexpected Clarity bool value: ${JSON.stringify(val)}`);\n    case ClarityAbiTypeId.ClarityAbiTypePrincipal:\n      if (val.includes('.')) {\n        const [addr, name] = val.split('.');\n        return contractPrincipalCV(addr, name);\n      } else {\n        return standardPrincipalCV(val);\n      }\n    case ClarityAbiTypeId.ClarityAbiTypeTraitReference:\n      const [addr, name] = val.split('.');\n      return contractPrincipalCV(addr, name);\n    case ClarityAbiTypeId.ClarityAbiTypeNone:\n      return noneCV();\n    case ClarityAbiTypeId.ClarityAbiTypeBuffer:\n      return bufferCV(Buffer.from(val, 'utf8'));\n    case ClarityAbiTypeId.ClarityAbiTypeStringAscii:\n      return stringAsciiCV(val);\n    case ClarityAbiTypeId.ClarityAbiTypeStringUtf8:\n      return stringUtf8CV(val);\n    case ClarityAbiTypeId.ClarityAbiTypeResponse:\n      throw new NotImplementedError(`Unsupported encoding for Clarity type: ${union.id}`);\n    case ClarityAbiTypeId.ClarityAbiTypeOptional:\n      throw new NotImplementedError(`Unsupported encoding for Clarity type: ${union.id}`);\n    case ClarityAbiTypeId.ClarityAbiTypeTuple:\n      throw new NotImplementedError(`Unsupported encoding for Clarity type: ${union.id}`);\n    case ClarityAbiTypeId.ClarityAbiTypeList:\n      throw new NotImplementedError(`Unsupported encoding for Clarity type: ${union.id}`);\n    default:\n      throw new Error(`Unexpected Clarity type ID: ${JSON.stringify(union)}`);\n  }\n}\nexport { encodeClarityValue };\n\nexport function getTypeString(val: ClarityAbiType): string {\n  if (isClarityAbiPrimitive(val)) {\n    if (val === 'int128') {\n      return 'int';\n    } else if (val === 'uint128') {\n      return 'uint';\n    }\n    return val;\n  } else if (isClarityAbiBuffer(val)) {\n    return `(buff ${val.buffer.length})`;\n  } else if (isClarityAbiStringAscii(val)) {\n    return `(string-ascii ${val['string-ascii'].length})`;\n  } else if (isClarityAbiStringUtf8(val)) {\n    return `(string-utf8 ${val['string-utf8'].length})`;\n  } else if (isClarityAbiResponse(val)) {\n    return `(response ${getTypeString(val.response.ok)} ${getTypeString(val.response.error)})`;\n  } else if (isClarityAbiOptional(val)) {\n    return `(optional ${getTypeString(val.optional)})`;\n  } else if (isClarityAbiTuple(val)) {\n    return `(tuple ${val.tuple.map(t => `(${t.name} ${getTypeString(t.type)})`).join(' ')})`;\n  } else if (isClarityAbiList(val)) {\n    return `(list ${val.list.length} ${getTypeString(val.list.type)})`;\n  } else {\n    throw new Error(`Type string unsupported for Clarity type: ${JSON.stringify(val)}`);\n  }\n}\n\nexport interface ClarityAbiFunction {\n  name: string;\n  access: 'private' | 'public' | 'read_only';\n  args: {\n    name: string;\n    type: ClarityAbiType;\n  }[];\n  outputs: {\n    type: ClarityAbiType;\n  };\n}\n\nexport function abiFunctionToString(func: ClarityAbiFunction): string {\n  const access = func.access === 'read_only' ? 'read-only' : func.access;\n  return `(define-${access} (${func.name} ${func.args\n    .map(arg => `(${arg.name} ${getTypeString(arg.type)})`)\n    .join(' ')}))`;\n}\n\nexport interface ClarityAbiVariable {\n  name: string;\n  access: 'variable' | 'constant';\n  type: ClarityAbiType;\n}\n\nexport interface ClarityAbiMap {\n  name: string;\n  key: {\n    name: string;\n    type: ClarityAbiType;\n  }[];\n  value: {\n    name: string;\n    type: ClarityAbiType;\n  }[];\n}\n\nexport interface ClarityAbiTypeFungibleToken {\n  name: string;\n}\n\nexport interface ClarityAbiTypeNonFungibleToken {\n  name: string;\n  type: ClarityAbiType;\n}\n\nexport interface ClarityAbi {\n  functions: ClarityAbiFunction[];\n  variables: ClarityAbiVariable[];\n  maps: ClarityAbiMap[];\n  fungible_tokens: ClarityAbiTypeFungibleToken[];\n  non_fungible_tokens: ClarityAbiTypeNonFungibleToken[];\n}\n\nfunction matchType(cv: ClarityValue, abiType: ClarityAbiType): boolean {\n  const union = getTypeUnion(abiType);\n\n  switch (cv.type) {\n    case ClarityType.BoolTrue:\n    case ClarityType.BoolFalse:\n      return union.id === ClarityAbiTypeId.ClarityAbiTypeBool;\n    case ClarityType.Int:\n      return union.id === ClarityAbiTypeId.ClarityAbiTypeInt128;\n    case ClarityType.UInt:\n      return union.id === ClarityAbiTypeId.ClarityAbiTypeUInt128;\n    case ClarityType.Buffer:\n      return (\n        union.id === ClarityAbiTypeId.ClarityAbiTypeBuffer &&\n        union.type.buffer.length >= cv.buffer.length\n      );\n    case ClarityType.StringASCII:\n      return (\n        union.id === ClarityAbiTypeId.ClarityAbiTypeStringAscii &&\n        union.type['string-ascii'].length >= cv.data.length\n      );\n    case ClarityType.StringUTF8:\n      return (\n        union.id === ClarityAbiTypeId.ClarityAbiTypeStringUtf8 &&\n        union.type['string-utf8'].length >= cv.data.length\n      );\n    case ClarityType.OptionalNone:\n      return (\n        union.id === ClarityAbiTypeId.ClarityAbiTypeNone ||\n        union.id === ClarityAbiTypeId.ClarityAbiTypeOptional\n      );\n    case ClarityType.OptionalSome:\n      return (\n        union.id === ClarityAbiTypeId.ClarityAbiTypeOptional &&\n        matchType(cv.value, union.type.optional)\n      );\n    case ClarityType.ResponseErr:\n      return (\n        union.id === ClarityAbiTypeId.ClarityAbiTypeResponse &&\n        matchType(cv.value, union.type.response.error)\n      );\n    case ClarityType.ResponseOk:\n      return (\n        union.id === ClarityAbiTypeId.ClarityAbiTypeResponse &&\n        matchType(cv.value, union.type.response.ok)\n      );\n    case ClarityType.PrincipalContract:\n      return (\n        union.id === ClarityAbiTypeId.ClarityAbiTypePrincipal ||\n        union.id === ClarityAbiTypeId.ClarityAbiTypeTraitReference\n      );\n    case ClarityType.PrincipalStandard:\n      return union.id === ClarityAbiTypeId.ClarityAbiTypePrincipal;\n    case ClarityType.List:\n      return (\n        union.id == ClarityAbiTypeId.ClarityAbiTypeList &&\n        union.type.list.length === cv.list.length &&\n        cv.list.every(val => matchType(val, union.type.list.type))\n      );\n    case ClarityType.Tuple:\n      if (union.id == ClarityAbiTypeId.ClarityAbiTypeTuple) {\n        const tuple = cloneDeep(cv.data);\n        for (let i = 0; i < union.type.tuple.length; i++) {\n          const abiTupleEntry = union.type.tuple[i];\n          const key = abiTupleEntry.name;\n          const val = tuple[key];\n\n          // if key exists in cv tuple, check if its type matches the abi\n          // return false if key doesn't exist\n          if (val) {\n            if (!matchType(val, abiTupleEntry.type)) {\n              return false;\n            }\n            delete tuple[key];\n          } else {\n            return false;\n          }\n        }\n        return true;\n      } else {\n        return false;\n      }\n    default:\n      return false;\n  }\n}\n\n/**\n * Validates a contract-call payload with a contract ABI\n *\n * @param {ContractCallPayload} payload - a contract-call payload\n * @param {ClarityAbi} abi - a contract ABI\n *\n * @returns {boolean} true if the payloads functionArgs type check against those in the ABI\n */\nexport function validateContractCall(payload: ContractCallPayload, abi: ClarityAbi): boolean {\n  const filtered = abi.functions.filter(fn => fn.name === payload.functionName.content);\n  if (filtered.length === 1) {\n    const abiFunc = filtered[0];\n    const abiArgs = abiFunc.args;\n\n    if (payload.functionArgs.length !== abiArgs.length) {\n      throw new Error(\n        `Clarity function expects ${abiArgs.length} argument(s) but received ${payload.functionArgs.length}`\n      );\n    }\n\n    for (let i = 0; i < payload.functionArgs.length; i++) {\n      const payloadArg = payload.functionArgs[i];\n      const abiArg = abiArgs[i];\n\n      if (!matchType(payloadArg, abiArg.type)) {\n        const argNum = i + 1;\n        throw new Error(\n          `Clarity function \\`${\n            payload.functionName.content\n          }\\` expects argument ${argNum} to be of type ${getTypeString(\n            abiArg.type\n          )}, not ${getCVTypeString(payloadArg)}`\n        );\n      }\n    }\n\n    return true;\n  } else if (filtered.length === 0) {\n    throw new Error(`ABI doesn't contain a function with the name ${payload.functionName.content}`);\n  } else {\n    throw new Error(\n      `Malformed ABI. Contains multiple functions with the name ${payload.functionName.content}`\n    );\n  }\n}\n\n/**\n * Convert string input to Clarity value based on contract ABI data. Only handles Clarity\n * primitives and buffers. Responses, optionals, tuples and lists are not supported.\n *\n * @param {string} input - string to be parsed into Clarity value\n * @param {ClarityAbiType} type - the contract function argument object\n *\n * @returns {ClarityValue} returns a Clarity value\n */\nexport function parseToCV(input: string, type: ClarityAbiType): ClarityValue {\n  const typeString = getTypeString(type);\n  if (isClarityAbiPrimitive(type)) {\n    if (type === 'uint128') {\n      return uintCV(input);\n    } else if (type === 'int128') {\n      return intCV(input);\n    } else if (type === 'bool') {\n      if (input.toLowerCase() === 'true') {\n        return trueCV();\n      } else if (input.toLowerCase() === 'false') {\n        return falseCV();\n      } else {\n        throw new Error(`Invalid bool value: ${input}`);\n      }\n    } else if (type === 'principal') {\n      if (input.includes('.')) {\n        const [address, contractName] = input.split('.');\n        return contractPrincipalCV(address, contractName);\n      } else {\n        return standardPrincipalCV(input);\n      }\n    } else {\n      throw new Error(`Contract function contains unsupported Clarity ABI type: ${typeString}`);\n    }\n  } else if (isClarityAbiBuffer(type)) {\n    const inputLength = Buffer.from(input).byteLength;\n    if (inputLength > type.buffer.length) {\n      throw new Error(`Input exceeds specified buffer length limit of ${type.buffer.length}`);\n    }\n    return bufferCVFromString(input);\n  } else if (isClarityAbiResponse(type)) {\n    throw new Error(`Contract function contains unsupported Clarity ABI type: ${typeString}`);\n  } else if (isClarityAbiOptional(type)) {\n    throw new Error(`Contract function contains unsupported Clarity ABI type: ${typeString}`);\n  } else if (isClarityAbiTuple(type)) {\n    throw new Error(`Contract function contains unsupported Clarity ABI type: ${typeString}`);\n  } else if (isClarityAbiList(type)) {\n    throw new Error(`Contract function contains unsupported Clarity ABI type: ${typeString}`);\n  } else {\n    throw new Error(`Contract function contains unsupported Clarity ABI type: ${typeString}`);\n  }\n}\n","import { StacksTransaction } from './transaction';\n\nimport { StacksNetwork, StacksMainnet, StacksTestnet } from '@stacks/network';\n\nimport {\n  createTokenTransferPayload,\n  createSmartContractPayload,\n  createContractCallPayload,\n} from './payload';\n\nimport {\n  StandardAuthorization,\n  SponsoredAuthorization,\n  createSingleSigSpendingCondition,\n  createMultiSigSpendingCondition,\n} from './authorization';\n\nimport {\n  publicKeyToString,\n  createStacksPrivateKey,\n  getPublicKey,\n  publicKeyToAddress,\n  pubKeyfromPrivKey,\n  publicKeyFromBuffer,\n} from './keys';\n\nimport { TransactionSigner } from './signer';\n\nimport {\n  PostCondition,\n  STXPostCondition,\n  FungiblePostCondition,\n  NonFungiblePostCondition,\n  createSTXPostCondition,\n  createFungiblePostCondition,\n  createNonFungiblePostCondition,\n} from './postcondition';\n\nimport {\n  AddressHashMode,\n  AddressVersion,\n  FungibleConditionCode,\n  NonFungibleConditionCode,\n  PostConditionMode,\n  PayloadType,\n  AnchorMode,\n  TransactionVersion,\n  TxRejectedReason,\n  SingleSigHashMode,\n} from './constants';\n\nimport { AssetInfo, createLPList, createStandardPrincipal, createContractPrincipal } from './types';\n\nimport { cvToHex, parseReadOnlyResponse, omit } from './utils';\n\nimport { fetchPrivate } from '@stacks/common';\n\nimport BigNum from 'bn.js';\nimport { ClarityValue, PrincipalCV } from './clarity';\nimport { validateContractCall, ClarityAbi } from './contract-abi';\nimport { c32address } from 'c32check';\n\n/**\n * Lookup the nonce for an address from a core node\n *\n * @param {string} address - the c32check address to look up\n * @param {StacksNetwork} network - the Stacks network to look up address on\n *\n * @return a promise that resolves to an integer\n */\nexport async function getNonce(address: string, network?: StacksNetwork): Promise<BigNum> {\n  const defaultNetwork = new StacksMainnet();\n  const url = network\n    ? network.getAccountApiUrl(address)\n    : defaultNetwork.getAccountApiUrl(address);\n\n  const response = await fetchPrivate(url);\n  if (!response.ok) {\n    let msg = '';\n    try {\n      msg = await response.text();\n    } catch (error) {}\n    throw new Error(\n      `Error fetching nonce. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`\n    );\n  }\n  const result = (await response.json()) as { nonce: string };\n  return new BigNum(result.nonce);\n}\n\n/**\n * Estimate the total transaction fee in microstacks for a token transfer\n *\n * @param {StacksTransaction} transaction - the token transfer transaction to estimate fees for\n * @param {StacksNetwork} network - the Stacks network to estimate transaction for\n *\n * @return a promise that resolves to number of microstacks per byte\n */\nexport async function estimateTransfer(\n  transaction: StacksTransaction,\n  network?: StacksNetwork\n): Promise<BigNum> {\n  if (transaction.payload.payloadType !== PayloadType.TokenTransfer) {\n    throw new Error(\n      `Transaction fee estimation only possible with ${\n        PayloadType[PayloadType.TokenTransfer]\n      } transactions. Invoked with: ${PayloadType[transaction.payload.payloadType]}`\n    );\n  }\n\n  const requestHeaders = {\n    Accept: 'application/text',\n  };\n\n  const fetchOptions = {\n    method: 'GET',\n    headers: requestHeaders,\n  };\n\n  const defaultNetwork = new StacksMainnet();\n  const url = network\n    ? network.getTransferFeeEstimateApiUrl()\n    : defaultNetwork.getTransferFeeEstimateApiUrl();\n\n  const response = await fetchPrivate(url, fetchOptions);\n  if (!response.ok) {\n    let msg = '';\n    try {\n      msg = await response.text();\n    } catch (error) {}\n    throw new Error(\n      `Error estimating transaction fee. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`\n    );\n  }\n  const feeRateResult = await response.text();\n  const txBytes = new BigNum(transaction.serialize().byteLength);\n  const feeRate = new BigNum(feeRateResult);\n  return feeRate.mul(txBytes);\n}\n\nexport type TxBroadcastResultOk = string;\nexport type TxBroadcastResultRejected = {\n  error: string;\n  reason: TxRejectedReason;\n  reason_data: any;\n  txid: string;\n};\nexport type TxBroadcastResult = TxBroadcastResultOk | TxBroadcastResultRejected;\n\n/**\n * Broadcast the signed transaction to a core node\n *\n * @param {StacksTransaction} transaction - the token transfer transaction to broadcast\n * @param {StacksNetwork} network - the Stacks network to broadcast transaction to\n *\n * @returns {Promise} that resolves to a response if the operation succeeds\n */\nexport async function broadcastTransaction(\n  transaction: StacksTransaction,\n  network: StacksNetwork,\n  attachment?: Buffer\n): Promise<TxBroadcastResult> {\n  const rawTx = transaction.serialize();\n  const url = network.getBroadcastApiUrl();\n\n  return broadcastRawTransaction(rawTx, url, attachment);\n}\n\n/**\n * Broadcast the signed transaction to a core node\n *\n * @param {Buffer} rawTx - the raw serialized transaction buffer to broadcast\n * @param {string} url - the broadcast endpoint URL\n *\n * @returns {Promise} that resolves to a response if the operation succeeds\n */\nexport async function broadcastRawTransaction(\n  rawTx: Buffer,\n  url: string,\n  attachment?: Buffer\n): Promise<TxBroadcastResult> {\n  const options = {\n    method: 'POST',\n    headers: { 'Content-Type': attachment ? 'application/json' : 'application/octet-stream' },\n    body: attachment\n      ? JSON.stringify({\n          tx: rawTx.toString('hex'),\n          attachment: attachment.toString('hex'),\n        })\n      : rawTx,\n  };\n\n  const response = await fetchPrivate(url, options);\n  if (!response.ok) {\n    try {\n      return (await response.json()) as TxBroadcastResult;\n    } catch (e) {\n      throw Error(`Failed to broadcast transaction: ${(e as Error).message}`);\n    }\n  }\n\n  const text = await response.text();\n  try {\n    return JSON.parse(text) as TxBroadcastResult;\n  } catch (e) {\n    return text;\n  }\n}\n\n/**\n * Fetch a contract's ABI\n *\n * @param {string} address - the contracts address\n * @param {string} contractName - the contracts name\n * @param {StacksNetwork} network - the Stacks network to broadcast transaction to\n *\n * @returns {Promise} that resolves to a ClarityAbi if the operation succeeds\n */\nexport async function getAbi(\n  address: string,\n  contractName: string,\n  network: StacksNetwork\n): Promise<ClarityAbi> {\n  const options = {\n    method: 'GET',\n  };\n\n  const url = network.getAbiApiUrl(address, contractName);\n\n  const response = await fetchPrivate(url, options);\n  if (!response.ok) {\n    let msg = '';\n    try {\n      msg = await response.text();\n    } catch (error) {}\n    throw new Error(\n      `Error fetching contract ABI for contract \"${contractName}\" at address ${address}. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`\n    );\n  }\n\n  return JSON.parse(await response.text()) as ClarityAbi;\n}\n\nexport interface MultiSigOptions {\n  numSignatures: number;\n  publicKeys: string[];\n  signerKeys?: string[];\n}\n\n/**\n * STX token transfer transaction options\n *\n * @param  {String|PrincipalCV} recipientAddress - the c32check address of the recipient or a\n *                                                  principal clarity value\n * @param  {BigNum} amount - number of tokens to transfer in microstacks\n * @param  {BigNum} fee - transaction fee in microstacks\n * @param  {BigNum} nonce - a nonce must be increased monotonically with each new transaction\n * @param  {StacksNetwork} network - the Stacks blockchain network this transaction is destined for\n * @param  {anchorMode} anchorMode - identify how the the transaction should be mined\n * @param  {String} memo - an arbitrary string to include with the transaction, must be less than\n *                          34 bytes\n * @param  {PostConditionMode} postConditionMode - whether post conditions must fully cover all\n *                                                 transferred assets\n * @param  {PostCondition[]} postConditions - an array of post conditions to add to the\n *                                                  transaction\n * @param  {Boolean} sponsored - true if another account is sponsoring the transaction fees\n */\nexport interface TokenTransferOptions {\n  recipient: string | PrincipalCV;\n  amount: BigNum;\n  fee?: BigNum;\n  nonce?: BigNum;\n  network?: StacksNetwork;\n  anchorMode?: AnchorMode;\n  memo?: string;\n  postConditionMode?: PostConditionMode;\n  postConditions?: PostCondition[];\n  sponsored?: boolean;\n}\n\nexport interface UnsignedTokenTransferOptions extends TokenTransferOptions {\n  publicKey: string;\n}\n\nexport interface SignedTokenTransferOptions extends TokenTransferOptions {\n  senderKey: string;\n}\n\nexport interface UnsignedMultiSigTokenTransferOptions extends TokenTransferOptions {\n  numSignatures: number;\n  publicKeys: string[];\n}\n\nexport interface SignedMultiSigTokenTransferOptions extends TokenTransferOptions {\n  numSignatures: number;\n  publicKeys: string[];\n  signerKeys: string[];\n}\n\n/**\n * Generates an unsigned Stacks token transfer transaction\n *\n * Returns a Stacks token transfer transaction.\n *\n * @param  {UnsignedTokenTransferOptions | UnsignedMultiSigTokenTransferOptions} txOptions - an options object for the token transfer\n *\n * @return {Promis<StacksTransaction>}\n */\nexport async function makeUnsignedSTXTokenTransfer(\n  txOptions: UnsignedTokenTransferOptions | UnsignedMultiSigTokenTransferOptions\n): Promise<StacksTransaction> {\n  const defaultOptions = {\n    fee: new BigNum(0),\n    nonce: new BigNum(0),\n    network: new StacksMainnet(),\n    anchorMode: AnchorMode.Any,\n    postConditionMode: PostConditionMode.Deny,\n    memo: '',\n    sponsored: false,\n  };\n\n  const options = Object.assign(defaultOptions, txOptions);\n\n  const payload = createTokenTransferPayload(options.recipient, options.amount, options.memo);\n\n  let authorization = null;\n  let spendingCondition = null;\n\n  if ('publicKey' in options) {\n    // single-sig\n    spendingCondition = createSingleSigSpendingCondition(\n      AddressHashMode.SerializeP2PKH,\n      options.publicKey,\n      options.nonce,\n      options.fee\n    );\n  } else {\n    // multi-sig\n    spendingCondition = createMultiSigSpendingCondition(\n      AddressHashMode.SerializeP2SH,\n      options.numSignatures,\n      options.publicKeys,\n      options.nonce,\n      options.fee\n    );\n  }\n\n  if (options.sponsored) {\n    authorization = new SponsoredAuthorization(spendingCondition);\n  } else {\n    authorization = new StandardAuthorization(spendingCondition);\n  }\n\n  const postConditions: PostCondition[] = [];\n  if (options.postConditions && options.postConditions.length > 0) {\n    options.postConditions.forEach(postCondition => {\n      postConditions.push(postCondition);\n    });\n  }\n\n  const lpPostConditions = createLPList(postConditions);\n  const transaction = new StacksTransaction(\n    options.network.version,\n    authorization,\n    payload,\n    lpPostConditions,\n    options.postConditionMode,\n    defaultOptions.anchorMode,\n    options.network.chainId\n  );\n\n  if (!txOptions.fee) {\n    const txFee = await estimateTransfer(transaction, options.network);\n    transaction.setFee(txFee);\n  }\n\n  if (!txOptions.nonce) {\n    const addressVersion =\n      options.network.version === TransactionVersion.Mainnet\n        ? AddressVersion.MainnetSingleSig\n        : AddressVersion.TestnetSingleSig;\n    const senderAddress = c32address(addressVersion, transaction.auth.spendingCondition!.signer);\n    const txNonce = await getNonce(senderAddress, options.network);\n    transaction.setNonce(txNonce);\n  }\n\n  return transaction;\n}\n\n/**\n * Generates a signed Stacks token transfer transaction\n *\n * Returns a signed Stacks token transfer transaction.\n *\n * @param  {SignedTokenTransferOptions | SignedMultiSigTokenTransferOptions} txOptions - an options object for the token transfer\n *\n * @return {StacksTransaction}\n */\nexport async function makeSTXTokenTransfer(\n  txOptions: SignedTokenTransferOptions | SignedMultiSigTokenTransferOptions\n): Promise<StacksTransaction> {\n  if ('senderKey' in txOptions) {\n    const publicKey = publicKeyToString(getPublicKey(createStacksPrivateKey(txOptions.senderKey)));\n    const options = omit(txOptions, 'senderKey');\n    const transaction = await makeUnsignedSTXTokenTransfer({ publicKey, ...options });\n\n    const privKey = createStacksPrivateKey(txOptions.senderKey);\n    const signer = new TransactionSigner(transaction);\n    signer.signOrigin(privKey);\n\n    return transaction;\n  } else {\n    const options = omit(txOptions, 'signerKeys');\n    const transaction = await makeUnsignedSTXTokenTransfer(options);\n\n    const signer = new TransactionSigner(transaction);\n    let pubKeys = txOptions.publicKeys;\n    for (const key of txOptions.signerKeys) {\n      const pubKey = pubKeyfromPrivKey(key);\n      pubKeys = pubKeys.filter(pk => pk !== pubKey.data.toString('hex'));\n      signer.signOrigin(createStacksPrivateKey(key));\n    }\n\n    for (const key of pubKeys) {\n      signer.appendOrigin(publicKeyFromBuffer(Buffer.from(key, 'hex')));\n    }\n\n    return transaction;\n  }\n}\n\n/**\n * Contract deploy transaction options\n *\n * @param  {String} contractName - the contract name\n * @param  {String} codeBody - the code body string\n * @param  {String} senderKey - hex string sender private key used to sign transaction\n * @param  {BigNum} fee - transaction fee in microstacks\n * @param  {BigNum} nonce - a nonce must be increased monotonically with each new transaction\n * @param  {StacksNetwork} network - the Stacks blockchain network this transaction is destined for\n * @param  {anchorMode} anchorMode - identify how the the transaction should be mined\n * @param  {PostConditionMode} postConditionMode - whether post conditions must fully cover all\n *                                                 transferred assets\n * @param  {PostCondition[]} postConditions - an array of post conditions to add to the\n *                                                  transaction\n * @param  {Boolean} sponsored - true if another account is sponsoring the transaction fees\n */\nexport interface ContractDeployOptions {\n  contractName: string;\n  codeBody: string;\n  senderKey: string;\n  fee?: BigNum;\n  nonce?: BigNum;\n  network?: StacksNetwork;\n  anchorMode?: AnchorMode;\n  postConditionMode?: PostConditionMode;\n  postConditions?: PostCondition[];\n  sponsored?: boolean;\n}\n\n/**\n * Estimate the total transaction fee in microstacks for a contract deploy\n *\n * @param {StacksTransaction} transaction - the token transfer transaction to estimate fees for\n * @param {StacksNetwork} network - the Stacks network to estimate transaction for\n *\n * @return a promise that resolves to number of microstacks per byte\n */\nexport async function estimateContractDeploy(\n  transaction: StacksTransaction,\n  network?: StacksNetwork\n): Promise<BigNum> {\n  if (transaction.payload.payloadType !== PayloadType.SmartContract) {\n    throw new Error(\n      `Contract deploy fee estimation only possible with ${\n        PayloadType[PayloadType.SmartContract]\n      } transactions. Invoked with: ${PayloadType[transaction.payload.payloadType]}`\n    );\n  }\n\n  const requestHeaders = {\n    Accept: 'application/text',\n  };\n\n  const fetchOptions = {\n    method: 'GET',\n    headers: requestHeaders,\n  };\n\n  // Place holder estimate until contract deploy fee estimation is fully implemented on Stacks\n  // blockchain core\n  const defaultNetwork = new StacksMainnet();\n  const url = network\n    ? network.getTransferFeeEstimateApiUrl()\n    : defaultNetwork.getTransferFeeEstimateApiUrl();\n\n  const response = await fetchPrivate(url, fetchOptions);\n  if (!response.ok) {\n    let msg = '';\n    try {\n      msg = await response.text();\n    } catch (error) {}\n    throw new Error(\n      `Error estimating contract deploy fee. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`\n    );\n  }\n  const feeRateResult = await response.text();\n  const txBytes = new BigNum(transaction.serialize().byteLength);\n  const feeRate = new BigNum(feeRateResult);\n  return feeRate.mul(txBytes);\n}\n\n/**\n * Generates a Clarity smart contract deploy transaction\n *\n * @param  {ContractDeployOptions} txOptions - an options object for the contract deploy\n *\n * Returns a signed Stacks smart contract deploy transaction.\n *\n * @return {StacksTransaction}\n */\nexport async function makeContractDeploy(\n  txOptions: ContractDeployOptions\n): Promise<StacksTransaction> {\n  const defaultOptions = {\n    fee: new BigNum(0),\n    nonce: new BigNum(0),\n    network: new StacksMainnet(),\n    anchorMode: AnchorMode.Any,\n    postConditionMode: PostConditionMode.Deny,\n    sponsored: false,\n  };\n\n  const options = Object.assign(defaultOptions, txOptions);\n\n  const payload = createSmartContractPayload(options.contractName, options.codeBody);\n\n  const addressHashMode = AddressHashMode.SerializeP2PKH;\n  const privKey = createStacksPrivateKey(options.senderKey);\n  const pubKey = getPublicKey(privKey);\n\n  let authorization = null;\n\n  const spendingCondition = createSingleSigSpendingCondition(\n    addressHashMode,\n    publicKeyToString(pubKey),\n    options.nonce,\n    options.fee\n  );\n\n  if (options.sponsored) {\n    authorization = new SponsoredAuthorization(spendingCondition);\n  } else {\n    authorization = new StandardAuthorization(spendingCondition);\n  }\n\n  const postConditions: PostCondition[] = [];\n  if (options.postConditions && options.postConditions.length > 0) {\n    options.postConditions.forEach(postCondition => {\n      postConditions.push(postCondition);\n    });\n  }\n\n  const lpPostConditions = createLPList(postConditions);\n  const transaction = new StacksTransaction(\n    options.network.version,\n    authorization,\n    payload,\n    lpPostConditions,\n    options.postConditionMode,\n    options.anchorMode,\n    options.network.chainId\n  );\n\n  if (!txOptions.fee) {\n    const txFee = await estimateContractDeploy(transaction, options.network);\n    transaction.setFee(txFee);\n  }\n\n  if (!txOptions.nonce) {\n    const addressVersion =\n      options.network.version === TransactionVersion.Mainnet\n        ? AddressVersion.MainnetSingleSig\n        : AddressVersion.TestnetSingleSig;\n    const senderAddress = publicKeyToAddress(addressVersion, pubKey);\n    const txNonce = await getNonce(senderAddress, options.network);\n    transaction.setNonce(txNonce);\n  }\n\n  if (options.senderKey) {\n    const signer = new TransactionSigner(transaction);\n    signer.signOrigin(privKey);\n  }\n\n  return transaction;\n}\n\n/**\n * Contract function call transaction options\n * @param  {String} contractAddress - the c32check address of the contract\n * @param  {String} contractName - the contract name\n * @param  {String} functionName - name of the function to be called\n * @param  {[ClarityValue]} functionArgs - an array of Clarity values as arguments to the function call\n * @param  {String} senderKey - hex string sender private key used to sign transaction\n * @param  {BigNum} fee - transaction fee in microstacks\n * @param  {BigNum} nonce - a nonce must be increased monotonically with each new transaction\n * @param  {StacksNetwork} network - the Stacks blockchain network this transaction is destined for\n * @param  {anchorMode} anchorMode - identify how the the transaction should be mined\n * @param  {PostConditionMode} postConditionMode - whether post conditions must fully cover all\n *                                                 transferred assets\n * @param  {PostCondition[]} postConditions - an array of post conditions to add to the\n *                                                  transaction\n * @param  {Boolean} sponsored - true if another account is sponsoring the transaction fees\n */\nexport interface ContractCallOptions {\n  contractAddress: string;\n  contractName: string;\n  functionName: string;\n  functionArgs: ClarityValue[];\n  fee?: BigNum;\n  feeEstimateApiUrl?: string;\n  nonce?: BigNum;\n  network?: StacksNetwork;\n  anchorMode?: AnchorMode;\n  postConditionMode?: PostConditionMode;\n  postConditions?: PostCondition[];\n  validateWithAbi?: boolean | ClarityAbi;\n  sponsored?: boolean;\n}\n\nexport interface UnsignedContractCallOptions extends ContractCallOptions {\n  publicKey: string;\n}\n\nexport interface SignedContractCallOptions extends ContractCallOptions {\n  senderKey: string;\n}\n\nexport interface UnsignedMultiSigContractCallOptions extends ContractCallOptions {\n  numSignatures: number;\n  publicKeys: string[];\n}\n\nexport interface SignedMultiSigContractCallOptions extends ContractCallOptions {\n  numSignatures: number;\n  publicKeys: string[];\n  signerKeys: string[];\n}\n\n/**\n * Estimate the total transaction fee in microstacks for a contract function call\n *\n * @param {StacksTransaction} transaction - the token transfer transaction to estimate fees for\n * @param {StacksNetwork} network - the Stacks network to estimate transaction for\n *\n * @return a promise that resolves to number of microstacks per byte\n */\nexport async function estimateContractFunctionCall(\n  transaction: StacksTransaction,\n  network?: StacksNetwork\n): Promise<BigNum> {\n  if (transaction.payload.payloadType !== PayloadType.ContractCall) {\n    throw new Error(\n      `Contract call fee estimation only possible with ${\n        PayloadType[PayloadType.ContractCall]\n      } transactions. Invoked with: ${PayloadType[transaction.payload.payloadType]}`\n    );\n  }\n\n  const requestHeaders = {\n    Accept: 'application/text',\n  };\n\n  const fetchOptions = {\n    method: 'GET',\n    headers: requestHeaders,\n  };\n\n  // Place holder estimate until contract call fee estimation is fully implemented on Stacks\n  // blockchain core\n  const defaultNetwork = new StacksMainnet();\n  const url = network\n    ? network.getTransferFeeEstimateApiUrl()\n    : defaultNetwork.getTransferFeeEstimateApiUrl();\n\n  const response = await fetchPrivate(url, fetchOptions);\n  if (!response.ok) {\n    let msg = '';\n    try {\n      msg = await response.text();\n    } catch (error) {}\n    throw new Error(\n      `Error estimating contract call fee. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`\n    );\n  }\n  const feeRateResult = await response.text();\n  const txBytes = new BigNum(transaction.serialize().byteLength);\n  const feeRate = new BigNum(feeRateResult);\n  return feeRate.mul(txBytes);\n}\n\n/**\n * Generates an unsigned Clarity smart contract function call transaction\n *\n * @param {UnsignedContractCallOptions | UnsignedMultiSigContractCallOptions} txOptions - an options object for the contract call\n *\n * @returns {Promise<StacksTransaction>}\n */\nexport async function makeUnsignedContractCall(\n  txOptions: UnsignedContractCallOptions | UnsignedMultiSigContractCallOptions\n): Promise<StacksTransaction> {\n  const defaultOptions = {\n    fee: new BigNum(0),\n    nonce: new BigNum(0),\n    network: new StacksMainnet(),\n    anchorMode: AnchorMode.Any,\n    postConditionMode: PostConditionMode.Deny,\n    sponsored: false,\n  };\n\n  const options = Object.assign(defaultOptions, txOptions);\n\n  const payload = createContractCallPayload(\n    options.contractAddress,\n    options.contractName,\n    options.functionName,\n    options.functionArgs\n  );\n\n  if (options?.validateWithAbi) {\n    let abi: ClarityAbi;\n    if (typeof options.validateWithAbi === 'boolean') {\n      if (options?.network) {\n        abi = await getAbi(options.contractAddress, options.contractName, options.network);\n      } else {\n        throw new Error('Network option must be provided in order to validate with ABI');\n      }\n    } else {\n      abi = options.validateWithAbi;\n    }\n\n    validateContractCall(payload, abi);\n  }\n\n  let spendingCondition = null;\n  let authorization = null;\n\n  if ('publicKey' in options) {\n    // single-sig\n    spendingCondition = createSingleSigSpendingCondition(\n      AddressHashMode.SerializeP2PKH,\n      options.publicKey,\n      options.nonce,\n      options.fee\n    );\n  } else {\n    // multi-sig\n    spendingCondition = createMultiSigSpendingCondition(\n      AddressHashMode.SerializeP2SH,\n      options.numSignatures,\n      options.publicKeys,\n      options.nonce,\n      options.fee\n    );\n  }\n\n  if (options.sponsored) {\n    authorization = new SponsoredAuthorization(spendingCondition);\n  } else {\n    authorization = new StandardAuthorization(spendingCondition);\n  }\n\n  const postConditions: PostCondition[] = [];\n  if (options.postConditions && options.postConditions.length > 0) {\n    options.postConditions.forEach(postCondition => {\n      postConditions.push(postCondition);\n    });\n  }\n\n  const lpPostConditions = createLPList(postConditions);\n  const transaction = new StacksTransaction(\n    options.network.version,\n    authorization,\n    payload,\n    lpPostConditions,\n    options.postConditionMode,\n    options.anchorMode,\n    options.network.chainId\n  );\n\n  if (!txOptions.fee) {\n    const txFee = await estimateContractFunctionCall(transaction, options.network);\n    transaction.setFee(txFee);\n  }\n\n  if (!txOptions.nonce) {\n    const addressVersion =\n      options.network.version === TransactionVersion.Mainnet\n        ? AddressVersion.MainnetSingleSig\n        : AddressVersion.TestnetSingleSig;\n    const senderAddress = c32address(addressVersion, transaction.auth.spendingCondition!.signer);\n    const txNonce = await getNonce(senderAddress, options.network);\n    transaction.setNonce(txNonce);\n  }\n\n  return transaction;\n}\n\n/**\n * Generates a Clarity smart contract function call transaction\n *\n * @param  {SignedContractCallOptions | SignedMultiSigContractCallOptions} txOptions - an options object for the contract function call\n *\n * Returns a signed Stacks smart contract function call transaction.\n *\n * @return {StacksTransaction}\n */\nexport async function makeContractCall(\n  txOptions: SignedContractCallOptions | SignedMultiSigContractCallOptions\n): Promise<StacksTransaction> {\n  if ('senderKey' in txOptions) {\n    const publicKey = publicKeyToString(getPublicKey(createStacksPrivateKey(txOptions.senderKey)));\n    const options = omit(txOptions, 'senderKey');\n    const transaction = await makeUnsignedContractCall({ publicKey, ...options });\n\n    const privKey = createStacksPrivateKey(txOptions.senderKey);\n    const signer = new TransactionSigner(transaction);\n    signer.signOrigin(privKey);\n\n    return transaction;\n  } else {\n    const options = omit(txOptions, 'signerKeys');\n    const transaction = await makeUnsignedContractCall(options);\n\n    const signer = new TransactionSigner(transaction);\n    let pubKeys = txOptions.publicKeys;\n    for (const key of txOptions.signerKeys) {\n      const pubKey = pubKeyfromPrivKey(key);\n      pubKeys = pubKeys.filter(pk => pk !== pubKey.data.toString('hex'));\n      signer.signOrigin(createStacksPrivateKey(key));\n    }\n\n    for (const key of pubKeys) {\n      signer.appendOrigin(publicKeyFromBuffer(Buffer.from(key, 'hex')));\n    }\n\n    return transaction;\n  }\n}\n\n/**\n * Generates a STX post condition with a standard principal\n *\n * Returns a STX post condition object\n *\n * @param  {String} address - the c32check address\n * @param  {FungibleConditionCode} conditionCode - the condition code\n * @param  {BigNum} amount - the amount of STX tokens\n *\n * @return {STXPostCondition}\n */\nexport function makeStandardSTXPostCondition(\n  address: string,\n  conditionCode: FungibleConditionCode,\n  amount: BigNum\n): STXPostCondition {\n  return createSTXPostCondition(createStandardPrincipal(address), conditionCode, amount);\n}\n\n/**\n * Generates a STX post condition with a contract principal\n *\n * Returns a STX post condition object\n *\n * @param  {String} address - the c32check address of the contract\n * @param  {String} contractName - the name of the contract\n * @param  {FungibleConditionCode} conditionCode - the condition code\n * @param  {BigNum} amount - the amount of STX tokens\n *\n * @return {STXPostCondition}\n */\nexport function makeContractSTXPostCondition(\n  address: string,\n  contractName: string,\n  conditionCode: FungibleConditionCode,\n  amount: BigNum\n): STXPostCondition {\n  return createSTXPostCondition(\n    createContractPrincipal(address, contractName),\n    conditionCode,\n    amount\n  );\n}\n\n/**\n * Generates a fungible token post condition with a standard principal\n *\n * Returns a fungible token post condition object\n *\n * @param  {String} address - the c32check address\n * @param  {FungibleConditionCode} conditionCode - the condition code\n * @param  {BigNum} amount - the amount of fungible tokens\n * @param  {AssetInfo} assetInfo - asset info describing the fungible token\n *\n * @return {FungiblePostCondition}\n */\nexport function makeStandardFungiblePostCondition(\n  address: string,\n  conditionCode: FungibleConditionCode,\n  amount: BigNum,\n  assetInfo: string | AssetInfo\n): FungiblePostCondition {\n  return createFungiblePostCondition(\n    createStandardPrincipal(address),\n    conditionCode,\n    amount,\n    assetInfo\n  );\n}\n\n/**\n * Generates a fungible token post condition with a contract principal\n *\n * Returns a fungible token post condition object\n *\n * @param  {String} address - the c32check address\n * @param  {String} contractName - the name of the contract\n * @param  {FungibleConditionCode} conditionCode - the condition code\n * @param  {BigNum} amount - the amount of fungible tokens\n * @param  {AssetInfo} assetInfo - asset info describing the fungible token\n *\n * @return {FungiblePostCondition}\n */\nexport function makeContractFungiblePostCondition(\n  address: string,\n  contractName: string,\n  conditionCode: FungibleConditionCode,\n  amount: BigNum,\n  assetInfo: string | AssetInfo\n): FungiblePostCondition {\n  return createFungiblePostCondition(\n    createContractPrincipal(address, contractName),\n    conditionCode,\n    amount,\n    assetInfo\n  );\n}\n\n/**\n * Generates a non-fungible token post condition with a standard principal\n *\n * Returns a non-fungible token post condition object\n *\n * @param  {String} address - the c32check address\n * @param  {FungibleConditionCode} conditionCode - the condition code\n * @param  {AssetInfo} assetInfo - asset info describing the non-fungible token\n * @param  {ClarityValue} assetName - asset name describing the non-fungible token\n *\n * @return {NonFungiblePostCondition}\n */\nexport function makeStandardNonFungiblePostCondition(\n  address: string,\n  conditionCode: NonFungibleConditionCode,\n  assetInfo: string | AssetInfo,\n  assetName: ClarityValue\n): NonFungiblePostCondition {\n  return createNonFungiblePostCondition(\n    createStandardPrincipal(address),\n    conditionCode,\n    assetInfo,\n    assetName\n  );\n}\n\n/**\n * Generates a non-fungible token post condition with a contract principal\n *\n * Returns a non-fungible token post condition object\n *\n * @param  {String} address - the c32check address\n * @param  {String} contractName - the name of the contract\n * @param  {FungibleConditionCode} conditionCode - the condition code\n * @param  {AssetInfo} assetInfo - asset info describing the non-fungible token\n * @param  {ClarityValue} assetName - asset name describing the non-fungible token\n *\n * @return {NonFungiblePostCondition}\n */\nexport function makeContractNonFungiblePostCondition(\n  address: string,\n  contractName: string,\n  conditionCode: NonFungibleConditionCode,\n  assetInfo: string | AssetInfo,\n  assetName: ClarityValue\n): NonFungiblePostCondition {\n  return createNonFungiblePostCondition(\n    createContractPrincipal(address, contractName),\n    conditionCode,\n    assetInfo,\n    assetName\n  );\n}\n\n/**\n * Read only function options\n *\n * @param  {String} contractAddress - the c32check address of the contract\n * @param  {String} contractName - the contract name\n * @param  {String} functionName - name of the function to be called\n * @param  {[ClarityValue]} functionArgs - an array of Clarity values as arguments to the function call\n * @param  {StacksNetwork} network - the Stacks blockchain network this transaction is destined for\n * @param  {String} senderAddress - the c32check address of the sender\n */\n\nexport interface ReadOnlyFunctionOptions {\n  contractName: string;\n  contractAddress: string;\n  functionName: string;\n  functionArgs: ClarityValue[];\n  network?: StacksNetwork;\n  senderAddress: string;\n}\n\n/**\n * Calls a read only function from a contract interface\n *\n * @param  {ReadOnlyFunctionOptions} readOnlyFunctionOptions - the options object\n *\n * Returns an object with a status bool (okay) and a result string that is a serialized clarity value in hex format.\n *\n * @return {ClarityValue}\n */\nexport async function callReadOnlyFunction(\n  readOnlyFunctionOptions: ReadOnlyFunctionOptions\n): Promise<ClarityValue> {\n  const defaultOptions = {\n    network: new StacksMainnet(),\n  };\n\n  const options = Object.assign(defaultOptions, readOnlyFunctionOptions);\n\n  const {\n    contractName,\n    contractAddress,\n    functionName,\n    functionArgs,\n    network,\n    senderAddress,\n  } = options;\n\n  const url = network.getReadOnlyFunctionCallApiUrl(contractAddress, contractName, functionName);\n\n  const args = functionArgs.map(arg => cvToHex(arg));\n\n  const body = JSON.stringify({\n    sender: senderAddress,\n    arguments: args,\n  });\n\n  const response = await fetchPrivate(url, {\n    method: 'POST',\n    body,\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n\n  if (!response.ok) {\n    let msg = '';\n    try {\n      msg = await response.text();\n    } catch (error) {}\n    throw new Error(\n      `Error calling read-only function. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`\n    );\n  }\n\n  return response.json().then(responseJson => parseReadOnlyResponse(responseJson));\n}\n\n/**\n * Sponsored transaction options\n *\n * @param  {StacksTransaction} transaction - the origin-signed transaction to sponsor\n * @param  {String} sponsorPrivateKey - the sponsor's private key\n * @param  {BigNum} fee - the transaction fee amount to sponsor\n * @param  {BigNum} sponsorNonce - the nonce of the sponsor account\n * @param  {AddressHashMode} sponsorAddressHashmode - the sponsor address hashmode\n * @param  {StacksNetwork} network - the Stacks blockchain network this transaction is destined for\n */\nexport interface SponsorOptions {\n  transaction: StacksTransaction;\n  sponsorPrivateKey: string;\n  fee?: BigNum;\n  sponsorNonce?: BigNum;\n  sponsorAddressHashmode?: AddressHashMode;\n  network?: StacksNetwork;\n}\n\n/**\n * Constructs and signs a sponsored transaction as the sponsor\n *\n * @param  {SponsorOptions} sponsorOptions - the sponsor options object\n *\n * Returns a signed sponsored transaction.\n *\n * @return {ClarityValue}\n */\nexport async function sponsorTransaction(\n  sponsorOptions: SponsorOptions\n): Promise<StacksTransaction> {\n  const defaultOptions = {\n    fee: new BigNum(0),\n    sponsorNonce: new BigNum(0),\n    sponsorAddressHashmode: AddressHashMode.SerializeP2PKH as SingleSigHashMode,\n  };\n\n  const options = Object.assign(defaultOptions, sponsorOptions);\n  const network =\n    sponsorOptions.network ??\n    (options.transaction.version === TransactionVersion.Mainnet\n      ? new StacksMainnet()\n      : new StacksTestnet());\n  const sponsorPubKey = pubKeyfromPrivKey(options.sponsorPrivateKey);\n\n  if (!sponsorOptions.fee) {\n    let txFee = new BigNum(0);\n    switch (options.transaction.payload.payloadType) {\n      case PayloadType.TokenTransfer:\n        txFee = await estimateTransfer(options.transaction, network);\n        break;\n      case PayloadType.SmartContract:\n        txFee = await estimateContractDeploy(options.transaction, network);\n        break;\n      case PayloadType.ContractCall:\n        txFee = await estimateContractFunctionCall(options.transaction, network);\n        break;\n      default:\n        throw new Error(\n          `Sponsored transactions not supported for transaction type ${\n            PayloadType[options.transaction.payload.payloadType]\n          }`\n        );\n    }\n    options.transaction.setFee(txFee);\n    options.fee = txFee;\n  }\n\n  if (!sponsorOptions.sponsorNonce) {\n    const addressVersion =\n      network.version === TransactionVersion.Mainnet\n        ? AddressVersion.MainnetSingleSig\n        : AddressVersion.TestnetSingleSig;\n\n    const senderAddress = publicKeyToAddress(addressVersion, sponsorPubKey);\n    const sponsorNonce = await getNonce(senderAddress, network);\n    options.sponsorNonce = sponsorNonce;\n  }\n\n  const sponsorSpendingCondition = createSingleSigSpendingCondition(\n    options.sponsorAddressHashmode,\n    publicKeyToString(sponsorPubKey),\n    options.sponsorNonce,\n    options.fee\n  );\n\n  options.transaction.setSponsor(sponsorSpendingCondition);\n\n  const privKey = createStacksPrivateKey(options.sponsorPrivateKey);\n  const signer = TransactionSigner.createSponsorSigner(\n    options.transaction,\n    sponsorSpendingCondition\n  );\n  signer.signSponsor(privKey);\n\n  return options.transaction;\n}\n"],"names":["ChainID","DEFAULT_CHAIN_ID","Mainnet","MAX_STRING_LENGTH_BYTES","CLARITY_INT_SIZE","COINBASE_BUFFER_LENGTH_BYTES","RECOVERABLE_ECDSA_SIG_LENGTH_BYTES","COMPRESSED_PUBKEY_LENGTH_BYTES","UNCOMPRESSED_PUBKEY_LENGTH_BYTES","MEMO_MAX_LENGTH_BYTES","DEFAULT_CORE_NODE_API_URL","StacksMessageType","PayloadType","AnchorMode","TransactionVersion","DEFAULT_TRANSACTION_VERSION","PostConditionMode","PostConditionType","AuthType","AddressHashMode","AddressVersion","PubKeyEncoding","FungibleConditionCode","NonFungibleConditionCode","PostConditionPrincipalID","AssetType","TxRejectedReason","runtime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","undefined","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","makeInvokeMethod","tryCatch","fn","arg","type","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","constructor","displayName","defineIteratorMethods","forEach","method","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","__await","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","then","unwrapped","error","previousPromise","enqueue","callInvokeWithMethodAndArg","async","Promise","iter","next","done","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","info","resultName","nextLoc","toString","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","keys","object","reverse","length","pop","iterable","iteratorMethod","isNaN","i","skipTempReset","prev","charAt","slice","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","getAddressFromPrivateKey","privateKey","transactionVersion","pubKey","pubKeyfromPrivKey","getAddressFromPublicKey","data","publicKey","addrVer","addressHashModeToVersion","SerializeP2PKH","addr","addressFromVersionHash","hashP2PKH","Buffer","from","addrString","addressToString","createStacksPublicKey","PublicKey","publicKeyFromSignature","message","messageSignature","pubKeyEncoding","Compressed","ec","EC","messageBN","keyFromPrivate","getPrivate","parsedSignature","parseRecoverableSignature","recoverPubKey","recoveryParam","Uncompressed","encode","encodeCompressed","publicKeyFromBuffer","isCompressed","startsWith","publicKeyToString","serializePublicKey","bufferArray","BufferArray","concatBuffer","privKey","createStacksPrivateKey","keyPair","getPublic","compressed","compressPublicKey","keyFromPublic","deserializePublicKey","bufferReader","fieldId","readUInt8","keyLength","concat","readBuffer","makeRandomPrivKey","entropy","options","randomBytes","genKeyPair","signWithKey","input","signature","sign","canonical","coordinateValueBytes","r","leftPadHexToLength","s","intToHexString","recoverableSignatureString","createMessageSignature","getSignatureRecoveryParam","recoveryParamHex","substr","hexStringToInt","getPublicKey","privateKeyToString","publicKeyToAddress","version","c32address","hash160","SerializationError","captureStackTrace","DeserializationError","NotImplementedError","SigningError","createSTXPostCondition","principal","conditionCode","amount","parsePrincipalString","PostCondition","conditionType","STX","createFungiblePostCondition","assetInfo","parseAssetInfoString","Fungible","createNonFungiblePostCondition","assetName","NonFungible","serializePostCondition","postCondition","appendByte","serializePrincipal","serializeAssetInfo","serializeCV","toArrayLike","deserializePostCondition","postConditionType","readUInt8Enum","n","deserializePrincipal","BigNum","deserializeAssetInfo","deserializeCV","createTokenTransferPayload","recipient","memo","principalCV","createMemoString","Payload","payloadType","TokenTransfer","createContractCallPayload","contractAddress","contractName","functionName","functionArgs","createAddress","createLPString","ContractCall","createSmartContractPayload","codeBody","codeBodyString","SmartContract","createPoisonPayload","PoisonMicroblock","createCoinbasePayload","coinbaseBuffer","byteLength","Coinbase","serializePayload","payload","serializeStacksMessage","numArgs","alloc","writeUInt32BE","deserializePayload","deserializeMemoString","deserializeAddress","contractCallName","deserializeLPString","numberOfArgs","readUInt32BE","clarityValue","smartContractName","Address","serializeAddress","Principal","LengthPrefixedString","serializeLPString","MemoString","serializeMemoString","AssetInfo","LengthPrefixedList","serializeLPList","TransactionAuthField","serializeTransactionAuthField","MessageSignature","serializeMessageSignature","deserializeStacksMessage","listType","deserializeLPList","deserializeMessageSignature","c32AddressString","addressData","c32addressDecode","createEmptyAddress","MainnetSingleSig","repeat","hash","hashMode","txVersion","Testnet","TestnetSingleSig","JSON","stringify","SerializeP2SH","SerializeP2WPKH","SerializeP2WSH","MainnetMultiSig","TestnetMultiSig","addressFromHashMode","addressFromPublicKeys","numSigs","publicKeys","hashP2SH","map","address","appendHexString","principalString","includes","split","createContractPrincipal","createStandardPrincipal","addressString","prefix","Standard","Contract","_","content","lengthPrefixBytes","maxLengthBytes","prefixLength","maxLength","exceedsMaxLengthBytes","lps","contentBuffer","prefixBytes","memoString","paddedContent","rightPadHexToLength","id","assetAddress","assetContractName","assetTokenName","createAssetInfo","createLPList","lpList","list","index","l","deserializeTransactionAuthField","principalToString","ClarityType","PrincipalStandard","PrincipalContract","contractPrincipalCV","standardPrincipalCV","standardPrincipalCVFromAddress","lengthPrefixedContractName","contractPrincipalCVFromAddress","contractPrincipalCVFromStandard","sp","cvToString","val","encoding","BoolTrue","BoolFalse","Int","fromTwos","UInt","str","buffer","test","OptionalNone","OptionalSome","ResponseErr","ResponseOk","List","v","join","Tuple","StringASCII","StringUTF8","cvToValue","toNumber","cvToJSON","getCVTypeString","success","trueCV","falseCV","intCV","bn","twos","toTwos","bitLength","uintCV","isNeg","bufferCV","bufferCVFromString","noneCV","someCV","responseErrorCV","responseOkCV","listCV","tupleCV","isClarityName","stringAsciiCV","stringUtf8CV","bufferWithTypeID","typeId","serializeBoolCV","serializeOptionalCV","cv","serializeBufferCV","serializeIntCV","serializeStandardPrincipalCV","serializeContractPrincipalCV","serializeResponseCV","serializeListCV","buffers","serializedValue","serializeTupleCV","lexicographicOrder","sort","a","b","bufA","bufB","compare","nameWithLength","serializeStringCV","len","serializeStringAsciiCV","serializeStringUtf8CV","createEnumChecker","enumVariable","enumValues","filter","enumValueSet","Set","has","enumCheckFunctions","Map","isEnum","checker","get","newChecker","set","BufferReader","isBuffer","smartBuffer","SmartBuffer","buff","fromBuffer","offset","readUInt16BE","readBigUIntLE","hex","num","BigInt","readBigUIntBE","readBigUInt64BE","readString","invalidEnumErrorFormatter","readOffset","internalBuffer","bufferLength","sAddress","cAddress","listLength","listContents","tupleLength","tupleContents","clarityName","asciiStrLen","asciiStr","utf8StrLen","utf8Str","hexString","_value","octet","Number","isInteger","leftPadHex","padStart","padEnd","integer","lengthBytes","parseInt","string","cloneDeep","lodashCloneDeep","omit","prop","clone","sha512_256","assign","_ah","_al","_bh","_bl","_ch","_cl","_dh","_dl","_eh","_el","_fh","_fl","_gh","_gl","_hh","_hl","digest","sha512","txidFromData","update","sha256Result","sha256","RIPEMD160","pubKeys","redeemScript","redeemScriptHash","regex","fetchPrivate","init","defaultFetchOpts","referrer","referrerPolicy","fetchOpts","fetch","fetchResult","cvToHex","serialized","hexToCV","hexWithoutPrefix","parseReadOnlyResponse","response","okay","cause","validateStacksAddress","stacksAddress","e","Deserializable","deserialize","emptyMessageSignature","AuthFieldType","createTransactionAuthField","contents","field","PublicKeyCompressed","PublicKeyUncompressed","SignatureCompressed","SignatureUncompressed","authFieldType","createSingleSigSpendingCondition","nonce","fee","signer","keyEncoding","createMultiSigSpendingCondition","stacksPublicKeys","fields","signaturesRequired","isSingleSig","condition","clearCondition","cloned","serializeSingleSigSpendingCondition","serializeMultiSigSpendingCondition","writeUInt16BE","deserializeSingleSigSpendingCondition","deserializeMultiSigSpendingCondition","serializeSpendingCondition","deserializeSpendingCondition","makeSigHashPreSign","curSigHash","authType","hashLength","sigHash","makeSigHashPostSign","sigHashBuffer","nextSignature","sigHashPreSign","nextSigHash","nextSig","nextVerification","initialSigHash","newInitialSigHash","spendingCondition","verify","verifySingleSig","Authorization","spendingConditions","sponsorSpendingCondition","intoInitialSighashAuth","Sponsored","setFee","getFee","setNonce","setSponsorNonce","setSponsor","verifyOrigin","serialize","StandardAuthorization","SponsoredAuthorization","originSpendingCondition","sponsorSC","StacksTransaction","auth","postConditions","postConditionMode","anchorMode","chainId","Deny","OnChainOnly","Any","signBegin","tx","txid","verifyBegin","createTxWithSignature","parsedSig","signNextOrigin","signAndAppend","signNextSponsor","appendPubkey","cond","endsWith","chainIdBuffer","deserializeTransaction","toLowerCase","TransactionSigner","transaction","originDone","checkOversign","checkOverlap","createSponsorSigner","originSigHash","signOrigin","nextSighash","appendOrigin","signSponsor","getTxInComplete","resume","ClarityAbiTypeId","isClarityAbiPrimitive","isClarityAbiBuffer","isClarityAbiStringAscii","isClarityAbiStringUtf8","isClarityAbiResponse","isClarityAbiOptional","optional","isClarityAbiTuple","tuple","isClarityAbiList","getTypeUnion","ClarityAbiTypeUInt128","ClarityAbiTypeInt128","ClarityAbiTypeBool","ClarityAbiTypePrincipal","ClarityAbiTypeTraitReference","ClarityAbiTypeNone","ClarityAbiTypeBuffer","ClarityAbiTypeResponse","ClarityAbiTypeOptional","ClarityAbiTypeTuple","ClarityAbiTypeList","ClarityAbiTypeStringAscii","ClarityAbiTypeStringUtf8","encodeClarityValue","union","getTypeString","ok","t","abiFunctionToString","func","access","args","matchType","abiType","every","abiTupleEntry","validateContractCall","abi","filtered","functions","abiFunc","abiArgs","payloadArg","abiArg","argNum","parseToCV","typeString","inputLength","getNonce","network","defaultNetwork","StacksMainnet","url","getAccountApiUrl","msg","text","status","statusText","json","estimateTransfer","requestHeaders","Accept","fetchOptions","headers","getTransferFeeEstimateApiUrl","feeRateResult","txBytes","feeRate","mul","broadcastTransaction","attachment","rawTx","getBroadcastApiUrl","broadcastRawTransaction","body","parse","getAbi","getAbiApiUrl","makeUnsignedSTXTokenTransfer","txOptions","defaultOptions","sponsored","authorization","numSignatures","lpPostConditions","txFee","addressVersion","senderAddress","txNonce","makeSTXTokenTransfer","senderKey","pk","signerKeys","estimateContractDeploy","makeContractDeploy","addressHashMode","estimateContractFunctionCall","makeUnsignedContractCall","validateWithAbi","makeContractCall","makeStandardSTXPostCondition","makeContractSTXPostCondition","makeStandardFungiblePostCondition","makeContractFungiblePostCondition","makeStandardNonFungiblePostCondition","makeContractNonFungiblePostCondition","callReadOnlyFunction","readOnlyFunctionOptions","getReadOnlyFunctionCallApiUrl","sender","arguments","responseJson","sponsorTransaction","sponsorOptions","sponsorNonce","sponsorAddressHashmode","StacksTestnet","sponsorPubKey","sponsorPrivateKey"],"mappings":"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"}