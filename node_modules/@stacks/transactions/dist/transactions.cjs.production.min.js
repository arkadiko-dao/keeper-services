"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("sha.js"),t=require("elliptic"),r=require("c32check"),n=require("bn.js"),o=require("smart-buffer"),i=require("ripemd160-min"),s=require("randombytes"),a=require("cross-fetch"),p=require("lodash/cloneDeep"),u=require("@stacks/network"),c=require("@stacks/common");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var f,l=d(n),y=d(i),h=d(s),x=d(a),g=d(p);(f=exports.ChainID||(exports.ChainID={}))[f.Testnet=2147483648]="Testnet",f[f.Mainnet=1]="Mainnet";var T,C,S,b,v=exports.ChainID.Mainnet;(T=exports.StacksMessageType||(exports.StacksMessageType={}))[T.Address=0]="Address",T[T.Principal=1]="Principal",T[T.LengthPrefixedString=2]="LengthPrefixedString",T[T.MemoString=3]="MemoString",T[T.AssetInfo=4]="AssetInfo",T[T.PostCondition=5]="PostCondition",T[T.PublicKey=6]="PublicKey",T[T.LengthPrefixedList=7]="LengthPrefixedList",T[T.Payload=8]="Payload",T[T.MessageSignature=9]="MessageSignature",T[T.TransactionAuthField=10]="TransactionAuthField",(C=exports.PayloadType||(exports.PayloadType={}))[C.TokenTransfer=0]="TokenTransfer",C[C.SmartContract=1]="SmartContract",C[C.ContractCall=2]="ContractCall",C[C.PoisonMicroblock=3]="PoisonMicroblock",C[C.Coinbase=4]="Coinbase",(S=exports.AnchorMode||(exports.AnchorMode={}))[S.OnChainOnly=1]="OnChainOnly",S[S.OffChainOnly=2]="OffChainOnly",S[S.Any=3]="Any",(b=exports.TransactionVersion||(exports.TransactionVersion={}))[b.Mainnet=0]="Mainnet",b[b.Testnet=128]="Testnet";var w,m,A,P,k,B,E,M,I,O,N,U=exports.TransactionVersion.Mainnet;function F(e,t,r,n,o,i,s){try{var a=e[i](s),p=a.value}catch(e){return void r(e)}a.done?t(p):Promise.resolve(p).then(n,o)}function L(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){F(i,n,o,s,a,"next",e)}function a(e){F(i,n,o,s,a,"throw",e)}s(void 0)}))}}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e,t,r){return t&&K(e.prototype,t),r&&K(e,r),e}function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function D(e,t,r){return(D=j()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&V(o,r.prototype),o}).apply(null,arguments)}function G(e){var t="function"==typeof Map?new Map:void 0;return(G=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return D(e,arguments,R(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),V(r,e)})(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function W(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return J(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?J(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function X(e,t){return e(t={exports:{}},t.exports),t.exports}(w=exports.PostConditionMode||(exports.PostConditionMode={}))[w.Allow=1]="Allow",w[w.Deny=2]="Deny",(m=exports.PostConditionType||(exports.PostConditionType={}))[m.STX=0]="STX",m[m.Fungible=1]="Fungible",m[m.NonFungible=2]="NonFungible",(A=exports.AuthType||(exports.AuthType={}))[A.Standard=4]="Standard",A[A.Sponsored=5]="Sponsored",(P=exports.AddressHashMode||(exports.AddressHashMode={}))[P.SerializeP2PKH=0]="SerializeP2PKH",P[P.SerializeP2SH=1]="SerializeP2SH",P[P.SerializeP2WPKH=2]="SerializeP2WPKH",P[P.SerializeP2WSH=3]="SerializeP2WSH",(k=exports.AddressVersion||(exports.AddressVersion={}))[k.MainnetSingleSig=22]="MainnetSingleSig",k[k.MainnetMultiSig=20]="MainnetMultiSig",k[k.TestnetSingleSig=26]="TestnetSingleSig",k[k.TestnetMultiSig=21]="TestnetMultiSig",(B=exports.PubKeyEncoding||(exports.PubKeyEncoding={}))[B.Compressed=0]="Compressed",B[B.Uncompressed=1]="Uncompressed",(E=exports.FungibleConditionCode||(exports.FungibleConditionCode={}))[E.Equal=1]="Equal",E[E.Greater=2]="Greater",E[E.GreaterEqual=3]="GreaterEqual",E[E.Less=4]="Less",E[E.LessEqual=5]="LessEqual",(M=exports.NonFungibleConditionCode||(exports.NonFungibleConditionCode={}))[M.DoesNotOwn=16]="DoesNotOwn",M[M.Owns=17]="Owns",(I=exports.PostConditionPrincipalID||(exports.PostConditionPrincipalID={}))[I.Origin=1]="Origin",I[I.Standard=2]="Standard",I[I.Contract=3]="Contract",(O=exports.AssetType||(exports.AssetType={}))[O.STX=0]="STX",O[O.Fungible=1]="Fungible",O[O.NonFungible=2]="NonFungible",(N=exports.TxRejectedReason||(exports.TxRejectedReason={})).Serialization="Serialization",N.Deserialization="Deserialization",N.SignatureValidation="SignatureValidation",N.FeeTooLow="FeeTooLow",N.BadNonce="BadNonce",N.NotEnoughFunds="NotEnoughFunds",N.NoSuchContract="NoSuchContract",N.NoSuchPublicFunction="NoSuchPublicFunction",N.BadFunctionArgument="BadFunctionArgument",N.ContractAlreadyExists="ContractAlreadyExists",N.PoisonMicroblocksDoNotConflict="PoisonMicroblocksDoNotConflict",N.PoisonMicroblockHasUnknownPubKeyHash="PoisonMicroblockHasUnknownPubKeyHash",N.PoisonMicroblockIsInvalid="PoisonMicroblockIsInvalid",N.BadAddressVersionByte="BadAddressVersionByte",N.NoCoinbaseViaMempool="NoCoinbaseViaMempool",N.ServerFailureNoSuchChainTip="ServerFailureNoSuchChainTip",N.ServerFailureDatabase="ServerFailureDatabase",N.ServerFailureOther="ServerFailureOther";var Y=X((function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function a(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var o=Object.create((t&&t.prototype instanceof d?t:d).prototype),i=new w(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=S(s,r);if(a){if(a===c)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var p=u(e,t,r);if("normal"===p.type){if(n=r.done?"completed":"suspendedYield",p.arg===c)continue;return{value:p.arg,done:r.done}}"throw"===p.type&&(n="completed",r.method="throw",r.arg=p.arg)}}}(e,r,i),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=p;var c={};function d(){}function f(){}function l(){}var y={};y[o]=function(){return this};var h=Object.getPrototypeOf,x=h&&h(h(m([])));x&&x!==t&&r.call(x,o)&&(y=x);var g=l.prototype=d.prototype=Object.create(y);function T(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){var n;this._invoke=function(o,i){function s(){return new t((function(n,s){!function n(o,i,s,a){var p=u(e[o],e,i);if("throw"!==p.type){var c=p.arg,d=c.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,a)}))}a(p.arg)}(o,i,n,s)}))}return n=n?n.then(s,s):s()}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function v(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function m(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=g.constructor=l,l.constructor=f,f.displayName=a(l,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},T(C.prototype),C.prototype[i]=function(){return this},e.AsyncIterator=C,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var s=new C(p(t,r,n,o),i);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},T(g),a(g,s,"Generator"),g[o]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=m,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(v),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),p=r.call(i,"finallyLoc");if(a&&p){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!p)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),v(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;v(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:m(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function $(e,t){return void 0===t&&(t=exports.TransactionVersion.Mainnet),e="string"==typeof e?e:e.toString("hex"),Ne(Me(Ie(exports.AddressHashMode.SerializeP2PKH,t),Rt(Buffer.from(e,"hex"))))}function Z(e){return{type:exports.StacksMessageType.PublicKey,data:Buffer.from(e,"hex")}}function Q(e,r,n){void 0===n&&(n=exports.PubKeyEncoding.Compressed);var o=new t.ec("secp256k1"),i=o.keyFromPrivate(e,"hex").getPrivate().toString(10),s=ue(r.data),a=o.recoverPubKey(i,s,s.recoveryParam,"hex");return n==exports.PubKeyEncoding.Uncompressed?a.encode("hex"):a.encodeCompressed("hex")}function ee(e){return{type:exports.StacksMessageType.PublicKey,data:e}}function te(e){return!e.data.toString("hex").startsWith("04")}function re(e){return e.data.toString("hex")}function ne(e){var t=new Et;return t.push(e.data),t.concatBuffer()}function oe(e){var r=ae(e);return Z(new t.ec("secp256k1").keyFromPrivate(r.data.toString("hex").slice(0,64),"hex").getPublic(r.compressed,"hex"))}function ie(e){return Z(new t.ec("secp256k1").keyFromPublic(e).getPublic(!0,"hex"))}function se(e){var t=e.readUInt8(),r=4!==t?32:64;return ee(Buffer.concat([Buffer.from([t]),e.readBuffer(r)]))}function ae(e){var t,r="string"==typeof e?Buffer.from(e,"hex"):e;if(33===r.length){if(1!==r[r.length-1])throw new Error("Improperly formatted private-key. 33 byte length usually indicates compressed key, but last byte must be == 0x01");t=!0}else{if(32!==r.length)throw new Error("Improperly formatted private-key hex string: length should be 32 or 33 bytes, provided with length "+r.length);t=!1}return{data:r,compressed:t}}function pe(e,r){var n=new t.ec("secp256k1").keyFromPrivate(e.data.toString("hex").slice(0,64),"hex").sign(r,"hex",{canonical:!0}),o=It(n.r.toString("hex"),64),i=It(n.s.toString("hex"),64);if(null==n.recoveryParam)throw new Error('"signature.recoveryParam" is not set');return Yt(Nt(n.recoveryParam,1)+o+i)}function ue(e){if(e.length<129)throw new Error("Invalid signature");var t=e.substr(0,2),r=e.substr(2,64),n=e.substr(66,64);return{recoveryParam:Ut(t),r:r,s:n}}function ce(e){return oe(e.data)}function de(e,t){return r.c32address(e,_t(t.data).toString("hex"))}var fe,le=function(e){function t(t){var r;return(r=e.call(this,t)||this).message=t,r.name=r.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(q(r),r.constructor),r}return _(t,e),t}(G(Error)),ye=function(e){function t(t){var r;return(r=e.call(this,t)||this).message=t,r.name=r.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(q(r),r.constructor),r}return _(t,e),t}(G(Error)),he=function(e){function t(t){var r;return(r=e.call(this,t)||this).message=t,r.name=r.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(q(r),r.constructor),r}return _(t,e),t}(G(Error)),xe=function(e){function t(t){var r;return(r=e.call(this,t)||this).message=t,r.name=r.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(q(r),r.constructor),r}return _(t,e),t}(G(Error));function ge(e,t,r){return"string"==typeof e&&(e=Le(e)),{type:exports.StacksMessageType.PostCondition,conditionType:exports.PostConditionType.STX,principal:e,conditionCode:t,amount:r}}function Te(e,t,r,n){return"string"==typeof e&&(e=Le(e)),"string"==typeof n&&(n=We(n)),{type:exports.StacksMessageType.PostCondition,conditionType:exports.PostConditionType.Fungible,principal:e,conditionCode:t,amount:r,assetInfo:n}}function Ce(e,t,r,n){return"string"==typeof e&&(e=Le(e)),"string"==typeof r&&(r=We(r)),{type:exports.StacksMessageType.PostCondition,conditionType:exports.PostConditionType.NonFungible,principal:e,conditionCode:t,assetInfo:r,assetName:n}}function Se(e){var t=new Et;return t.appendByte(e.conditionType),t.push(ze(e.principal)),e.conditionType!==exports.PostConditionType.Fungible&&e.conditionType!==exports.PostConditionType.NonFungible||t.push(Ye(e.assetInfo)),e.conditionType===exports.PostConditionType.NonFungible&&t.push(At(e.assetName)),t.appendByte(e.conditionCode),e.conditionType!==exports.PostConditionType.STX&&e.conditionType!==exports.PostConditionType.Fungible||t.push(e.amount.toArrayLike(Buffer,"be",8)),t.concatBuffer()}function be(e){var t,r,n,o=e.readUInt8Enum(exports.PostConditionType,(function(e){throw new ye("Could not read "+e+" as PostConditionType")})),i=_e(e);switch(o){case exports.PostConditionType.STX:return t=e.readUInt8Enum(exports.FungibleConditionCode,(function(e){throw new ye("Could not read "+e+" as FungibleConditionCode")})),n=new l.default(e.readBuffer(8).toString("hex"),16),{type:exports.StacksMessageType.PostCondition,conditionType:exports.PostConditionType.STX,principal:i,conditionCode:t,amount:n};case exports.PostConditionType.Fungible:return r=$e(e),t=e.readUInt8Enum(exports.FungibleConditionCode,(function(e){throw new ye("Could not read "+e+" as FungibleConditionCode")})),n=new l.default(e.readBuffer(8).toString("hex"),16),{type:exports.StacksMessageType.PostCondition,conditionType:exports.PostConditionType.Fungible,principal:i,conditionCode:t,amount:n,assetInfo:r};case exports.PostConditionType.NonFungible:r=$e(e);var s=Bt(e);return t=e.readUInt8Enum(exports.NonFungibleConditionCode,(function(e){throw new ye("Could not read "+e+" as FungibleConditionCode")})),{type:exports.StacksMessageType.PostCondition,conditionType:exports.PostConditionType.NonFungible,principal:i,conditionCode:t,assetInfo:r,assetName:s}}}function ve(e,t,r){var n;return"string"==typeof e&&(e=function(e){if(e.includes(".")){var t=e.split(".");return ot(t[0],t[1])}return rt(e)}(e)),"string"==typeof r&&(r=Ge(r)),{type:exports.StacksMessageType.Payload,payloadType:exports.PayloadType.TokenTransfer,recipient:e,amount:t,memo:null!=(n=r)?n:Ge("")}}function we(e,t,r,n){return"string"==typeof e&&(e=Be(e)),"string"==typeof t&&(t=Re(t)),"string"==typeof r&&(r=Re(r)),{type:exports.StacksMessageType.Payload,payloadType:exports.PayloadType.ContractCall,contractAddress:e,contractName:t,functionName:r,functionArgs:n}}function me(e,t){return"string"==typeof e&&(e=Re(e)),"string"==typeof t&&(t=De(t)),{type:exports.StacksMessageType.Payload,payloadType:exports.PayloadType.SmartContract,contractName:e,codeBody:t}}function Ae(e){var t=new Et;switch(t.appendByte(e.payloadType),e.payloadType){case exports.PayloadType.TokenTransfer:t.push(At(e.recipient)),t.push(e.amount.toArrayLike(Buffer,"be",8)),t.push(ke(e.memo));break;case exports.PayloadType.ContractCall:t.push(ke(e.contractAddress)),t.push(ke(e.contractName)),t.push(ke(e.functionName));var r=Buffer.alloc(4);r.writeUInt32BE(e.functionArgs.length,0),t.push(r),e.functionArgs.forEach((function(e){t.push(At(e))}));break;case exports.PayloadType.SmartContract:t.push(ke(e.contractName)),t.push(ke(e.codeBody));break;case exports.PayloadType.PoisonMicroblock:break;case exports.PayloadType.Coinbase:t.push(e.coinbaseBuffer)}return t.concatBuffer()}function Pe(e){switch(e.readUInt8Enum(exports.PayloadType,(function(e){throw new Error("Cannot recognize PayloadType: "+e)}))){case exports.PayloadType.TokenTransfer:return ve(Bt(e),new l.default(e.readBuffer(8)),Je(e));case exports.PayloadType.ContractCall:for(var t=Fe(e),r=je(e),n=je(e),o=[],i=e.readUInt32BE(),s=0;s<i;s++){var a=Bt(e);o.push(a)}return we(t,r,n,o);case exports.PayloadType.SmartContract:return me(je(e),je(e,4,1e5));case exports.PayloadType.PoisonMicroblock:return{type:exports.StacksMessageType.Payload,payloadType:exports.PayloadType.PoisonMicroblock};case exports.PayloadType.Coinbase:return function(e){if(32!=e.byteLength)throw Error("Coinbase buffer size must be 32 bytes");return{type:exports.StacksMessageType.Payload,payloadType:exports.PayloadType.Coinbase,coinbaseBuffer:e}}(e.readBuffer(32))}}function ke(e){switch(e.type){case exports.StacksMessageType.Address:return Ue(e);case exports.StacksMessageType.Principal:return ze(e);case exports.StacksMessageType.LengthPrefixedString:return Ve(e);case exports.StacksMessageType.MemoString:return qe(e);case exports.StacksMessageType.AssetInfo:return Ye(e);case exports.StacksMessageType.PostCondition:return Se(e);case exports.StacksMessageType.PublicKey:return ne(e);case exports.StacksMessageType.LengthPrefixedList:return Qe(e);case exports.StacksMessageType.Payload:return Ae(e);case exports.StacksMessageType.TransactionAuthField:return tr(e);case exports.StacksMessageType.MessageSignature:return Zt(e)}}function Be(e){var t=r.c32addressDecode(e);return{type:exports.StacksMessageType.Address,version:t[0],hash160:t[1]}}function Ee(){return{type:exports.StacksMessageType.Address,version:exports.AddressVersion.MainnetSingleSig,hash160:"0".repeat(40)}}function Me(e,t){return{type:exports.StacksMessageType.Address,version:e,hash160:t}}function Ie(e,t){switch(e){case exports.AddressHashMode.SerializeP2PKH:switch(t){case exports.TransactionVersion.Mainnet:return exports.AddressVersion.MainnetSingleSig;case exports.TransactionVersion.Testnet:return exports.AddressVersion.TestnetSingleSig;default:throw new Error("Unexpected txVersion "+JSON.stringify(t)+" for hashMode "+e)}case exports.AddressHashMode.SerializeP2SH:case exports.AddressHashMode.SerializeP2WPKH:case exports.AddressHashMode.SerializeP2WSH:switch(t){case exports.TransactionVersion.Mainnet:return exports.AddressVersion.MainnetMultiSig;case exports.TransactionVersion.Testnet:return exports.AddressVersion.TestnetMultiSig;default:throw new Error("Unexpected txVersion "+JSON.stringify(t)+" for hashMode "+e)}default:throw new Error("Unexpected hashMode "+JSON.stringify(e))}}function Oe(e,t,r,n){if(0===n.length)throw Error("Invalid number of public keys");if(!(t!==exports.AddressHashMode.SerializeP2PKH&&t!==exports.AddressHashMode.SerializeP2WPKH||1===n.length&&1===r))throw Error("Invalid number of public keys or signatures");if(t===exports.AddressHashMode.SerializeP2WPKH||t===exports.AddressHashMode.SerializeP2WSH)for(var o=0;o<n.length;o++)if(!te(n[o]))throw Error("Public keys must be compressed for segwit");switch(t){case exports.AddressHashMode.SerializeP2PKH:return Me(e,Rt(n[0].data));case exports.AddressHashMode.SerializeP2SH:return Me(e,Vt(r,n.map(ne)));default:throw Error("Not yet implemented: address construction using public keys for hash mode: "+t)}}function Ne(e){return r.c32address(e.version,e.hash160).toString()}function Ue(e){var t=new Et;return t.appendHexString(Nt(e.version,1)),t.appendHexString(e.hash160),t.concatBuffer()}function Fe(e){var t=Ut(e.readBuffer(1).toString("hex")),r=e.readBuffer(20).toString("hex");return{type:exports.StacksMessageType.Address,version:t,hash160:r}}function Le(e){if(e.includes(".")){var t=e.split(".");return He(t[0],t[1])}return Ke(e)}function Ke(e){var t=Be(e);return{type:exports.StacksMessageType.Principal,prefix:exports.PostConditionPrincipalID.Standard,address:t}}function He(e,t){var r=Be(e),n=Re(t);return{type:exports.StacksMessageType.Principal,prefix:exports.PostConditionPrincipalID.Contract,address:r,contractName:n}}function ze(e){var t=new Et;return t.push(Buffer.from([e.prefix])),t.push(Ue(e.address)),e.prefix===exports.PostConditionPrincipalID.Contract&&t.push(Ve(e.contractName)),t.concatBuffer()}function _e(e){var t=e.readUInt8Enum(exports.PostConditionPrincipalID,(function(e){throw new ye("Unexpected Principal payload type: ${n}")})),r=Fe(e);if(t===exports.PostConditionPrincipalID.Standard)return{type:exports.StacksMessageType.Principal,prefix:t,address:r};var n=je(e);return{type:exports.StacksMessageType.Principal,prefix:t,address:r,contractName:n}}function Re(e,t,r){var n=t||1,o=r||128;if(Ft(e,o))throw new Error("String length exceeds maximum bytes "+o.toString());return{type:exports.StacksMessageType.LengthPrefixedString,content:e,lengthPrefixBytes:n,maxLengthBytes:o}}function Ve(e){var t=new Et,r=Buffer.from(e.content);return t.appendHexString(Nt(r.byteLength,e.lengthPrefixBytes)),t.push(r),t.concatBuffer()}function je(e,t,r){var n=Ut(e.readBuffer(t=t||1).toString("hex"));return Re(e.readBuffer(n).toString(),t,null!=r?r:128)}function De(e){return Re(e,4,1e5)}function Ge(e){if(e&&Ft(e,34))throw new Error("Memo exceeds maximum length of "+34..toString()+" bytes");return{type:exports.StacksMessageType.MemoString,content:e}}function qe(e){var t=new Et,r=Buffer.from(e.content),n=Ot(r.toString("hex"),68);return t.push(Buffer.from(n,"hex")),t.concatBuffer()}function Je(e){var t=e.readBuffer(34).toString();return{type:exports.StacksMessageType.MemoString,content:t}}function We(e){var t=e.split(/\.|::/);return Xe(t[0],t[1],t[2])}function Xe(e,t,r){return{type:exports.StacksMessageType.AssetInfo,address:Be(e),contractName:Re(t),assetName:Re(r)}}function Ye(e){var t=new Et;return t.push(Ue(e.address)),t.push(Ve(e.contractName)),t.push(Ve(e.assetName)),t.concatBuffer()}function $e(e){return{type:exports.StacksMessageType.AssetInfo,address:Fe(e),contractName:je(e),assetName:je(e)}}function Ze(e,t){return{type:exports.StacksMessageType.LengthPrefixedList,lengthPrefixBytes:t||4,values:e}}function Qe(e){var t=e.values,r=new Et;r.appendHexString(Nt(t.length,e.lengthPrefixBytes));for(var n=0;n<t.length;n++)r.push(ke(t[n]));return r.concatBuffer()}function et(e,t,r){for(var n=Ut(e.readBuffer(r||4).toString("hex")),o=[],i=0;i<n;i++)switch(t){case exports.StacksMessageType.Address:o.push(Fe(e));break;case exports.StacksMessageType.LengthPrefixedString:o.push(je(e));break;case exports.StacksMessageType.MemoString:o.push(Je(e));break;case exports.StacksMessageType.AssetInfo:o.push($e(e));break;case exports.StacksMessageType.PostCondition:o.push(be(e));break;case exports.StacksMessageType.PublicKey:o.push(se(e));break;case exports.StacksMessageType.TransactionAuthField:o.push(rr(e))}return Ze(o,r)}function tt(e){if(e.type===exports.ClarityType.PrincipalStandard)return Ne(e.address);if(e.type===exports.ClarityType.PrincipalContract)return Ne(e.address)+"."+e.contractName.content;throw new Error("Unexpected principal data: "+JSON.stringify(e))}function rt(e){var t=Be(e);return{type:exports.ClarityType.PrincipalStandard,address:t}}function nt(e){return{type:exports.ClarityType.PrincipalStandard,address:e}}function ot(e,t){return it(Be(e),Re(t))}function it(e,t){if(Buffer.byteLength(t.content)>=128)throw new Error("Contract name must be less than 128 bytes");return{type:exports.ClarityType.PrincipalContract,address:e,contractName:t}}function st(e){switch(e.type){case exports.ClarityType.BoolTrue:return!0;case exports.ClarityType.BoolFalse:return!1;case exports.ClarityType.Int:return e.value.fromTwos(128).toNumber();case exports.ClarityType.UInt:return e.value.toNumber();case exports.ClarityType.Buffer:return"0x"+e.buffer.toString("hex");case exports.ClarityType.OptionalNone:return null;case exports.ClarityType.OptionalSome:case exports.ClarityType.ResponseErr:case exports.ClarityType.ResponseOk:return at(e.value);case exports.ClarityType.PrincipalStandard:case exports.ClarityType.PrincipalContract:return tt(e);case exports.ClarityType.List:return e.list.map((function(e){return at(e)}));case exports.ClarityType.Tuple:var t={};return Object.keys(e.data).forEach((function(r){t[r]=at(e.data[r])})),t;case exports.ClarityType.StringASCII:case exports.ClarityType.StringUTF8:return e.data}}function at(e){switch(e.type){case exports.ClarityType.ResponseErr:return{type:pt(e),value:st(e),success:!1};case exports.ClarityType.ResponseOk:return{type:pt(e),value:st(e),success:!0};default:return{type:pt(e),value:st(e)}}}function pt(e){switch(e.type){case exports.ClarityType.BoolTrue:case exports.ClarityType.BoolFalse:return"bool";case exports.ClarityType.Int:return"int";case exports.ClarityType.UInt:return"uint";case exports.ClarityType.Buffer:return"(buff "+e.buffer.length+")";case exports.ClarityType.OptionalNone:return"(optional none)";case exports.ClarityType.OptionalSome:return"(optional "+pt(e.value)+")";case exports.ClarityType.ResponseErr:return"(response UnknownType "+pt(e.value)+")";case exports.ClarityType.ResponseOk:return"(response "+pt(e.value)+" UnknownType)";case exports.ClarityType.PrincipalStandard:case exports.ClarityType.PrincipalContract:return"principal";case exports.ClarityType.List:return"(list "+e.list.length+" "+pt(e.list[0])+")";case exports.ClarityType.Tuple:return"(tuple "+Object.keys(e.data).map((function(t){return"("+t+" "+pt(e.data[t])+")"})).join(" ")+")";case exports.ClarityType.StringASCII:return"(string-ascii "+Buffer.from(e.data,"ascii").length+")";case exports.ClarityType.StringUTF8:return"(string-utf8 "+Buffer.from(e.data,"utf8").length+")"}}(fe=exports.ClarityType||(exports.ClarityType={}))[fe.Int=0]="Int",fe[fe.UInt=1]="UInt",fe[fe.Buffer=2]="Buffer",fe[fe.BoolTrue=3]="BoolTrue",fe[fe.BoolFalse=4]="BoolFalse",fe[fe.PrincipalStandard=5]="PrincipalStandard",fe[fe.PrincipalContract=6]="PrincipalContract",fe[fe.ResponseOk=7]="ResponseOk",fe[fe.ResponseErr=8]="ResponseErr",fe[fe.OptionalNone=9]="OptionalNone",fe[fe.OptionalSome=10]="OptionalSome",fe[fe.List=11]="List",fe[fe.Tuple=12]="Tuple",fe[fe.StringASCII=13]="StringASCII",fe[fe.StringUTF8=14]="StringUTF8";var ut=function(){return{type:exports.ClarityType.BoolTrue}},ct=function(){return{type:exports.ClarityType.BoolFalse}},dt=function(e){var t=new l.default(e).toTwos(128);if(t.bitLength()>128)throw new Error("Cannot construct clarity integer from value greater than INT_SIZE bits");return{type:exports.ClarityType.Int,value:t}},ft=function(e){var t=new l.default(e).toTwos(128);if(t.isNeg())throw new Error("Cannot construct unsigned clarity integer from negative value");if(t.bitLength()>128)throw new Error("Cannot construct unsigned clarity integer from value greater than 128 bits");return{type:exports.ClarityType.UInt,value:t}},lt=function(e){if(e.length>1e6)throw new Error("Cannot construct clarity buffer that is greater than 1MB");return{type:exports.ClarityType.Buffer,buffer:e}},yt=function(e){return lt(Buffer.from(e))},ht=function(){return{type:exports.ClarityType.OptionalNone}},xt=function(e){return{type:exports.ClarityType.OptionalSome,value:e}};function gt(e){return{type:exports.ClarityType.ResponseErr,value:e}}function Tt(e){return{type:exports.ClarityType.ResponseOk,value:e}}function Ct(e){return{type:exports.ClarityType.List,list:e}}function St(e){for(var t in e)if(!jt(t))throw new Error('"'+t+'" is not a valid Clarity name');return{type:exports.ClarityType.Tuple,data:e}}var bt=function(e){return{type:exports.ClarityType.StringASCII,data:e}},vt=function(e){return{type:exports.ClarityType.StringUTF8,data:e}};function wt(e,t){var r=Buffer.from([e]);return Buffer.concat([r,t])}function mt(e,t){var r=new Et,n=Buffer.from(e.data,t),o=Buffer.alloc(4);return o.writeUInt32BE(n.length,0),r.push(o),r.push(n),wt(e.type,r.concatBuffer())}function At(e){switch(e.type){case exports.ClarityType.BoolTrue:case exports.ClarityType.BoolFalse:return function(e){return Buffer.from([e.type])}(e);case exports.ClarityType.OptionalNone:case exports.ClarityType.OptionalSome:return(t=e).type===exports.ClarityType.OptionalNone?Buffer.from([t.type]):wt(t.type,At(t.value));case exports.ClarityType.Buffer:return function(e){var t=Buffer.alloc(4);return t.writeUInt32BE(e.buffer.length,0),wt(e.type,Buffer.concat([t,e.buffer]))}(e);case exports.ClarityType.Int:case exports.ClarityType.UInt:return function(e){var t=e.value.toArrayLike(Buffer,"be",16);return wt(e.type,t)}(e);case exports.ClarityType.PrincipalStandard:return function(e){return wt(e.type,Ue(e.address))}(e);case exports.ClarityType.PrincipalContract:return function(e){return wt(e.type,Buffer.concat([Ue(e.address),Ve(e.contractName)]))}(e);case exports.ClarityType.ResponseOk:case exports.ClarityType.ResponseErr:return function(e){return wt(e.type,At(e.value))}(e);case exports.ClarityType.List:return function(e){var t=new Et,r=Buffer.alloc(4);r.writeUInt32BE(e.list.length,0),t.push(r);for(var n,o=W(e.list);!(n=o()).done;){var i=At(n.value);t.push(i)}return wt(e.type,t.concatBuffer())}(e);case exports.ClarityType.Tuple:return function(e){var t=new Et,r=Buffer.alloc(4);r.writeUInt32BE(Object.keys(e.data).length,0),t.push(r);for(var n,o=W(Object.keys(e.data).sort((function(e,t){var r=Buffer.from(e),n=Buffer.from(t);return r.compare(n)})));!(n=o()).done;){var i=n.value,s=Re(i);t.push(Ve(s));var a=At(e.data[i]);t.push(a)}return wt(e.type,t.concatBuffer())}(e);case exports.ClarityType.StringASCII:return function(e){return mt(e,"ascii")}(e);case exports.ClarityType.StringUTF8:return function(e){return mt(e,"utf8")}(e);default:throw new le("Unable to serialize. Invalid Clarity Value.")}var t}var Pt=new Map,kt=function(){function e(e){this.smartBuffer=Buffer.isBuffer(e)?new o.SmartBuffer({buff:e}):new o.SmartBuffer(e)}e.fromBuffer=function(t){return new e({buff:t})};var t=e.prototype;return t.readBuffer=function(e){return this.smartBuffer.readBuffer(e)},t.readUInt32BE=function(e){return this.smartBuffer.readUInt32BE(e)},t.readUInt8=function(){return this.smartBuffer.readUInt8()},t.readUInt16BE=function(){return this.smartBuffer.readUInt16BE()},t.readBigUIntLE=function(e){var t=Buffer.from(this.smartBuffer.readBuffer(e)).reverse().toString();return BigInt("0x"+t)},t.readBigUIntBE=function(e){var t=this.smartBuffer.readBuffer(e).toString("hex");return BigInt("0x"+t)},t.readBigUInt64BE=function(){return this.smartBuffer.readBigUInt64BE()},t.readString=function(e,t){return this.smartBuffer.readString(e,t)},t.readUInt8Enum=function(e,t){var r=this.smartBuffer.readUInt8();if(function e(t,r){var n=Pt.get(t);if(void 0!==n)return n(r);var o=function(e){var t=Object.values(e).filter((function(e){return"number"==typeof e})),r=new Set(t);return function(e){return r.has(e)}}(t);return Pt.set(t,o),e(t,r)}(e,r))return r;throw t(r)},H(e,[{key:"readOffset",get:function(){return this.smartBuffer.readOffset},set:function(e){this.smartBuffer.readOffset=e}},{key:"internalBuffer",get:function(){return this.smartBuffer.internalBuffer}}]),e}();function Bt(e){var t=Buffer.isBuffer(e)?new kt(e):e;switch(t.readUInt8Enum(exports.ClarityType,(function(e){throw new ye("Cannot recognize Clarity Type: "+e)}))){case exports.ClarityType.Int:return dt(t.readBuffer(16));case exports.ClarityType.UInt:return ft(t.readBuffer(16));case exports.ClarityType.Buffer:var r=t.readUInt32BE();return lt(t.readBuffer(r));case exports.ClarityType.BoolTrue:return ut();case exports.ClarityType.BoolFalse:return ct();case exports.ClarityType.PrincipalStandard:return nt(Fe(t));case exports.ClarityType.PrincipalContract:return it(Fe(t),je(t));case exports.ClarityType.ResponseOk:return Tt(Bt(t));case exports.ClarityType.ResponseErr:return gt(Bt(t));case exports.ClarityType.OptionalNone:return ht();case exports.ClarityType.OptionalSome:return xt(Bt(t));case exports.ClarityType.List:for(var n=t.readUInt32BE(),o=[],i=0;i<n;i++)o.push(Bt(t));return Ct(o);case exports.ClarityType.Tuple:for(var s=t.readUInt32BE(),a={},p=0;p<s;p++){var u=je(t).content;if(void 0===u)throw new ye('"content" is undefined');a[u]=Bt(t)}return St(a);case exports.ClarityType.StringASCII:var c=t.readUInt32BE(),d=t.readBuffer(c).toString("ascii");return bt(d);case exports.ClarityType.StringUTF8:var f=t.readUInt32BE(),l=t.readBuffer(f).toString("utf8");return vt(l);default:throw new ye("Unable to deserialize Clarity Value from buffer. Could not find valid Clarity Type.")}}var Et=function(){function e(){this._value=[]}var t=e.prototype;return t.appendHexString=function(e){this.value.push(Buffer.from(e,"hex"))},t.push=function(e){return this._value.push(e)},t.appendByte=function(e){if(!Number.isInteger(e)||e<0||e>255)throw new Error("Value "+e+" is not a valid byte");this.value.push(Buffer.from([e]))},t.concatBuffer=function(){return Buffer.concat(this.value)},H(e,[{key:"value",get:function(){return this._value}}]),e}(),Mt=function(e){return e.length%2==0?e:"0"+e},It=function(e,t){return e.padStart(t,"0")},Ot=function(e,t){return e.padEnd(t,"0")},Nt=function(e,t){return void 0===t&&(t=8),e.toString(16).padStart(2*t,"0")},Ut=function(e){return parseInt(e,16)},Ft=function(e,t){return!!e&&Buffer.from(e).length>t};function Lt(e){return g.default(e)}function Kt(e,t){var r=Lt(e);return delete r[t],r}var Ht=function(e){function t(){var t;return t=e.call(this)||this,Object.assign(q(t),{_ah:573645204,_al:4230739756,_bh:2673172387,_bl:3360449730,_ch:596883563,_cl:1867755857,_dh:2520282905,_dl:1497426621,_eh:2519219938,_el:2827943907,_fh:3193839141,_fl:1401305490,_gh:721525244,_gl:746961066,_hh:246885852,_hl:2177182882}),t}return _(t,e),t.prototype.digest=function(t){var r=e.prototype.digest.call(this).slice(0,32);return t?r.toString(t):r},t}(e.sha512),zt=function(e){return(new Ht).update(e).digest("hex")},_t=function(t){var r=(new e.sha256).update(t).digest();return Buffer.from((new y.default).update(r).digest())},Rt=function(e){return _t(e).toString("hex")},Vt=function(e,t){if(e>15||t.length>15)throw Error("P2SH multisig address can only contain up to 15 public keys");var r=new Et;r.appendByte(80+e),t.forEach((function(e){r.appendByte(e.length),r.push(e)})),r.appendByte(80+t.length),r.appendByte(174);var n=r.concatBuffer();return _t(n).toString("hex")};function jt(e){return/^[a-zA-Z]([a-zA-Z0-9]|[-_!?+<>=/*])*$|^[-+=/*]$|^[<>]=?$/.test(e)&&e.length<128}function Dt(){return(Dt=L(Y.mark((function e(t,r){var n;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.assign({referrer:"no-referrer",referrerPolicy:"no-referrer"},r),e.next=4,x.default(t,n);case 4:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gt(e){return"0x"+At(e).toString("hex")}function qt(e){var t=e.startsWith("0x")?e.slice(2):e;return Bt(Buffer.from(t,"hex"))}var Jt,Wt=function(e){if(e.okay)return qt(e.result);throw new Error(e.cause)},Xt=function(){function e(){}return e.deserialize=function(e){var t=new this;return t.deserialize(e),t},e}();function Yt(e){if(65!=Buffer.from(e,"hex").byteLength)throw Error("Invalid signature");return{type:exports.StacksMessageType.MessageSignature,data:e}}function $t(){return{type:exports.StacksMessageType.MessageSignature,data:Buffer.alloc(65,0).toString("hex")}}function Zt(e){var t=new Et;return t.appendHexString(e.data),t.concatBuffer()}function Qt(e){return Yt(e.readBuffer(65).toString("hex"))}function er(e,t){return{pubKeyEncoding:e,type:exports.StacksMessageType.TransactionAuthField,contents:t}}function tr(e){var t=new Et;switch(e.contents.type){case exports.StacksMessageType.PublicKey:e.pubKeyEncoding==exports.PubKeyEncoding.Compressed?(t.appendByte(Jt.PublicKeyCompressed),t.push(ne(e.contents))):(t.appendByte(Jt.PublicKeyUncompressed),t.push(ne(ie(e.contents.data))));break;case exports.StacksMessageType.MessageSignature:e.pubKeyEncoding==exports.PubKeyEncoding.Compressed?t.appendByte(Jt.SignatureCompressed):t.appendByte(Jt.SignatureUncompressed),t.push(Zt(e.contents))}return t.concatBuffer()}function rr(e){var t=e.readUInt8Enum(Jt,(function(e){throw new ye("Could not read "+e+" as AuthFieldType")}));switch(t){case Jt.PublicKeyCompressed:return er(exports.PubKeyEncoding.Compressed,se(e));case Jt.PublicKeyUncompressed:return er(exports.PubKeyEncoding.Uncompressed,se(e));case Jt.SignatureCompressed:return er(exports.PubKeyEncoding.Compressed,Qt(e));case Jt.SignatureUncompressed:return er(exports.PubKeyEncoding.Uncompressed,Qt(e));default:throw new Error("Unknown auth field type: "+JSON.stringify(t))}}function nr(e,t,r,n){return{hashMode:e,signer:Oe(0,e,1,[Z(t)]).hash160,nonce:r,fee:n,keyEncoding:te(Z(t))?exports.PubKeyEncoding.Compressed:exports.PubKeyEncoding.Uncompressed,signature:$t()}}function or(e,t,r,n,o){return{hashMode:e,signer:Oe(0,e,t,r.map(Z)).hash160,nonce:n,fee:o,fields:[],signaturesRequired:t}}function ir(e){return"signature"in e}function sr(e){var t=Lt(e);return t.nonce=new l.default(0),t.fee=new l.default(0),ir(t)?t.signature=$t():t.fields=[],t}function ar(e){var t=new Et;return t.appendByte(e.hashMode),t.appendHexString(e.signer),t.push(e.nonce.toArrayLike(Buffer,"be",8)),t.push(e.fee.toArrayLike(Buffer,"be",8)),t.appendByte(e.keyEncoding),t.push(Zt(e.signature)),t.concatBuffer()}function pr(e){var t=new Et;t.appendByte(e.hashMode),t.appendHexString(e.signer),t.push(e.nonce.toArrayLike(Buffer,"be",8)),t.push(e.fee.toArrayLike(Buffer,"be",8));var r=Ze(e.fields);t.push(Qe(r));var n=Buffer.alloc(2);return n.writeUInt16BE(e.signaturesRequired,0),t.push(n),t.concatBuffer()}function ur(e,t){return{hashMode:e,signer:t.readBuffer(20).toString("hex"),nonce:new l.default(t.readBuffer(8).toString("hex"),16),fee:new l.default(t.readBuffer(8).toString("hex"),16),keyEncoding:t.readUInt8Enum(exports.PubKeyEncoding,(function(e){throw new ye("Could not parse "+e+" as PubKeyEncoding")})),signature:Qt(t)}}function cr(e,t){return{hashMode:e,signer:t.readBuffer(20).toString("hex"),nonce:new l.default(t.readBuffer(8).toString("hex"),16),fee:new l.default(t.readBuffer(8).toString("hex"),16),fields:et(t,exports.StacksMessageType.TransactionAuthField).values,signaturesRequired:t.readUInt16BE()}}function dr(e){return ir(e)?ar(e):pr(e)}function fr(e){var t=e.readUInt8Enum(exports.AddressHashMode,(function(e){throw new ye("Could not parse "+e+" as AddressHashMode")}));return t===exports.AddressHashMode.SerializeP2PKH||t===exports.AddressHashMode.SerializeP2WPKH?ur(t,e):cr(t,e)}function lr(e,t,r,n){var o=e+Buffer.from([t]).toString("hex")+r.toArrayLike(Buffer,"be",8).toString("hex")+n.toArrayLike(Buffer,"be",8).toString("hex");if(49!==Buffer.from(o,"hex").byteLength)throw Error("Invalid signature hash length");return zt(Buffer.from(o,"hex"))}function yr(e,t,r){var n=te(t)?exports.PubKeyEncoding.Compressed:exports.PubKeyEncoding.Uncompressed,o=e+Mt(n.toString(16))+r.data,i=Buffer.from(o,"hex");if(i.byteLength>98)throw Error("Invalid signature hash length");return zt(i)}function hr(e,t,r,n,o){var i=lr(e,t,r,n),s=pe(o,i);return{nextSig:s,nextSigHash:yr(i,ce(o),s)}}function xr(e,t,r,n,o,i){var s=lr(e,t,r,n),a=Z(Q(s,i,o));return{pubKey:a,nextSigHash:yr(s,a,i)}}!function(e){e[e.PublicKeyCompressed=0]="PublicKeyCompressed",e[e.PublicKeyUncompressed=1]="PublicKeyUncompressed",e[e.SignatureCompressed=2]="SignatureCompressed",e[e.SignatureUncompressed=3]="SignatureUncompressed"}(Jt||(Jt={}));var gr,Tr=function(e){function t(t,r,n){var o;return(o=e.call(this)||this).authType=t,o.spendingCondition=r,o.sponsorSpendingCondition=n,o}_(t,e);var r=t.prototype;return r.intoInitialSighashAuth=function(){if(this.spendingCondition)switch(this.authType){case exports.AuthType.Standard:return new t(exports.AuthType.Standard,sr(this.spendingCondition));case exports.AuthType.Sponsored:return new t(exports.AuthType.Sponsored,sr(this.spendingCondition),((e=nr(exports.AddressHashMode.SerializeP2PKH,"",new l.default(0),new l.default(0))).signer=Ee().hash160,e.keyEncoding=exports.PubKeyEncoding.Compressed,e.signature=$t(),e));default:throw new xe("Unexpected authorization type for signing")}var e;throw new Error("Authorization missing SpendingCondition")},r.setFee=function(e){switch(this.authType){case exports.AuthType.Standard:this.spendingCondition.fee=e;break;case exports.AuthType.Sponsored:this.sponsorSpendingCondition.fee=e}},r.getFee=function(){switch(this.authType){case exports.AuthType.Standard:return this.spendingCondition.fee;case exports.AuthType.Sponsored:return this.sponsorSpendingCondition.fee;default:return 0}},r.setNonce=function(e){this.spendingCondition.nonce=e},r.setSponsorNonce=function(e){this.sponsorSpendingCondition.nonce=e},r.setSponsor=function(e){this.sponsorSpendingCondition=e},r.verifyOrigin=function(e){switch(this.authType){case exports.AuthType.Standard:case exports.AuthType.Sponsored:return function(e,t,r){return ir(e)?function(e,t,r){return xr(t,r,e.fee,e.nonce,e.keyEncoding,e.signature).nextSigHash}(e,t,r):""}(this.spendingCondition,e,exports.AuthType.Standard);default:throw new xe("Invalid origin auth type")}},r.serialize=function(){var e=new Et;if(void 0===this.authType)throw new le('"authType" is undefined');switch(e.appendByte(this.authType),this.authType){case exports.AuthType.Standard:if(void 0===this.spendingCondition)throw new le('"spendingCondition" is undefined');e.push(dr(this.spendingCondition));break;case exports.AuthType.Sponsored:if(void 0===this.spendingCondition)throw new le('"spendingCondition" is undefined');if(void 0===this.sponsorSpendingCondition)throw new le('"spendingCondition" is undefined');e.push(dr(this.spendingCondition)),e.push(dr(this.sponsorSpendingCondition));break;default:throw new le("Unexpected transaction AuthType while serializing: "+JSON.stringify(this.authType))}return e.concatBuffer()},r.deserialize=function(e){switch(this.authType=e.readUInt8Enum(exports.AuthType,(function(e){throw new ye("Could not parse "+e+" as AuthType")})),this.authType){case exports.AuthType.Standard:this.spendingCondition=fr(e);break;case exports.AuthType.Sponsored:this.spendingCondition=fr(e),this.sponsorSpendingCondition=fr(e);break;default:throw new ye("Unexpected transaction AuthType while deserializing: "+JSON.stringify(this.authType))}},t}(Xt),Cr=function(e){function t(t){return e.call(this,exports.AuthType.Standard,t)||this}return _(t,e),t}(Tr),Sr=function(e){function t(t,r){var n=r;return n||(n=nr(exports.AddressHashMode.SerializeP2PKH,"0".repeat(66),new l.default(0),new l.default(0))),e.call(this,exports.AuthType.Sponsored,t,n)||this}return _(t,e),t}(Tr),br=function(){function e(e,t,r,n,o,i,s){if(this.version=e,this.auth=t,this.payload=r,this.chainId=null!=s?s:v,this.postConditionMode=null!=o?o:exports.PostConditionMode.Deny,this.postConditions=null!=n?n:Ze([]),i)this.anchorMode=i;else switch(r.payloadType){case exports.PayloadType.Coinbase:case exports.PayloadType.PoisonMicroblock:this.anchorMode=exports.AnchorMode.OnChainOnly;break;case exports.PayloadType.ContractCall:case exports.PayloadType.SmartContract:case exports.PayloadType.TokenTransfer:this.anchorMode=exports.AnchorMode.Any}}var t=e.prototype;return t.signBegin=function(){var e=Lt(this);return e.auth=e.auth.intoInitialSighashAuth(),e.txid()},t.verifyBegin=function(){var e=Lt(this);return e.auth=e.auth.intoInitialSighashAuth(),e.txid()},t.createTxWithSignature=function(e){var t="string"==typeof e?e:e.toString("hex"),r=Lt(this);if(!r.auth.spendingCondition)throw new Error("Cannot set signature on transaction without spending condition");return r.auth.spendingCondition.signature=Yt(t),r},t.verifyOrigin=function(){return this.auth.verifyOrigin(this.verifyBegin())},t.signNextOrigin=function(e,t){if(void 0===this.auth.spendingCondition)throw new Error('"auth.spendingCondition" is undefined');if(void 0===this.auth.authType)throw new Error('"auth.authType" is undefined');return this.signAndAppend(this.auth.spendingCondition,e,exports.AuthType.Standard,t)},t.signNextSponsor=function(e,t){if(void 0===this.auth.sponsorSpendingCondition)throw new Error('"auth.spendingCondition" is undefined');if(void 0===this.auth.authType)throw new Error('"auth.authType" is undefined');return this.signAndAppend(this.auth.sponsorSpendingCondition,e,exports.AuthType.Sponsored,t)},t.appendPubkey=function(e){var t=this.auth.spendingCondition;if(!t||ir(t))throw new Error("Can't append public key to a singlesig condition");var r=te(e);t.fields.push(er(r?exports.PubKeyEncoding.Compressed:exports.PubKeyEncoding.Uncompressed,e))},t.signAndAppend=function(e,t,r,n){var o=hr(t,r,e.fee,e.nonce,n),i=o.nextSig,s=o.nextSigHash;if(ir(e))e.signature=i;else{var a=n.data.toString("hex").endsWith("01");e.fields.push(er(a?exports.PubKeyEncoding.Compressed:exports.PubKeyEncoding.Uncompressed,i))}return s},t.txid=function(){var e=this.serialize();return zt(e)},t.setSponsor=function(e){if(this.auth.authType!=exports.AuthType.Sponsored)throw new xe("Cannot sponsor sign a non-sponsored transaction");this.auth.setSponsor(e)},t.setFee=function(e){this.auth.setFee(e)},t.setNonce=function(e){this.auth.setNonce(e)},t.setSponsorNonce=function(e){this.auth.setSponsorNonce(e)},t.serialize=function(){if(void 0===this.version)throw new le('"version" is undefined');if(void 0===this.chainId)throw new le('"chainId" is undefined');if(void 0===this.auth)throw new le('"auth" is undefined');if(void 0===this.anchorMode)throw new le('"anchorMode" is undefined');if(void 0===this.payload)throw new le('"payload" is undefined');var e=new Et;e.appendByte(this.version);var t=Buffer.alloc(4);return t.writeUInt32BE(this.chainId,0),e.push(t),e.push(this.auth.serialize()),e.appendByte(this.anchorMode),e.appendByte(this.postConditionMode),e.push(Qe(this.postConditions)),e.push(Ae(this.payload)),e.concatBuffer()},e}(),vr=function(){function e(e){this.transaction=e,this.sigHash=e.signBegin(),this.originDone=!1,this.checkOversign=!0,this.checkOverlap=!0}e.createSponsorSigner=function(e,t){if(e.auth.authType!=exports.AuthType.Sponsored)throw new xe("Cannot add sponsor to non-sponsored transaction");var r=Lt(e);r.setSponsor(t);var n=r.verifyOrigin(),o=new this(r);return o.originDone=!0,o.sigHash=n,o.checkOversign=!0,o.checkOverlap=!0,o};var t=e.prototype;return t.signOrigin=function(e){if(this.checkOverlap&&this.originDone)throw new xe("Cannot sign origin after sponsor key");if(void 0===this.transaction.auth)throw new xe('"transaction.auth" is undefined');if(void 0===this.transaction.auth.spendingCondition)throw new xe('"transaction.auth.spendingCondition" is undefined');if(!ir(this.transaction.auth.spendingCondition)){var t=this.transaction.auth.spendingCondition;if(this.checkOversign&&t.fields.length>=t.signaturesRequired)throw new Error("Origin would have too many signatures")}var r=this.transaction.signNextOrigin(this.sigHash,e);this.sigHash=r},t.appendOrigin=function(e){if(this.checkOverlap&&this.originDone)throw Error("Cannot append public key to origin after sponsor key");if(void 0===this.transaction.auth)throw new Error('"transaction.auth" is undefined');if(void 0===this.transaction.auth.spendingCondition)throw new Error('"transaction.auth.spendingCondition" is undefined');this.transaction.appendPubkey(e)},t.signSponsor=function(e){if(void 0===this.transaction.auth)throw new xe('"transaction.auth" is undefined');if(void 0===this.transaction.auth.sponsorSpendingCondition)throw new xe('"transaction.auth.spendingCondition" is undefined');var t=this.transaction.signNextSponsor(this.sigHash,e);this.sigHash=t,this.originDone=!0},t.getTxInComplete=function(){return Lt(this.transaction)},t.resume=function(e){this.transaction=Lt(e),this.sigHash=e.signBegin()},e}();(gr=exports.ClarityAbiTypeId||(exports.ClarityAbiTypeId={}))[gr.ClarityAbiTypeUInt128=1]="ClarityAbiTypeUInt128",gr[gr.ClarityAbiTypeInt128=2]="ClarityAbiTypeInt128",gr[gr.ClarityAbiTypeBool=3]="ClarityAbiTypeBool",gr[gr.ClarityAbiTypePrincipal=4]="ClarityAbiTypePrincipal",gr[gr.ClarityAbiTypeNone=5]="ClarityAbiTypeNone",gr[gr.ClarityAbiTypeBuffer=6]="ClarityAbiTypeBuffer",gr[gr.ClarityAbiTypeResponse=7]="ClarityAbiTypeResponse",gr[gr.ClarityAbiTypeOptional=8]="ClarityAbiTypeOptional",gr[gr.ClarityAbiTypeTuple=9]="ClarityAbiTypeTuple",gr[gr.ClarityAbiTypeList=10]="ClarityAbiTypeList",gr[gr.ClarityAbiTypeStringAscii=11]="ClarityAbiTypeStringAscii",gr[gr.ClarityAbiTypeStringUtf8=12]="ClarityAbiTypeStringUtf8",gr[gr.ClarityAbiTypeTraitReference=13]="ClarityAbiTypeTraitReference";var wr=function(e){return"string"==typeof e},mr=function(e){return void 0!==e.buffer},Ar=function(e){return void 0!==e["string-ascii"]},Pr=function(e){return void 0!==e["string-utf8"]},kr=function(e){return void 0!==e.response},Br=function(e){return void 0!==e.optional},Er=function(e){return void 0!==e.tuple},Mr=function(e){return void 0!==e.list};function Ir(e){if(wr(e)){if("uint128"===e)return{id:exports.ClarityAbiTypeId.ClarityAbiTypeUInt128,type:e};if("int128"===e)return{id:exports.ClarityAbiTypeId.ClarityAbiTypeInt128,type:e};if("bool"===e)return{id:exports.ClarityAbiTypeId.ClarityAbiTypeBool,type:e};if("principal"===e)return{id:exports.ClarityAbiTypeId.ClarityAbiTypePrincipal,type:e};if("trait_reference"===e)return{id:exports.ClarityAbiTypeId.ClarityAbiTypeTraitReference,type:e};if("none"===e)return{id:exports.ClarityAbiTypeId.ClarityAbiTypeNone,type:e};throw new Error("Unexpected Clarity ABI type primitive: "+JSON.stringify(e))}if(mr(e))return{id:exports.ClarityAbiTypeId.ClarityAbiTypeBuffer,type:e};if(kr(e))return{id:exports.ClarityAbiTypeId.ClarityAbiTypeResponse,type:e};if(Br(e))return{id:exports.ClarityAbiTypeId.ClarityAbiTypeOptional,type:e};if(Er(e))return{id:exports.ClarityAbiTypeId.ClarityAbiTypeTuple,type:e};if(Mr(e))return{id:exports.ClarityAbiTypeId.ClarityAbiTypeList,type:e};if(Ar(e))return{id:exports.ClarityAbiTypeId.ClarityAbiTypeStringAscii,type:e};if(Pr(e))return{id:exports.ClarityAbiTypeId.ClarityAbiTypeStringUtf8,type:e};throw new Error("Unexpected Clarity ABI type: "+JSON.stringify(e))}function Or(e){if(wr(e))return"int128"===e?"int":"uint128"===e?"uint":e;if(mr(e))return"(buff "+e.buffer.length+")";if(Ar(e))return"(string-ascii "+e["string-ascii"].length+")";if(Pr(e))return"(string-utf8 "+e["string-utf8"].length+")";if(kr(e))return"(response "+Or(e.response.ok)+" "+Or(e.response.error)+")";if(Br(e))return"(optional "+Or(e.optional)+")";if(Er(e))return"(tuple "+e.tuple.map((function(e){return"("+e.name+" "+Or(e.type)+")"})).join(" ")+")";if(Mr(e))return"(list "+e.list.length+" "+Or(e.list.type)+")";throw new Error("Type string unsupported for Clarity type: "+JSON.stringify(e))}function Nr(e,t){var r=Ir(t);switch(e.type){case exports.ClarityType.BoolTrue:case exports.ClarityType.BoolFalse:return r.id===exports.ClarityAbiTypeId.ClarityAbiTypeBool;case exports.ClarityType.Int:return r.id===exports.ClarityAbiTypeId.ClarityAbiTypeInt128;case exports.ClarityType.UInt:return r.id===exports.ClarityAbiTypeId.ClarityAbiTypeUInt128;case exports.ClarityType.Buffer:return r.id===exports.ClarityAbiTypeId.ClarityAbiTypeBuffer&&r.type.buffer.length>=e.buffer.length;case exports.ClarityType.StringASCII:return r.id===exports.ClarityAbiTypeId.ClarityAbiTypeStringAscii&&r.type["string-ascii"].length>=e.data.length;case exports.ClarityType.StringUTF8:return r.id===exports.ClarityAbiTypeId.ClarityAbiTypeStringUtf8&&r.type["string-utf8"].length>=e.data.length;case exports.ClarityType.OptionalNone:return r.id===exports.ClarityAbiTypeId.ClarityAbiTypeNone||r.id===exports.ClarityAbiTypeId.ClarityAbiTypeOptional;case exports.ClarityType.OptionalSome:return r.id===exports.ClarityAbiTypeId.ClarityAbiTypeOptional&&Nr(e.value,r.type.optional);case exports.ClarityType.ResponseErr:return r.id===exports.ClarityAbiTypeId.ClarityAbiTypeResponse&&Nr(e.value,r.type.response.error);case exports.ClarityType.ResponseOk:return r.id===exports.ClarityAbiTypeId.ClarityAbiTypeResponse&&Nr(e.value,r.type.response.ok);case exports.ClarityType.PrincipalContract:return r.id===exports.ClarityAbiTypeId.ClarityAbiTypePrincipal||r.id===exports.ClarityAbiTypeId.ClarityAbiTypeTraitReference;case exports.ClarityType.PrincipalStandard:return r.id===exports.ClarityAbiTypeId.ClarityAbiTypePrincipal;case exports.ClarityType.List:return r.id==exports.ClarityAbiTypeId.ClarityAbiTypeList&&r.type.list.length===e.list.length&&e.list.every((function(e){return Nr(e,r.type.list.type)}));case exports.ClarityType.Tuple:if(r.id==exports.ClarityAbiTypeId.ClarityAbiTypeTuple){for(var n=Lt(e.data),o=0;o<r.type.tuple.length;o++){var i=r.type.tuple[o],s=i.name,a=n[s];if(!a)return!1;if(!Nr(a,i.type))return!1;delete n[s]}return!0}return!1;default:return!1}}function Ur(e,t){var r=t.functions.filter((function(t){return t.name===e.functionName.content}));if(1===r.length){var n=r[0].args;if(e.functionArgs.length!==n.length)throw new Error("Clarity function expects "+n.length+" argument(s) but received "+e.functionArgs.length);for(var o=0;o<e.functionArgs.length;o++){var i=e.functionArgs[o],s=n[o];if(!Nr(i,s.type))throw new Error("Clarity function `"+e.functionName.content+"` expects argument "+(o+1)+" to be of type "+Or(s.type)+", not "+pt(i))}return!0}throw 0===r.length?new Error("ABI doesn't contain a function with the name "+e.functionName.content):new Error("Malformed ABI. Contains multiple functions with the name "+e.functionName.content)}function Fr(e,t){return Lr.apply(this,arguments)}function Lr(){return(Lr=L(Y.mark((function e(t,r){var n,o,i,s;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new u.StacksMainnet,o=r?r.getAccountApiUrl(t):n.getAccountApiUrl(t),e.next=4,c.fetchPrivate(o);case 4:if((i=e.sent).ok){e.next=16;break}return s="",e.prev=7,e.next=10,i.text();case 10:s=e.sent,e.next=15;break;case 13:e.prev=13,e.t0=e.catch(7);case 15:throw new Error("Error fetching nonce. Response "+i.status+": "+i.statusText+". Attempted to fetch "+o+' and failed with the message: "'+s+'"');case 16:return e.next=18,i.json();case 18:return e.abrupt("return",new l.default(e.sent.nonce));case 20:case"end":return e.stop()}}),e,null,[[7,13]])})))).apply(this,arguments)}function Kr(e,t){return Hr.apply(this,arguments)}function Hr(){return(Hr=L(Y.mark((function e(t,r){var n,o,i,s,a,p,d,f;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.payload.payloadType===exports.PayloadType.TokenTransfer){e.next=2;break}throw new Error("Transaction fee estimation only possible with "+exports.PayloadType[exports.PayloadType.TokenTransfer]+" transactions. Invoked with: "+exports.PayloadType[t.payload.payloadType]);case 2:return n={method:"GET",headers:{Accept:"application/text"}},o=new u.StacksMainnet,i=r?r.getTransferFeeEstimateApiUrl():o.getTransferFeeEstimateApiUrl(),e.next=8,c.fetchPrivate(i,n);case 8:if((s=e.sent).ok){e.next=20;break}return a="",e.prev=11,e.next=14,s.text();case 14:a=e.sent,e.next=19;break;case 17:e.prev=17,e.t0=e.catch(11);case 19:throw new Error("Error estimating transaction fee. Response "+s.status+": "+s.statusText+". Attempted to fetch "+i+' and failed with the message: "'+a+'"');case 20:return e.next=22,s.text();case 22:return p=e.sent,d=new l.default(t.serialize().byteLength),f=new l.default(p),e.abrupt("return",f.mul(d));case 26:case"end":return e.stop()}}),e,null,[[11,17]])})))).apply(this,arguments)}function zr(){return(zr=L(Y.mark((function e(t,r,n){var o,i;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.serialize(),i=r.getBroadcastApiUrl(),e.abrupt("return",_r(o,i,n));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _r(e,t,r){return Rr.apply(this,arguments)}function Rr(){return(Rr=L(Y.mark((function e(t,r,n){var o,i,s;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={method:"POST",headers:{"Content-Type":n?"application/json":"application/octet-stream"},body:n?JSON.stringify({tx:t.toString("hex"),attachment:n.toString("hex")}):t},e.next=3,c.fetchPrivate(r,o);case 3:if((i=e.sent).ok){e.next=14;break}return e.prev=5,e.next=8,i.json();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(5),Error("Failed to broadcast transaction: "+e.t0.message);case 14:return e.next=16,i.text();case 16:return s=e.sent,e.prev=17,e.abrupt("return",JSON.parse(s));case 21:return e.prev=21,e.t1=e.catch(17),e.abrupt("return",s);case 24:case"end":return e.stop()}}),e,null,[[5,11],[17,21]])})))).apply(this,arguments)}function Vr(e,t,r){return jr.apply(this,arguments)}function jr(){return(jr=L(Y.mark((function e(t,r,n){var o,i,s,a;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={method:"GET"},i=n.getAbiApiUrl(t,r),e.next=4,c.fetchPrivate(i,o);case 4:if((s=e.sent).ok){e.next=16;break}return a="",e.prev=7,e.next=10,s.text();case 10:a=e.sent,e.next=15;break;case 13:e.prev=13,e.t0=e.catch(7);case 15:throw new Error('Error fetching contract ABI for contract "'+r+'" at address '+t+". Response "+s.status+": "+s.statusText+". Attempted to fetch "+i+' and failed with the message: "'+a+'"');case 16:return e.t1=JSON,e.next=19,s.text();case 19:return e.t2=e.sent,e.abrupt("return",e.t1.parse.call(e.t1,e.t2));case 21:case"end":return e.stop()}}),e,null,[[7,13]])})))).apply(this,arguments)}function Dr(e){return Gr.apply(this,arguments)}function Gr(){return(Gr=L(Y.mark((function e(t){var n,o,i,s,a,p,c,d,f,y;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={fee:new l.default(0),nonce:new l.default(0),network:new u.StacksMainnet,anchorMode:exports.AnchorMode.Any,postConditionMode:exports.PostConditionMode.Deny,memo:"",sponsored:!1},o=Object.assign(n,t),i=ve(o.recipient,o.amount,o.memo),a="publicKey"in o?nr(exports.AddressHashMode.SerializeP2PKH,o.publicKey,o.nonce,o.fee):or(exports.AddressHashMode.SerializeP2SH,o.numSignatures,o.publicKeys,o.nonce,o.fee),s=o.sponsored?new Sr(a):new Cr(a),p=[],o.postConditions&&o.postConditions.length>0&&o.postConditions.forEach((function(e){p.push(e)})),c=Ze(p),d=new br(o.network.version,s,i,c,o.postConditionMode,n.anchorMode,o.network.chainId),t.fee){e.next=16;break}return e.next=14,Kr(d,o.network);case 14:d.setFee(e.sent);case 16:if(t.nonce){e.next=23;break}return f=o.network.version===exports.TransactionVersion.Mainnet?exports.AddressVersion.MainnetSingleSig:exports.AddressVersion.TestnetSingleSig,y=r.c32address(f,d.auth.spendingCondition.signer),e.next=21,Fr(y,o.network);case 21:d.setNonce(e.sent);case 23:return e.abrupt("return",d);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qr(){return(qr=L(Y.mark((function e(t){var r,n,o,i,s,a,p,u,c,d,f,l,y;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("senderKey"in t)){e.next=12;break}return r=re(ce(ae(t.senderKey))),n=Kt(t,"senderKey"),e.next=5,Dr(z({publicKey:r},n));case 5:return o=e.sent,i=ae(t.senderKey),new vr(o).signOrigin(i),e.abrupt("return",o);case 12:return s=Kt(t,"signerKeys"),e.next=15,Dr(s);case 15:for(p=new vr(a=e.sent),u=t.publicKeys,c=function(){var e=f.value,t=oe(e);u=u.filter((function(e){return e!==t.data.toString("hex")})),p.signOrigin(ae(e))},d=W(t.signerKeys);!(f=d()).done;)c();for(l=W(u);!(y=l()).done;)p.appendOrigin(ee(Buffer.from(y.value,"hex")));return e.abrupt("return",a);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jr(e,t){return Wr.apply(this,arguments)}function Wr(){return(Wr=L(Y.mark((function e(t,r){var n,o,i,s,a,p,d,f;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.payload.payloadType===exports.PayloadType.SmartContract){e.next=2;break}throw new Error("Contract deploy fee estimation only possible with "+exports.PayloadType[exports.PayloadType.SmartContract]+" transactions. Invoked with: "+exports.PayloadType[t.payload.payloadType]);case 2:return n={method:"GET",headers:{Accept:"application/text"}},o=new u.StacksMainnet,i=r?r.getTransferFeeEstimateApiUrl():o.getTransferFeeEstimateApiUrl(),e.next=8,c.fetchPrivate(i,n);case 8:if((s=e.sent).ok){e.next=20;break}return a="",e.prev=11,e.next=14,s.text();case 14:a=e.sent,e.next=19;break;case 17:e.prev=17,e.t0=e.catch(11);case 19:throw new Error("Error estimating contract deploy fee. Response "+s.status+": "+s.statusText+". Attempted to fetch "+i+' and failed with the message: "'+a+'"');case 20:return e.next=22,s.text();case 22:return p=e.sent,d=new l.default(t.serialize().byteLength),f=new l.default(p),e.abrupt("return",f.mul(d));case 26:case"end":return e.stop()}}),e,null,[[11,17]])})))).apply(this,arguments)}function Xr(){return(Xr=L(Y.mark((function e(t){var r,n,o,i,s,a,p,c,d,f,y,h,x;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={fee:new l.default(0),nonce:new l.default(0),network:new u.StacksMainnet,anchorMode:exports.AnchorMode.Any,postConditionMode:exports.PostConditionMode.Deny,sponsored:!1},n=Object.assign(r,t),o=me(n.contractName,n.codeBody),i=exports.AddressHashMode.SerializeP2PKH,s=ae(n.senderKey),a=ce(s),c=nr(i,re(a),n.nonce,n.fee),p=n.sponsored?new Sr(c):new Cr(c),d=[],n.postConditions&&n.postConditions.length>0&&n.postConditions.forEach((function(e){d.push(e)})),f=Ze(d),y=new br(n.network.version,p,o,f,n.postConditionMode,n.anchorMode,n.network.chainId),t.fee){e.next=18;break}return e.next=16,Jr(y,n.network);case 16:y.setFee(e.sent);case 18:if(t.nonce){e.next=25;break}return h=n.network.version===exports.TransactionVersion.Mainnet?exports.AddressVersion.MainnetSingleSig:exports.AddressVersion.TestnetSingleSig,x=de(h,a),e.next=23,Fr(x,n.network);case 23:y.setNonce(e.sent);case 25:return n.senderKey&&new vr(y).signOrigin(s),e.abrupt("return",y);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yr(e,t){return $r.apply(this,arguments)}function $r(){return($r=L(Y.mark((function e(t,r){var n,o,i,s,a,p,d,f;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.payload.payloadType===exports.PayloadType.ContractCall){e.next=2;break}throw new Error("Contract call fee estimation only possible with "+exports.PayloadType[exports.PayloadType.ContractCall]+" transactions. Invoked with: "+exports.PayloadType[t.payload.payloadType]);case 2:return n={method:"GET",headers:{Accept:"application/text"}},o=new u.StacksMainnet,i=r?r.getTransferFeeEstimateApiUrl():o.getTransferFeeEstimateApiUrl(),e.next=8,c.fetchPrivate(i,n);case 8:if((s=e.sent).ok){e.next=20;break}return a="",e.prev=11,e.next=14,s.text();case 14:a=e.sent,e.next=19;break;case 17:e.prev=17,e.t0=e.catch(11);case 19:throw new Error("Error estimating contract call fee. Response "+s.status+": "+s.statusText+". Attempted to fetch "+i+' and failed with the message: "'+a+'"');case 20:return e.next=22,s.text();case 22:return p=e.sent,d=new l.default(t.serialize().byteLength),f=new l.default(p),e.abrupt("return",f.mul(d));case 26:case"end":return e.stop()}}),e,null,[[11,17]])})))).apply(this,arguments)}function Zr(e){return Qr.apply(this,arguments)}function Qr(){return(Qr=L(Y.mark((function e(t){var n,o,i,s,a,p,c,d,f,y,h;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={fee:new l.default(0),nonce:new l.default(0),network:new u.StacksMainnet,anchorMode:exports.AnchorMode.Any,postConditionMode:exports.PostConditionMode.Deny,sponsored:!1},o=Object.assign(n,t),i=we(o.contractAddress,o.contractName,o.functionName,o.functionArgs),!(null==o?void 0:o.validateWithAbi)){e.next=16;break}if("boolean"!=typeof o.validateWithAbi){e.next=14;break}if(!(null==o?void 0:o.network)){e.next=11;break}return e.next=8,Vr(o.contractAddress,o.contractName,o.network);case 8:s=e.sent,e.next=12;break;case 11:throw new Error("Network option must be provided in order to validate with ABI");case 12:e.next=15;break;case 14:s=o.validateWithAbi;case 15:Ur(i,s);case 16:if(a="publicKey"in o?nr(exports.AddressHashMode.SerializeP2PKH,o.publicKey,o.nonce,o.fee):or(exports.AddressHashMode.SerializeP2SH,o.numSignatures,o.publicKeys,o.nonce,o.fee),p=o.sponsored?new Sr(a):new Cr(a),c=[],o.postConditions&&o.postConditions.length>0&&o.postConditions.forEach((function(e){c.push(e)})),d=Ze(c),f=new br(o.network.version,p,i,d,o.postConditionMode,o.anchorMode,o.network.chainId),t.fee){e.next=29;break}return e.next=27,Yr(f,o.network);case 27:f.setFee(e.sent);case 29:if(t.nonce){e.next=36;break}return y=o.network.version===exports.TransactionVersion.Mainnet?exports.AddressVersion.MainnetSingleSig:exports.AddressVersion.TestnetSingleSig,h=r.c32address(y,f.auth.spendingCondition.signer),e.next=34,Fr(h,o.network);case 34:f.setNonce(e.sent);case 36:return e.abrupt("return",f);case 37:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function en(){return(en=L(Y.mark((function e(t){var r,n,o,i,s,a,p,u,c,d,f,l,y;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("senderKey"in t)){e.next=12;break}return r=re(ce(ae(t.senderKey))),n=Kt(t,"senderKey"),e.next=5,Zr(z({publicKey:r},n));case 5:return o=e.sent,i=ae(t.senderKey),new vr(o).signOrigin(i),e.abrupt("return",o);case 12:return s=Kt(t,"signerKeys"),e.next=15,Zr(s);case 15:for(p=new vr(a=e.sent),u=t.publicKeys,c=function(){var e=f.value,t=oe(e);u=u.filter((function(e){return e!==t.data.toString("hex")})),p.signOrigin(ae(e))},d=W(t.signerKeys);!(f=d()).done;)c();for(l=W(u);!(y=l()).done;)p.appendOrigin(ee(Buffer.from(y.value,"hex")));return e.abrupt("return",a);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tn(){return(tn=L(Y.mark((function e(t){var r,n,o,i,s,a,p,d,f;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={network:new u.StacksMainnet},n=Object.assign(r,t),o=n.functionArgs,i=n.senderAddress,s=n.network.getReadOnlyFunctionCallApiUrl(n.contractAddress,n.contractName,n.functionName),a=o.map((function(e){return Gt(e)})),p=JSON.stringify({sender:i,arguments:a}),e.next=8,c.fetchPrivate(s,{method:"POST",body:p,headers:{"Content-Type":"application/json"}});case 8:if((d=e.sent).ok){e.next=20;break}return f="",e.prev=11,e.next=14,d.text();case 14:f=e.sent,e.next=19;break;case 17:e.prev=17,e.t0=e.catch(11);case 19:throw new Error("Error calling read-only function. Response "+d.status+": "+d.statusText+". Attempted to fetch "+s+' and failed with the message: "'+f+'"');case 20:return e.abrupt("return",d.json().then((function(e){return Wt(e)})));case 21:case"end":return e.stop()}}),e,null,[[11,17]])})))).apply(this,arguments)}function rn(){return(rn=L(Y.mark((function e(t){var r,n,o,i,s,a,p,c,d,f;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={fee:new l.default(0),sponsorNonce:new l.default(0),sponsorAddressHashmode:exports.AddressHashMode.SerializeP2PKH},o=Object.assign(n,t),i=null!=(r=t.network)?r:o.transaction.version===exports.TransactionVersion.Mainnet?new u.StacksMainnet:new u.StacksTestnet,s=oe(o.sponsorPrivateKey),t.fee){e.next=24;break}a=new l.default(0),e.t0=o.transaction.payload.payloadType,e.next=e.t0===exports.PayloadType.TokenTransfer?9:e.t0===exports.PayloadType.SmartContract?13:e.t0===exports.PayloadType.ContractCall?17:21;break;case 9:return e.next=11,Kr(o.transaction,i);case 11:return a=e.sent,e.abrupt("break",22);case 13:return e.next=15,Jr(o.transaction,i);case 15:return a=e.sent,e.abrupt("break",22);case 17:return e.next=19,Yr(o.transaction,i);case 19:return a=e.sent,e.abrupt("break",22);case 21:throw new Error("Sponsored transactions not supported for transaction type "+exports.PayloadType[o.transaction.payload.payloadType]);case 22:o.transaction.setFee(a),o.fee=a;case 24:if(t.sponsorNonce){e.next=31;break}return p=i.version===exports.TransactionVersion.Mainnet?exports.AddressVersion.MainnetSingleSig:exports.AddressVersion.TestnetSingleSig,c=de(p,s),e.next=29,Fr(c,i);case 29:o.sponsorNonce=e.sent;case 31:return d=nr(o.sponsorAddressHashmode,re(s),o.sponsorNonce,o.fee),o.transaction.setSponsor(d),f=ae(o.sponsorPrivateKey),vr.createSponsorSigner(o.transaction,d).signSponsor(f),e.abrupt("return",o.transaction);case 37:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object.defineProperty(exports,"randomBytes",{enumerable:!0,get:function(){return h.default}}),exports.Authorization=Tr,exports.BufferArray=Et,exports.BufferReader=kt,exports.CLARITY_INT_SIZE=128,exports.COINBASE_BUFFER_LENGTH_BYTES=32,exports.COMPRESSED_PUBKEY_LENGTH_BYTES=32,exports.DEFAULT_CHAIN_ID=v,exports.DEFAULT_CORE_NODE_API_URL="https://stacks-node-api.mainnet.stacks.co",exports.DEFAULT_TRANSACTION_VERSION=U,exports.MAX_STRING_LENGTH_BYTES=128,exports.MEMO_MAX_LENGTH_BYTES=34,exports.RECOVERABLE_ECDSA_SIG_LENGTH_BYTES=65,exports.SponsoredAuthorization=Sr,exports.StacksTransaction=br,exports.StandardAuthorization=Cr,exports.TransactionSigner=vr,exports.UNCOMPRESSED_PUBKEY_LENGTH_BYTES=64,exports.abiFunctionToString=function(e){return"(define-"+("read_only"===e.access?"read-only":e.access)+" ("+e.name+" "+e.args.map((function(e){return"("+e.name+" "+Or(e.type)+")"})).join(" ")+"))"},exports.addressFromHashMode=function(e,t,r){return Me(Ie(e,t),r)},exports.addressFromPublicKeys=Oe,exports.addressFromVersionHash=Me,exports.addressHashModeToVersion=Ie,exports.addressToString=Ne,exports.broadcastRawTransaction=_r,exports.broadcastTransaction=function(e,t,r){return zr.apply(this,arguments)},exports.bufferCV=lt,exports.bufferCVFromString=yt,exports.callReadOnlyFunction=function(e){return tn.apply(this,arguments)},exports.cloneDeep=Lt,exports.codeBodyString=De,exports.compressPublicKey=ie,exports.contractPrincipalCV=ot,exports.contractPrincipalCVFromAddress=it,exports.contractPrincipalCVFromStandard=function(e,t){var r=Re(t);return{type:exports.ClarityType.PrincipalContract,address:e.address,contractName:r}},exports.createAddress=Be,exports.createAssetInfo=Xe,exports.createContractPrincipal=He,exports.createEmptyAddress=Ee,exports.createFungiblePostCondition=Te,exports.createLPList=Ze,exports.createLPString=Re,exports.createMemoString=Ge,exports.createMessageSignature=Yt,exports.createMultiSigSpendingCondition=or,exports.createNonFungiblePostCondition=Ce,exports.createSTXPostCondition=ge,exports.createSingleSigSpendingCondition=nr,exports.createStacksPrivateKey=ae,exports.createStacksPublicKey=Z,exports.createStandardPrincipal=Ke,exports.createTransactionAuthField=er,exports.cvToHex=Gt,exports.cvToJSON=at,exports.cvToString=function e(t,r){switch(void 0===r&&(r="hex"),t.type){case exports.ClarityType.BoolTrue:return"true";case exports.ClarityType.BoolFalse:return"false";case exports.ClarityType.Int:return t.value.fromTwos(128).toString();case exports.ClarityType.UInt:return"u"+t.value.toString();case exports.ClarityType.Buffer:if("tryAscii"===r){var n=t.buffer.toString("ascii");if(/[ -~]/.test(n))return JSON.stringify(n)}return"0x"+t.buffer.toString("hex");case exports.ClarityType.OptionalNone:return"none";case exports.ClarityType.OptionalSome:return"(some "+e(t.value,r)+")";case exports.ClarityType.ResponseErr:return"(err "+e(t.value,r)+")";case exports.ClarityType.ResponseOk:return"(ok "+e(t.value,r)+")";case exports.ClarityType.PrincipalStandard:case exports.ClarityType.PrincipalContract:return tt(t);case exports.ClarityType.List:return"(list "+t.list.map((function(t){return e(t,r)})).join(" ")+")";case exports.ClarityType.Tuple:return"(tuple "+Object.keys(t.data).map((function(n){return"("+n+" "+e(t.data[n],r)+")"})).join(" ")+")";case exports.ClarityType.StringASCII:return'"'+t.data+'"';case exports.ClarityType.StringUTF8:return'u"'+t.data+'"'}},exports.cvToValue=st,exports.deserializeAddress=Fe,exports.deserializeAssetInfo=$e,exports.deserializeCV=Bt,exports.deserializeLPList=et,exports.deserializeLPString=je,exports.deserializeMemoString=Je,exports.deserializeMessageSignature=Qt,exports.deserializeMultiSigSpendingCondition=cr,exports.deserializePostCondition=be,exports.deserializePrincipal=_e,exports.deserializePublicKey=se,exports.deserializeSingleSigSpendingCondition=ur,exports.deserializeSpendingCondition=fr,exports.deserializeStacksMessage=function(e,t,r){switch(t){case exports.StacksMessageType.Address:return Fe(e);case exports.StacksMessageType.Principal:return _e(e);case exports.StacksMessageType.LengthPrefixedString:return je(e);case exports.StacksMessageType.MemoString:return Je(e);case exports.StacksMessageType.AssetInfo:return $e(e);case exports.StacksMessageType.PostCondition:return be(e);case exports.StacksMessageType.PublicKey:return se(e);case exports.StacksMessageType.Payload:return Pe(e);case exports.StacksMessageType.LengthPrefixedList:if(!r)throw new ye("No List Type specified");return et(e,r);case exports.StacksMessageType.MessageSignature:return Qt(e);default:throw new Error("Could not recognize StacksMessageType")}},exports.deserializeTransaction=function(e){var t,r=(t="string"==typeof e?"0x"===e.slice(0,2).toLowerCase()?new kt(Buffer.from(e.slice(2),"hex")):new kt(Buffer.from(e,"hex")):Buffer.isBuffer(e)?new kt(e):e).readUInt8Enum(exports.TransactionVersion,(function(e){throw new Error("Could not parse "+e+" as TransactionVersion")})),n=t.readUInt32BE(),o=Tr.deserialize(t),i=t.readUInt8Enum(exports.AnchorMode,(function(e){throw new Error("Could not parse "+e+" as AnchorMode")})),s=t.readUInt8Enum(exports.PostConditionMode,(function(e){throw new Error("Could not parse "+e+" as PostConditionMode")})),a=et(t,exports.StacksMessageType.PostCondition),p=Pe(t);return new br(r,o,p,a,s,i,n)},exports.deserializeTransactionAuthField=rr,exports.emptyMessageSignature=$t,exports.encodeClarityValue=function(e,t){var r;switch((r=void 0!==e.id?e:Ir(e)).id){case exports.ClarityAbiTypeId.ClarityAbiTypeUInt128:return ft(t);case exports.ClarityAbiTypeId.ClarityAbiTypeInt128:return dt(t);case exports.ClarityAbiTypeId.ClarityAbiTypeBool:if("false"===t||"0"===t)return ct();if("true"===t||"1"===t)return ut();throw new Error("Unexpected Clarity bool value: "+JSON.stringify(t));case exports.ClarityAbiTypeId.ClarityAbiTypePrincipal:if(t.includes(".")){var n=t.split(".");return ot(n[0],n[1])}return rt(t);case exports.ClarityAbiTypeId.ClarityAbiTypeTraitReference:var o=t.split(".");return ot(o[0],o[1]);case exports.ClarityAbiTypeId.ClarityAbiTypeNone:return ht();case exports.ClarityAbiTypeId.ClarityAbiTypeBuffer:return lt(Buffer.from(t,"utf8"));case exports.ClarityAbiTypeId.ClarityAbiTypeStringAscii:return bt(t);case exports.ClarityAbiTypeId.ClarityAbiTypeStringUtf8:return vt(t);case exports.ClarityAbiTypeId.ClarityAbiTypeResponse:case exports.ClarityAbiTypeId.ClarityAbiTypeOptional:case exports.ClarityAbiTypeId.ClarityAbiTypeTuple:case exports.ClarityAbiTypeId.ClarityAbiTypeList:throw new he("Unsupported encoding for Clarity type: "+r.id);default:throw new Error("Unexpected Clarity type ID: "+JSON.stringify(r))}},exports.estimateContractDeploy=Jr,exports.estimateContractFunctionCall=Yr,exports.estimateTransfer=Kr,exports.exceedsMaxLengthBytes=Ft,exports.falseCV=ct,exports.fetchPrivate=function(e,t){return Dt.apply(this,arguments)},exports.getAbi=Vr,exports.getAddressFromPrivateKey=function(e,t){return void 0===t&&(t=exports.TransactionVersion.Mainnet),$(oe(e).data,t)},exports.getAddressFromPublicKey=$,exports.getCVTypeString=pt,exports.getNonce=Fr,exports.getPublicKey=ce,exports.getSignatureRecoveryParam=function(e){if(e.length<129)throw new Error("Invalid signature");var t=e.substr(0,2);return Ut(t)},exports.getTypeString=Or,exports.getTypeUnion=Ir,exports.hash160=_t,exports.hashP2PKH=Rt,exports.hashP2SH=Vt,exports.hexStringToInt=Ut,exports.hexToCV=qt,exports.intCV=dt,exports.intToHexString=Nt,exports.isClarityAbiBuffer=mr,exports.isClarityAbiList=Mr,exports.isClarityAbiOptional=Br,exports.isClarityAbiPrimitive=wr,exports.isClarityAbiResponse=kr,exports.isClarityAbiStringAscii=Ar,exports.isClarityAbiStringUtf8=Pr,exports.isClarityAbiTuple=Er,exports.isClarityName=jt,exports.isCompressed=te,exports.isSingleSig=ir,exports.leftPadHex=Mt,exports.leftPadHexToLength=It,exports.listCV=Ct,exports.makeContractCall=function(e){return en.apply(this,arguments)},exports.makeContractDeploy=function(e){return Xr.apply(this,arguments)},exports.makeContractFungiblePostCondition=function(e,t,r,n,o){return Te(He(e,t),r,n,o)},exports.makeContractNonFungiblePostCondition=function(e,t,r,n,o){return Ce(He(e,t),r,n,o)},exports.makeContractSTXPostCondition=function(e,t,r,n){return ge(He(e,t),r,n)},exports.makeRandomPrivKey=function(e){var r=new t.ec("secp256k1"),n={entropy:e||h.default(32)};return ae(r.genKeyPair(n).getPrivate().toString("hex",32))},exports.makeSTXTokenTransfer=function(e){return qr.apply(this,arguments)},exports.makeSigHashPreSign=lr,exports.makeStandardFungiblePostCondition=function(e,t,r,n){return Te(Ke(e),t,r,n)},exports.makeStandardNonFungiblePostCondition=function(e,t,r,n){return Ce(Ke(e),t,r,n)},exports.makeStandardSTXPostCondition=function(e,t,r){return ge(Ke(e),t,r)},exports.makeUnsignedContractCall=Zr,exports.makeUnsignedSTXTokenTransfer=Dr,exports.nextSignature=hr,exports.nextVerification=xr,exports.noneCV=ht,exports.omit=Kt,exports.parseAssetInfoString=We,exports.parsePrincipalString=Le,exports.parseReadOnlyResponse=Wt,exports.parseRecoverableSignature=ue,exports.parseToCV=function(e,t){var r=Or(t);if(wr(t)){if("uint128"===t)return ft(e);if("int128"===t)return dt(e);if("bool"===t){if("true"===e.toLowerCase())return ut();if("false"===e.toLowerCase())return ct();throw new Error("Invalid bool value: "+e)}if("principal"===t){if(e.includes(".")){var n=e.split(".");return ot(n[0],n[1])}return rt(e)}throw new Error("Contract function contains unsupported Clarity ABI type: "+r)}if(mr(t)){if(Buffer.from(e).byteLength>t.buffer.length)throw new Error("Input exceeds specified buffer length limit of "+t.buffer.length);return yt(e)}throw kr(t)||Br(t)||Er(t)||Mr(t),new Error("Contract function contains unsupported Clarity ABI type: "+r)},exports.privateKeyToString=function(e){return e.data.toString("hex")},exports.pubKeyfromPrivKey=oe,exports.publicKeyFromBuffer=ee,exports.publicKeyFromSignature=Q,exports.publicKeyToAddress=de,exports.publicKeyToString=re,exports.responseErrorCV=gt,exports.responseOkCV=Tt,exports.rightPadHexToLength=Ot,exports.serializeAddress=Ue,exports.serializeAssetInfo=Ye,exports.serializeCV=At,exports.serializeLPList=Qe,exports.serializeLPString=Ve,exports.serializeMemoString=qe,exports.serializeMessageSignature=Zt,exports.serializeMultiSigSpendingCondition=pr,exports.serializePostCondition=Se,exports.serializePrincipal=ze,exports.serializePublicKey=ne,exports.serializeSingleSigSpendingCondition=ar,exports.serializeSpendingCondition=dr,exports.serializeStacksMessage=ke,exports.serializeTransactionAuthField=tr,exports.sha512_256=Ht,exports.signWithKey=pe,exports.someCV=xt,exports.sponsorTransaction=function(e){return rn.apply(this,arguments)},exports.standardPrincipalCV=rt,exports.standardPrincipalCVFromAddress=nt,exports.stringAsciiCV=bt,exports.stringUtf8CV=vt,exports.trueCV=ut,exports.tupleCV=St,exports.txidFromData=zt,exports.uintCV=ft,exports.validateContractCall=Ur,exports.validateStacksAddress=function(e){try{return r.c32addressDecode(e),!0}catch(e){return!1}};
//# sourceMappingURL=transactions.cjs.production.min.js.map
